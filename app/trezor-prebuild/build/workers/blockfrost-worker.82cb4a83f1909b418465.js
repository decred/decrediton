(()=>{var t={"../blockchain-link-types/lib/constants/errors.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CustomError=void 0;const r="blockchain_link/",n={worker_not_found:"Worker not found",worker_invalid:"Invalid worker object",worker_timeout:"Worker timeout",worker_unknown_request:"Unknown message type:",worker_runtime:void 0,invalid_param:"Invalid parameter:",websocket_not_initialized:"WebSocket not initialized",websocket_no_url:"Cannot connect because no server was specified",websocket_timeout:"Websocket timeout",websocket_error_message:void 0,websocket_runtime_error:void 0};class i extends Error{constructor(t,e=""){if(super(e),this.message="",this.message=e,"string"==typeof t){const i=0===t.indexOf(r)?t.substring(16,t.length):t;this.code=`${r}${i}`;const s=n[i];"string"==typeof s&&(""===this.message?this.message=s:0===e.indexOf("+")&&(this.message=`${s} ${e.substring(1)}`))}"string"==typeof this.message&&""!==this.message||(this.message="Message not set")}}e.CustomError=i},"../blockchain-link-types/lib/constants/index.js":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.NETWORKS=e.RESPONSES=e.MESSAGES=void 0;const o=s(r("../blockchain-link-types/lib/constants/messages.js"));e.MESSAGES=o;const u=s(r("../blockchain-link-types/lib/constants/responses.js"));e.RESPONSES=u,e.NETWORKS={RIPPLE:"ripple",BLOCKBOOK:"blockbook",BLOCKFROST:"blockfrost"}},"../blockchain-link-types/lib/constants/messages.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TERMINATE=e.PUSH_TRANSACTION=e.UNSUBSCRIBE=e.SUBSCRIBE=e.ESTIMATE_FEE=e.GET_TRANSACTION=e.GET_ACCOUNT_UTXO=e.GET_ACCOUNT_INFO=e.GET_BLOCK=e.GET_BLOCK_HASH=e.GET_FIAT_RATES_TICKERS_LIST=e.GET_ACCOUNT_BALANCE_HISTORY=e.GET_FIAT_RATES_FOR_TIMESTAMPS=e.GET_CURRENT_FIAT_RATES=e.GET_INFO=e.DISCONNECT=e.CONNECT=e.INIT=e.HANDSHAKE=void 0,e.HANDSHAKE="m_handshake",e.INIT="m_init",e.CONNECT="m_connect",e.DISCONNECT="m_disconnect",e.GET_INFO="m_get_info",e.GET_CURRENT_FIAT_RATES="m_get_current_fiat_rates",e.GET_FIAT_RATES_FOR_TIMESTAMPS="m_get_fiat_rates_for_timestamps",e.GET_ACCOUNT_BALANCE_HISTORY="m_get_account_balance_history",e.GET_FIAT_RATES_TICKERS_LIST="m_get_fiat_rates_tickers_list",e.GET_BLOCK_HASH="m_get_block_hash",e.GET_BLOCK="m_get_block",e.GET_ACCOUNT_INFO="m_get_account_info",e.GET_ACCOUNT_UTXO="m_get_account_utxo",e.GET_TRANSACTION="m_get_transaction",e.ESTIMATE_FEE="m_estimate_fee",e.SUBSCRIBE="m_subscribe",e.UNSUBSCRIBE="m_unsubscribe",e.PUSH_TRANSACTION="m_push_tx",e.TERMINATE="terminate"},"../blockchain-link-types/lib/constants/responses.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NOTIFICATION=e.DISCONNECTED=e.CONNECTED=e.PUSH_TRANSACTION=e.UNSUBSCRIBE=e.SUBSCRIBE=e.ESTIMATE_FEE=e.GET_TRANSACTION=e.GET_ACCOUNT_BALANCE_HISTORY=e.GET_ACCOUNT_UTXO=e.GET_ACCOUNT_INFO=e.GET_FIAT_RATES_TICKERS_LIST=e.GET_FIAT_RATES_FOR_TIMESTAMPS=e.GET_CURRENT_FIAT_RATES=e.GET_BLOCK=e.GET_BLOCK_HASH=e.GET_INFO=e.CONNECT=e.ERROR=void 0,e.ERROR="r_error",e.CONNECT="r_connect",e.GET_INFO="r_info",e.GET_BLOCK_HASH="r_get_block_hash",e.GET_BLOCK="r_get_block",e.GET_CURRENT_FIAT_RATES="r_get_current_fiat_rates",e.GET_FIAT_RATES_FOR_TIMESTAMPS="r_get_fiat_rates_for_timestamps",e.GET_FIAT_RATES_TICKERS_LIST="r_GET_FIAT_RATES_TICKERS_LIST",e.GET_ACCOUNT_INFO="r_account_info",e.GET_ACCOUNT_UTXO="r_get_account_utxo",e.GET_ACCOUNT_BALANCE_HISTORY="r_get_account_balance_history",e.GET_TRANSACTION="r_get_transaction",e.ESTIMATE_FEE="r_estimate_fee",e.SUBSCRIBE="r_subscribe",e.UNSUBSCRIBE="r_unsubscribe",e.PUSH_TRANSACTION="r_push_tx",e.CONNECTED="r_connected",e.DISCONNECTED="r_disconnected",e.NOTIFICATION="r_notification"},"../blockchain-link-utils/lib/blockfrost.js":function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.transformAccountInfo=e.transformTransaction=e.filterTokenTransfers=e.transformInputOutput=e.transformTokenInfo=e.parseAsset=e.getSubtype=e.transformUtxos=void 0;const i=n(r("../../node_modules/bignumber.js/bignumber.js")),s=r("../blockchain-link-utils/lib/utils.js");e.transformUtxos=t=>{const e=[];return t.forEach((t=>t.utxoData.amount.forEach((r=>{e.push({address:t.address,txid:t.utxoData.tx_hash,confirmations:t.blockInfo.confirmations,blockHeight:t.blockInfo.height||0,amount:r.quantity,vout:t.utxoData.output_index,path:t.path,cardanoSpecific:{unit:r.unit}})})))),e};e.getSubtype=t=>{if(t.txData.withdrawal_count>0)return"withdrawal";const e=t.txData.stake_cert_count,r=t.txData.delegation_count;return 0===e&&0===r?null:e>0?new i.default(t.txData.deposit).gt(0)?"stake_registration":"stake_deregistration":r>0?"stake_delegation":null};e.parseAsset=t=>({policyId:t.slice(0,56),assetName:(t=>{let e="";for(let r=0;r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substring(r,r+2),16));return e})(t.slice(56))});e.transformTokenInfo=t=>{if(!t||!Array.isArray(t))return;const r=t.map((t=>{const{assetName:r}=(0,e.parseAsset)(t.unit);return{type:"BLOCKFROST",name:t.fingerprint,contract:t.unit,symbol:r||t.fingerprint,balance:t.quantity,decimals:t.decimals}}));return r.length>0?r:void 0};e.transformInputOutput=(t,e="lovelace")=>t.map((t=>{var r,n;return{n:t.output_index,addresses:[t.address],isAddress:!0,value:null!==(n=null===(r=t.amount.find((t=>t.unit===e)))||void 0===r?void 0:r.quantity)&&void 0!==n?n:"0"}}));e.filterTokenTransfers=(t,r,n)=>{const i=[],o=t.used.concat(t.unused),u=t.change.concat(o);return r.txUtxos.outputs.forEach((c=>{c.amount.filter((t=>"lovelace"!==t.unit)).forEach((a=>{var l;const f=a.unit,h=(0,e.transformInputOutput)(r.txUtxos.inputs,f),d=(0,e.transformInputOutput)(r.txUtxos.outputs,f),p=(0,s.filterTargets)(u,h),g=(0,s.filterTargets)(u,d),y=t.change.find((t=>t.address===c.address));if(0===g.length&&0===p.length)return null;const b=(0,s.filterTargets)(o,(0,e.transformInputOutput)([c],f));let m="0";if("sent"===n?m=y?"0":a.quantity:"recv"===n?m=b.reduce(s.sumVinVout,0).toString():"self"!==n||y||(m=b.reduce(s.sumVinVout,0).toString()),"0"===m||!a.fingerprint)return null;const{assetName:v}=(0,e.parseAsset)(f);i.push({type:n,name:a.fingerprint,symbol:v||a.fingerprint,contract:a.unit,decimals:a.decimals,amount:m.toString(),from:"sent"===n||"self"===n?r.address:(null===(l=r.txUtxos.inputs.find((t=>t.amount.find((t=>t.unit===f)))))||void 0===l?void 0:l.address)||"",to:"recv"===n?r.address:c.address})}))})),i.filter((t=>!!t))};e.transformTransaction=(t,r,n)=>{var o;const u=r?r.change.concat(r.used,r.unused).map((t=>t.address)):[t];let c,a=[],l=(null===(o=n.txData.output_amount.find((t=>"lovelace"===t.unit)))||void 0===o?void 0:o.quantity)||"0";const f=n.txData.fees;let h,d;const p=(0,e.transformInputOutput)(n.txUtxos.inputs),g=(0,e.transformInputOutput)(n.txUtxos.outputs),y=Array.isArray(p)?p.length:0,b=Array.isArray(g)?g.length:0,m=(0,s.filterTargets)(u,p),v=(0,s.filterTargets)(u,g),_=r?(0,s.filterTargets)(r.change,g):[],w=p.reduce(s.sumVinVout,0),E=g.reduce(s.sumVinVout,0);if(0===m.length&&0===v.length)c="unknown";else if(y>0&&b>0&&m.length===y&&v.length===b)c="self",a=g.filter((t=>_.indexOf(t)<0)),l=n.txData.fees,n.txData.withdrawal_count>0&&(h=new i.default(E).plus(n.txData.fees).minus(w).toString()),new i.default(n.txData.deposit).gt(0)&&(d=n.txData.deposit);else if(0===m.length&&v.length>0)c="recv",l="0",v.length>0&&(a=v,l=v.reduce(s.sumVinVout,0));else if(c="sent",a=g.filter((t=>_.indexOf(t)<0)),b){const t=m.reduce(s.sumVinVout,0),e=v.reduce(s.sumVinVout,0);l=new i.default(t).minus(e).minus(null!=f?f:"0")}const A=r?(0,e.filterTokenTransfers)(r,n,c):[];return{type:c,txid:n.txHash,blockTime:n.txData.block_time,blockHeight:n.txData.block_height||void 0,blockHash:n.txData.block,amount:null==l?void 0:l.toString(),fee:f,targets:a.map((t=>(0,s.transformTarget)(t,v))),tokens:A,internalTransfers:[],cardanoSpecific:{subtype:(0,e.getSubtype)(n),withdrawal:h,deposit:d},feeRate:void 0,details:{vin:p.map((0,s.enhanceVinVout)(u)),vout:g.map((0,s.enhanceVinVout)(u)),size:n.txData.size,totalInput:w.toString(),totalOutput:E.toString()}}};e.transformAccountInfo=t=>{const r=t.history.transactions;return Object.assign(Object.assign({},t),{tokens:(0,e.transformTokenInfo)(t.tokens),history:Object.assign(Object.assign({},t.history),{transactions:r?null==r?void 0:r.map((r=>(0,e.transformTransaction)(t.descriptor,t.addresses,r))):[]})})}},"../blockchain-link-utils/lib/utils.js":function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.sortTxsFromLatest=e.transformTarget=e.sumVinVout=e.enhanceVinVout=e.filterTargets=e.isAccountOwned=void 0;const i=n(r("../../node_modules/bignumber.js/bignumber.js")),s=r("../utils/lib/index.js");e.isAccountOwned=t=>e=>Array.isArray(null==e?void 0:e.addresses)&&e.addresses.some((e=>t.includes(e)));e.filterTargets=(t,r)=>{if("string"==typeof t&&(t=[t]),!(t&&Array.isArray(t)&&r&&Array.isArray(r)))return[];const n=t.map((t=>"string"==typeof t?t:"object"==typeof t&&"string"==typeof t.address?t.address:void 0)).filter(s.isNotUndefined);return r.filter((0,e.isAccountOwned)(n))};e.enhanceVinVout=t=>r=>Object.assign(Object.assign({},r),{isAccountOwned:(0,e.isAccountOwned)(t)(r)||void 0});e.sumVinVout=(t,{value:e})=>"string"==typeof e?new i.default(e||"0").plus(t):t;e.transformTarget=(t,e)=>({n:t.n||0,addresses:t.addresses,isAddress:t.isAddress,amount:t.value,coinbase:t.coinbase,isAccountTarget:!!e.includes(t)||void 0});const o=({blockHeight:t})=>void 0===t||t<=0?Number.MAX_SAFE_INTEGER:t;e.sortTxsFromLatest=t=>{const e=t.slice().sort(((t,e)=>o(e)-o(t)));let r=0;for(;r<e.length-1;){const t=o(e[r]);let n=r+1;if(t===o(e[n])){do{n++}while(n<e.length&&t===o(e[n]));const i=(0,s.topologicalSort)(e.slice(r,n),((t,e)=>t.details.vin.some((({txid:t})=>t===e.txid))));e.splice(r,i.length,...i)}r=n}return e}},"../blockchain-link/lib/utils/socks-proxy-agent.js":t=>{"use strict";t.exports=t=>({})},"../blockchain-link/lib/utils/ws.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r("../../node_modules/events/events.js");class i extends n.EventEmitter{constructor(t,e,r){super(),this._ws=new WebSocket(t),this._ws.onclose=()=>{this.emit("close")},this._ws.onopen=()=>{this.emit("open")},this._ws.onerror=t=>{this.emit("error",new Error(`WsWrapper error. Ready state: ${this.readyState}`))},this._ws.onmessage=t=>{this.emit("message",t.data)}}close(){1===this.readyState&&this._ws.close()}send(t){this._ws.send(t)}get readyState(){return this._ws.readyState}}i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,e.default=i},"../blockchain-link/lib/workers/baseWebsocket.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseWebsocket=void 0;const s=i(r("../blockchain-link/lib/utils/ws.js")),o=r("../utils/lib/createDeferred.js"),u=r("../utils/lib/typedEventEmitter.js"),c=r("../blockchain-link-types/lib/constants/errors.js");class a extends u.TypedEmitter{constructor(t){super(),this.messages=[],this.subscriptions=[],this.emitter=this,this.messageID=0,this.options=t}setConnectionTimeout(t){this.clearConnectionTimeout(),this.connectionTimeout=setTimeout(this.onTimeout.bind(this),t||this.options.timeout||2e4)}clearConnectionTimeout(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}setPingTimeout(){this.pingTimeout&&clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(this.onPing.bind(this),this.options.pingTimeout||5e4)}rejectAllPending(t,e){this.messages.forEach((r=>r.reject(new c.CustomError(t,e)))),this.messages.splice(0,this.messages.length)}onTimeout(){const{ws:t}=this;if(t)if(t.listenerCount("open")>0){t.emit("error",new c.CustomError("websocket_timeout"));try{t.close()}catch(t){}}else this.rejectAllPending("websocket_timeout"),t.close()}async onPing(){if(this.ws&&this.isConnected())try{this.subscriptions.length>0||this.options.keepAlive?await this.ping():this.ws.close()}catch(t){}}onError(){this.onClose()}sendMessage(t){var e,r;const{ws:n}=this;if(!n)throw new c.CustomError("websocket_not_initialized");const i=this.messageID.toString(),s=(0,o.createDeferred)(i),u=Object.assign({id:i},t);return this.messageID++,this.messages.push(s),this.setConnectionTimeout(),this.setPingTimeout(),null===(r=(e=this.options).onSending)||void 0===r||r.call(e,t),n.send(JSON.stringify(u)),s.promise}onMessage(t){try{const e=JSON.parse(t),{id:r,data:n}=e,i=this.messages.find((t=>t.id===r));if(i)n.error?i.reject(new c.CustomError("websocket_error_message",n.error.message)):i.resolve(n),this.messages.splice(this.messages.indexOf(i),1);else{const t=this.subscriptions.find((t=>t.id===r));t&&t.callback(n)}}catch(t){}0===this.messages.length&&this.clearConnectionTimeout(),this.setPingTimeout()}addSubscription(t,e){const r=this.messageID.toString();this.subscriptions.push({id:r,type:t,callback:e})}removeSubscription(t){const e=this.subscriptions.findIndex((e=>e.type===t));return e>=0&&this.subscriptions.splice(e,1),e}async connect(){var t;if(this.connectPromise)return this.connectPromise;(null===(t=this.ws)||void 0===t?void 0:t.readyState)===s.default.CLOSING&&await new n((t=>this.emitter.once("disconnected",t))),this.setConnectionTimeout(this.options.connectionTimeout);const e=(0,o.createDeferred)(-1);this.connectPromise=e.promise;const r=this.createWebsocket();return r.once("error",(t=>{this.onClose(),e.reject(new c.CustomError("websocket_runtime_error",t.message))})),r.on("open",(()=>{this.init(),e.resolve()})),this.ws=r,e.promise.finally((()=>{this.connectPromise=void 0}))}init(){const{ws:t}=this;if(!t||!this.isConnected())throw Error("Websocket init cannot be called");this.clearConnectionTimeout(),t.removeAllListeners(),t.on("error",this.onError.bind(this)),t.on("message",this.onMessage.bind(this)),t.on("close",(()=>{this.onClose(),this.emitter.emit("disconnected")}))}disconnect(){var t;null===(t=this.ws)||void 0===t||t.close()}isConnected(){var t;return(null===(t=this.ws)||void 0===t?void 0:t.readyState)===s.default.OPEN}onClose(){var t;this.pingTimeout&&clearTimeout(this.pingTimeout),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.isConnected()&&this.disconnect(),null===(t=this.ws)||void 0===t||t.removeAllListeners(),this.rejectAllPending("websocket_runtime_error","Websocket closed unexpectedly")}dispose(){this.onClose(),this.removeAllListeners()}}e.BaseWebsocket=a},"../blockchain-link/lib/workers/baseWorker.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseWorker=e.CONTEXT=void 0;const s=i(r("../blockchain-link/lib/utils/socks-proxy-agent.js")),o=r("../blockchain-link-types/lib/constants/errors.js"),u=r("../blockchain-link/lib/workers/state.js"),c=r("../blockchain-link/lib/workers/utils.js"),a=r("../blockchain-link-types/lib/constants/index.js");e.CONTEXT="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||"undefined"!=typeof importScripts?"worker":"main";e.BaseWorker=class{constructor(){this.settings={},"worker"===e.CONTEXT?this.post=t=>self.postMessage(t):this.post=t=>this.onmessage({data:t}),this.state=new u.WorkerState,setTimeout((()=>{this.post({id:-1,type:a.MESSAGES.HANDSHAKE})}),10)}debug(...t){if(!this.settings.debug)return;const e=`[Worker "${this.settings.name}"]:`,r=t[0];"warn"===r||"error"===r?console[r](e,...t.slice(1)):console.log(e,...t)}cleanup(){this.api=void 0,this.state.cleanup()}connect(){if(this.isConnected(this.api))return n.resolve(this.api);if(!this.connectPromise){const t=Array.isArray(this.settings.server)?this.settings.server.filter((t=>"string"==typeof t)):[];if(t.length<1)throw new o.CustomError("connect","Endpoint not set");const e=(0,c.prioritizeEndpoints)(t);this.connectPromise=this.connectRecursive(e).then((t=>(this.debug("Connected"),this.api=t,this.connectPromise=void 0,t)))}return this.connectPromise}connectRecursive([t,...e]){if(!t)throw new o.CustomError("connect","All backends are down");return this.proxyAgent&&(this.proxyAgent.protocol=/^(https|wss):/.test(t)?"https:":"http:"),this.debug("Connecting to",t),this.tryConnect(t).catch((t=>(this.debug("Connection failed",t),this.connectRecursive(e))))}disconnect(){}async messageHandler(t){if(!t.data)return!0;const{data:e}=t,{id:r}=e;return this.debug("onmessage",e),e.type===a.MESSAGES.HANDSHAKE?(this.settings=e.settings,this.proxyAgent=e.settings.proxy?(0,s.default)(e.settings.proxy):void 0,!0):e.type===a.MESSAGES.CONNECT?(await this.connect(),this.post({id:r,type:a.RESPONSES.CONNECT,payload:!0}),!0):e.type===a.MESSAGES.DISCONNECT?(this.disconnect(),this.post({id:r,type:a.RESPONSES.DISCONNECTED,payload:!0}),!0):e.type===a.MESSAGES.TERMINATE?(this.disconnect(),this.cleanup(),!0):void 0}errorResponse(t,e){const r={code:"",message:""};e instanceof Error&&(r.message=e.message,r.code=e instanceof o.CustomError&&e.code?e.code:""),this.post({id:t,type:a.RESPONSES.ERROR,payload:r})}postMessage(t){this.messageHandler({data:t})}onmessage(t){}onmessageerror(t){}onerror(t){}terminate(){this.postMessage({id:-1,type:a.MESSAGES.TERMINATE})}}},"../blockchain-link/lib/workers/blockfrost/websocket.js":function(t,e,r){"use strict";var n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.BlockfrostAPI=void 0;const i=n(r("../blockchain-link/lib/utils/ws.js")),s=r("../blockchain-link/lib/workers/baseWebsocket.js");class o extends s.BaseWebsocket{constructor(){super(...arguments),this.send=(t,e={})=>this.sendMessage({command:t,params:e})}createWebsocket(){const{url:t}=this.options;return new i.default(t,{agent:this.options.agent})}ping(){return this.getBlockHash(1)}getServerInfo(){return this.send("GET_SERVER_INFO")}getBlockHash(t){return this.send("GET_BLOCK",{hashOrNumber:t})}estimateFee(t){return this.send("ESTIMATE_FEE",t)}getAccountInfo(t){return this.send("GET_ACCOUNT_INFO",t)}getAccountUtxo(t){return this.send("GET_ACCOUNT_UTXO",{descriptor:t})}getAccountBalanceHistory(t){return this.send("GET_BALANCE_HISTORY",t)}getTransaction(t){return this.send("GET_TRANSACTION",{txId:t})}pushTransaction(t){return this.send("PUSH_TRANSACTION",{txData:t})}subscribeBlock(){return this.removeSubscription("block"),this.addSubscription("block",(t=>this.emit("block",t))),this.send("SUBSCRIBE_BLOCK")}subscribeAddresses(t){return this.removeSubscription("notification"),this.addSubscription("notification",(t=>this.emit("notification",t))),this.send("SUBSCRIBE_ADDRESS",{addresses:t})}unsubscribeBlock(){return this.removeSubscription("block")>=0?this.send("UNSUBSCRIBE_BLOCK"):{subscribed:!1}}unsubscribeAddresses(){return this.removeSubscription("notification")>=0?this.send("UNSUBSCRIBE_ADDRESS"):{subscribed:!1}}}e.BlockfrostAPI=o},"../blockchain-link/lib/workers/state.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerState=void 0;const n=r("../blockchain-link-types/lib/constants/errors.js");e.WorkerState=class{constructor(){this.addresses=[],this.accounts=[],this.subscription={}}validateAddresses(t){if(!Array.isArray(t))throw new n.CustomError("invalid_param","+addresses");const e=[];return t.filter((t=>"string"==typeof t&&(!(e.indexOf(t)>=0)&&(e.push(t),!0))))}addAddresses(t){const e=this.validateAddresses(t).filter((t=>this.addresses.indexOf(t)<0));return this.addresses=this.addresses.concat(e),e}getAddresses(){return this.addresses}removeAddresses(t){const e=this.validateAddresses(t);return this.addresses=this.addresses.filter((t=>e.indexOf(t)<0)),this.addresses}validateAccounts(t){if(!Array.isArray(t))throw new n.CustomError("invalid_param","+accounts");const e=[];return t.filter((t=>!(!t||"object"!=typeof t||"string"!=typeof t.descriptor)&&(!(e.indexOf(t.descriptor)>=0)&&(e.push(t.descriptor),!0))))}getAccountAddresses(t){if(t.addresses){const{change:e,used:r,unused:n}=t.addresses;return e.concat(r,n).map((t=>t.address))}return[t.descriptor]}addAccounts(t){const e=this.validateAccounts(t),r=this.accounts.filter((t=>!e.find((e=>e.descriptor===t.descriptor))));this.accounts=r.concat(e);const n=this.accounts.reduce(((t,e)=>t.concat(this.getAccountAddresses(e))),[]);return this.addAddresses(n),e}getAccount(t){return this.accounts.find((e=>{if(e.descriptor===t)return!0;if(e.addresses){const{change:r,used:n,unused:i}=e.addresses;if(r.find((e=>e.address===t)))return!0;if(n.find((e=>e.address===t)))return!0;if(i.find((e=>e.address===t)))return!0}return!1}))}getAccounts(){return this.accounts}removeAccounts(t){const e=this.validateAccounts(t),r=this.accounts.filter((t=>e.find((e=>e.descriptor===t.descriptor)))),n=r.reduce(((t,e)=>t.concat(this.getAccountAddresses(e))),[]);return this.accounts=this.accounts.filter((t=>r.indexOf(t)<0)),this.removeAddresses(n),this.accounts}addSubscription(t){this.subscription[t]=!0}getSubscription(t){return this.subscription[t]}hasSubscriptions(){return Object.keys(this.subscription).length>0}removeSubscription(t){delete this.subscription[t]}clearSubscriptions(){Object.keys(this.subscription).forEach((t=>{delete this.subscription[t]}))}removeEmpty(t){return Object.keys(t).forEach((e=>{Array.isArray(t[e])&&t[e].map((t=>this.removeEmpty(t))),t[e]&&"object"==typeof t[e]?this.removeEmpty(t[e]):void 0===t[e]&&delete t[e]})),t}cleanup(){this.removeAccounts(this.getAccounts()),this.removeAddresses(this.getAddresses()),this.clearSubscriptions()}}},"../blockchain-link/lib/workers/utils.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.prioritizeEndpoints=void 0;const n=r("../utils/lib/index.js");e.prioritizeEndpoints=t=>t.map((t=>{const e=(0,n.parseHostname)(t);let r=Math.random();return"localhost"===e||"127.0.0.1"===e?r+=2:(null==e?void 0:e.endsWith(".onion"))&&(r+=1),[t,r]})).sort((([,t],[,e])=>e-t)).map((([t])=>t))},"../utils/lib/arrayDistinct.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayDistinct=void 0;e.arrayDistinct=(t,e,r)=>r.indexOf(t)===e},"../utils/lib/arrayPartition.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayPartition=void 0;e.arrayPartition=(t,e)=>t.reduce((([t,r],n)=>e(n)?[[...t,n],r]:[t,[...r,n]]),[[],[]])},"../utils/lib/arrayShuffle.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayShuffle=void 0;e.arrayShuffle=t=>{const e=t.slice();for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}},"../utils/lib/arrayToDictionary.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToDictionary=void 0;const r=t=>!!["string","number"].includes(typeof t);e.arrayToDictionary=(t,e,n)=>n?t.reduce(((t,n)=>{var i;const s=e(n);return r(s)?Object.assign(Object.assign({},t),{[s]:[...null!==(i=t[s])&&void 0!==i?i:[],n]}):t}),{}):t.reduce(((t,n)=>{const i=e(n);return r(i)?Object.assign(Object.assign({},t),{[i]:n}):t}),{})},"../utils/lib/bufferUtils.js":(t,e,r)=>{"use strict";var Buffer=r("../../node_modules/buffer/index.js").lW;Object.defineProperty(e,"__esModule",{value:!0}),e.getChunkSize=e.reverseBuffer=void 0;e.reverseBuffer=t=>{if(t.length<1)return t;const e=Buffer.alloc(t.length);let r=e.length-1;for(let n=0;n<e.length/2;n++)e[n]=t[r],e[r]=t[n],r--;return e};e.getChunkSize=t=>{const e=Buffer.allocUnsafe(1);return e.writeUInt8(t),e}},"../utils/lib/bytesToHumanReadable.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToHumanReadable=void 0;const r=["B","KB","MB","GB","TB"];e.bytesToHumanReadable=t=>{let e=Math.abs(t),n=0;for(;e>=1024||n>=r.length;)e/=1024,n++;return`${e.toFixed(1)} ${r[n]}`}},"../utils/lib/capitalizeFirstLetter.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.capitalizeFirstLetter=void 0;e.capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1)},"../utils/lib/cloneObject.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cloneObject=void 0;e.cloneObject=t=>{const e=JSON.stringify(t);return void 0===e?t:JSON.parse(e)}},"../utils/lib/countBytesInString.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countBytesInString=void 0;e.countBytesInString=t=>encodeURI(t).split(/%..|./).length-1},"../utils/lib/createCooldown.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCooldown=void 0;e.createCooldown=t=>{let e=0;return()=>{const r=Date.now();return r-e>=t&&(e=r,!0)}}},"../utils/lib/createDeferred.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.createDeferred=void 0;e.createDeferred=t=>{let e=()=>{},r=()=>{};const i=new n(((t,n)=>{e=t,r=n}));return{id:t,resolve:e,reject:r,promise:i}}},"../utils/lib/createTimeoutPromise.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.createTimeoutPromise=void 0;e.createTimeoutPromise=t=>new n((e=>setTimeout(e,t)))},"../utils/lib/enumUtils.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getValueByKey=e.getKeyByValue=void 0,e.getKeyByValue=function(t,e){return t&&Object.keys(t).find((r=>t[r]===e))},e.getValueByKey=function(t,e){const r=t&&Object.keys(t).find((t=>t===e));return r&&t[r]}},"../utils/lib/getLocaleSeparators.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLocaleSeparators=void 0;e.getLocaleSeparators=t=>{var e,r;const n=new Intl.NumberFormat(t).formatToParts(10000.1);return{decimalSeparator:null===(e=n.find((({type:t})=>"decimal"===t)))||void 0===e?void 0:e.value,thousandsSeparator:null===(r=n.find((({type:t})=>"group"===t)))||void 0===r?void 0:r.value}}},"../utils/lib/getNumberFromPixelString.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNumberFromPixelString=void 0;e.getNumberFromPixelString=t=>parseInt(t.replace("px",""),10)},"../utils/lib/getRandomNumberInRange.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomNumberInRange=void 0;e.getRandomNumberInRange=(t,e)=>Math.floor(Math.random()*(e-t+1))+t},"../utils/lib/getSynchronize.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.getSynchronize=void 0;e.getSynchronize=()=>{let t;return e=>{const r=(null!=t?t:n.resolve()).catch((()=>{})).then(e).finally((()=>{t===r&&(t=void 0)}));return t=r,t}}},"../utils/lib/getWeakRandomId.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWeakRandomId=void 0;e.getWeakRandomId=t=>{let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(62*Math.random()));return e}},"../utils/lib/hasUppercaseLetter.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUppercaseLetter=void 0;const r=new RegExp("^(.*[A-Z].*)$");e.hasUppercaseLetter=t=>r.test(t)},"../utils/lib/index.js":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.xssFilters=e.versionUtils=e.enumUtils=e.bufferUtils=void 0,s(r("../utils/lib/arrayDistinct.js"),e),s(r("../utils/lib/arrayPartition.js"),e),s(r("../utils/lib/arrayShuffle.js"),e),s(r("../utils/lib/arrayToDictionary.js"),e),e.bufferUtils=o(r("../utils/lib/bufferUtils.js")),s(r("../utils/lib/bytesToHumanReadable.js"),e),s(r("../utils/lib/capitalizeFirstLetter.js"),e),s(r("../utils/lib/cloneObject.js"),e),s(r("../utils/lib/countBytesInString.js"),e),s(r("../utils/lib/createCooldown.js"),e),s(r("../utils/lib/createDeferred.js"),e),s(r("../utils/lib/createTimeoutPromise.js"),e),e.enumUtils=o(r("../utils/lib/enumUtils.js")),s(r("../utils/lib/getNumberFromPixelString.js"),e),s(r("../utils/lib/getRandomNumberInRange.js"),e),s(r("../utils/lib/getSynchronize.js"),e),s(r("../utils/lib/getWeakRandomId.js"),e),s(r("../utils/lib/hasUppercaseLetter.js"),e),s(r("../utils/lib/isAscii.js"),e),s(r("../utils/lib/isHex.js"),e),s(r("../utils/lib/isNotUndefined.js"),e),s(r("../utils/lib/isUrl.js"),e),s(r("../utils/lib/mergeDeepObject.js"),e),s(r("../utils/lib/objectPartition.js"),e),s(r("../utils/lib/parseElectrumUrl.js"),e),s(r("../utils/lib/parseHostname.js"),e),s(r("../utils/lib/promiseAllSequence.js"),e),s(r("../utils/lib/redactUserPath.js"),e),s(r("../utils/lib/scheduleAction.js"),e),s(r("../utils/lib/throwError.js"),e),s(r("../utils/lib/truncateMiddle.js"),e),s(r("../utils/lib/topologicalSort.js"),e),s(r("../utils/lib/urlToOnion.js"),e),e.versionUtils=o(r("../utils/lib/versionUtils.js")),e.xssFilters=o(r("../utils/lib/xssFilters.js")),s(r("../utils/lib/getLocaleSeparators.js"),e)},"../utils/lib/isAscii.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAscii=void 0,e.isAscii=function(t){return!t||/^[\x00-\x7F]*$/.test(t)}},"../utils/lib/isHex.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isHex=void 0;e.isHex=t=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(t)},"../utils/lib/isNotUndefined.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNotUndefined=void 0;e.isNotUndefined=t=>void 0!==t},"../utils/lib/isUrl.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrl=void 0;const r=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i;e.isUrl=t=>r.test(t)},"../utils/lib/mergeDeepObject.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeDeepObject=void 0;const r=t=>{if("object"==typeof t&&null!==t){if("function"==typeof Object.getPrototypeOf){const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}return!1};e.mergeDeepObject=(...t)=>t.reduce(((t,n)=>{if(Array.isArray(n))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(n).forEach((i=>{["__proto__","constructor","prototype"].includes(i)||(Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=e.mergeDeepObject.options.mergeArrays?Array.from(new Set(t[i].concat(n[i]))):n[i]:r(t[i])&&r(n[i])?t[i]=(0,e.mergeDeepObject)(t[i],n[i]):t[i]=n[i])})),t}),{});const n={mergeArrays:!0};e.mergeDeepObject.options=n,e.mergeDeepObject.withOptions=(t,...r)=>{e.mergeDeepObject.options=Object.assign({mergeArrays:!0},t);const i=(0,e.mergeDeepObject)(...r);return e.mergeDeepObject.options=n,i}},"../utils/lib/objectPartition.js":function(t,e){"use strict";var r=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.objectPartition=void 0;e.objectPartition=(t,e)=>e.reduce((([t,e],n)=>{const i=e,s=n,o=i[s],u=r(i,["symbol"==typeof s?s:s+""]);return void 0!==o?[Object.assign(Object.assign({},t),{[n]:o}),u]:[t,e]}),[{},t])},"../utils/lib/parseElectrumUrl.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseElectrumUrl=void 0;const r=/^(?:([a-zA-Z0-9.-]+)|\[([a-f0-9:]+)\]):([0-9]{1,5}):([ts])$/;e.parseElectrumUrl=t=>{var e;const n=t.match(r);if(n)return{host:null!==(e=n[1])&&void 0!==e?e:n[2],port:Number.parseInt(n[3],10),protocol:n[4]}}},"../utils/lib/parseHostname.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseHostname=void 0;const r=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i;e.parseHostname=t=>{var e,n;return null===(n=null===(e=t.match(r))||void 0===e?void 0:e[2])||void 0===n?void 0:n.toLowerCase()}},"../utils/lib/promiseAllSequence.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function u(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,u)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.promiseAllSequence=void 0;e.promiseAllSequence=t=>i(void 0,void 0,void 0,(function*(){const e=[];for(let r=0;r<t.length;++r){const n=yield t[r]();e.push(n)}return e}))},"../utils/lib/redactUserPath.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.redactUserPathFromString=e.startOfUserPathRegex=void 0,e.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;e.redactUserPathFromString=t=>t.replace(e.startOfUserPathRegex,"$1[*]")},"../utils/lib/scheduleAction.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,s){function o(t){try{c(i.next(t))}catch(t){s(t)}}function u(t){try{c(i.throw(t))}catch(t){s(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(o,u)}c((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAction=void 0;const s=t=>Array.isArray(t),o=()=>new Error("Aborted by signal"),u=()=>new Error("Aborted by deadline"),c=()=>new Error("Aborted by timeout"),a=(t,e)=>new n(((r,n)=>{if(e.aborted)return n();if(void 0===t)return r();const i=setTimeout(r,t),s=()=>{clearTimeout(i),e.removeEventListener("abort",s),n()};e.addEventListener("abort",s)})),l=(t,e,r)=>new n(((n,i)=>{if(r.aborted)return i();const s=void 0!==t?setTimeout((()=>i(e())),t):void 0,o=()=>{clearTimeout(s),r.removeEventListener("abort",o),i()};r.addEventListener("abort",o)})),f=(t,e)=>new n(((r,n)=>{if(e.aborted)return n();if(null==t?void 0:t.aborted)return n(o());const i=()=>n(o());null==t||t.addEventListener("abort",i);const s=()=>{null==t||t.removeEventListener("abort",i),e.removeEventListener("abort",s),n()};e.addEventListener("abort",s)})),h=(t,e)=>i(void 0,void 0,void 0,(function*(){const r=new AbortController,i=()=>r.abort();e.aborted&&i(),e.addEventListener("abort",i);try{return yield new n((e=>e(t(r.signal))))}finally{e.removeEventListener("abort",i)}}));e.scheduleAction=(t,e)=>i(void 0,void 0,void 0,(function*(){const{signal:r,delay:o,attempts:d,timeout:p,deadline:g,gap:y}=e,b=g&&g-Date.now(),m=s(d)?d.length:null!=d?d:g?1/0:1,v=new AbortController,_=v.signal,w=s(d)?t=>d[t]:()=>({timeout:p,gap:y});try{return yield n.race([f(r,_),l(b,u,_),a(o,_).then((()=>((t,e,r,s)=>i(void 0,void 0,void 0,(function*(){for(let n=0;n<t-1&&!s.aborted;n++){const t=new AbortController,i=()=>t.abort();s.addEventListener("abort",i);try{return yield e(n,t.signal)}catch(t){i(),yield r(n)}finally{s.removeEventListener("abort",i)}}return s.aborted?n.reject():e(t-1,s)})))(m,((e,r)=>n.race([l(w(e).timeout,c,_),h(t,r)])),(t=>{var e;return a(null!==(e=w(t).gap)&&void 0!==e?e:0,_)}),_)))])}finally{v.abort()}}))},"../utils/lib/throwError.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;e.throwError=t=>{throw new Error(t)}},"../utils/lib/topologicalSort.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.topologicalSort=void 0;const n=r("../utils/lib/arrayPartition.js");e.topologicalSort=(t,e,r)=>{const i=[],s=t=>(0,n.arrayPartition)(t,(r=>!t.some((t=>e(t,r)))));let o=t;for(;o.length;){const[t,e]=s(o);if(!t.length)throw new Error("Cycle detected");i.push(...r?t.sort(r):t),o=e}return i}},"../utils/lib/truncateMiddle.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.truncateMiddle=void 0;e.truncateMiddle=(t,e,r)=>{if(t.length<=e+r)return t;return`${t.substring(0,e)}…${t.substring(t.length-r,t.length)}`}},"../utils/lib/typedEventEmitter.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEmitter=void 0;const n=r("../../node_modules/events/events.js");class i extends n.EventEmitter{listenerCount(t){return super.listenerCount(t)}}e.TypedEmitter=i},"../utils/lib/urlToOnion.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.urlToOnion=void 0;e.urlToOnion=(t,e)=>{var r;const[,n,i,s,o]=null!==(r=t.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))&&void 0!==r?r:[];if(s&&e[s])return`${n}://${null!=i?i:""}${e[s]}${null!=o?o:""}`}},"../utils/lib/versionUtils.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeVersion=e.isNewerOrEqual=e.isEqual=e.isNewer=e.isVersionArray=void 0;e.isVersionArray=t=>{if(!Array.isArray(t))return!1;if(3!==t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r<0)return!1}return!0};const r=t=>({major:t[0],minor:t[1],patch:t[2]}),n=t=>{const r=t.split(".").map((t=>Number(t)));if(!(0,e.isVersionArray)(r))throw new Error("version string is in wrong format");return r},i=t=>`${t[0]}.${t[1]}.${t[2]}`;e.isNewer=(t,e)=>{const i=r("string"==typeof t?n(t):t),s=r("string"==typeof e?n(e):e);return i.major-s.major!=0?i.major>s.major:i.minor-s.minor!=0?i.minor>s.minor:i.patch-s.patch!=0&&i.patch>s.patch};e.isEqual=(t,e)=>("string"==typeof t?t:i(t))===("string"==typeof e?e:i(e));e.isNewerOrEqual=(t,r)=>(0,e.isNewer)(t,r)||(0,e.isEqual)(t,r);e.normalizeVersion=t=>t.replace(/\b0+(\d)/g,"$1")},"../utils/lib/xssFilters.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inDoubleQuotes=e.inSingleQuotes=e.inHTML=void 0;const r=/</g,n=/'/g,i=/"/g;e.inHTML=t=>t.replace(r,"&lt;");e.inSingleQuotes=t=>t.replace(n,"&#39;");e.inDoubleQuotes=t=>t.replace(i,"&quot;")},"../../node_modules/base64-js/index.js":(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,s=u(t),o=s[0],c=s[1],a=new i(function(t,e,r){return 3*(e+r)/4-r}(0,o,c)),l=0,f=c>0?o-4:o;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],a[l++]=e>>16&255,a[l++]=e>>8&255,a[l++]=255&e;2===c&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,a[l++]=255&e);1===c&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,a[l++]=e>>8&255,a[l++]=255&e);return a},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,s=[],o=16383,u=0,a=n-i;u<a;u+=o)s.push(c(t,u,u+o>a?a:u+o));1===i?(e=t[n-1],s.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],s.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function c(t,e,n){for(var i,s,o=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},"../../node_modules/bignumber.js/bignumber.js":function(t,e,r){var n;!function(i){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,u=Math.ceil,c=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,y=1e9;function b(t){var e=0|t;return t>0||t===e?e:e-1}function m(t){for(var e,r,n=1,i=t.length,s=t[0]+"";n<i;){for(e=t[n++]+"",r=h-e.length;r--;e="0"+e);s+=e}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function v(t,e){var r,n,i=t.c,s=e.c,o=t.s,u=e.s,c=t.e,a=e.e;if(!o||!u)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-u:o;if(o!=u)return o;if(r=o<0,n=c==a,!i||!s)return n?0:!i^r?1:-1;if(!n)return c>a^r?1:-1;for(u=(c=i.length)<(a=s.length)?c:a,o=0;o<u;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return c==a?0:c>a^r?1:-1}function _(t,e,r,n){if(t<e||t>r||t!==c(t))throw Error(a+(n||"Argument")+("number"==typeof t?t<e||t>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function w(t){var e=t.c.length-1;return b(t.e/h)==e&&t.c[e]%2!=0}function E(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function A(t,e,r){var n,i;if(e<0){for(i=r+".";++e;i+=r);t=i+t}else if(++e>(n=t.length)){for(i=r,e-=n;--e;i+=r);t+=i}else e<n&&(t=t.slice(0,e)+"."+t.slice(e));return t}s=function t(e){var r,n,i,s,O,T,S,j,N,I,C=V.prototype={constructor:V,toString:null,valueOf:null},k=new V(1),B=20,R=4,U=-7,P=21,x=-1e7,L=1e7,M=!1,D=1,F=0,G={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function V(t,e){var r,s,u,a,f,p,g,y,b=this;if(!(b instanceof V))return new V(t,e);if(null==e){if(t&&!0===t._isBigNumber)return b.s=t.s,void(!t.c||t.e>L?b.c=b.e=null:t.e<x?b.c=[b.e=0]:(b.e=t.e,b.c=t.c.slice()));if((p="number"==typeof t)&&0*t==0){if(b.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,f=t;f>=10;f/=10,a++);return void(a>L?b.c=b.e=null:(b.e=a,b.c=[t]))}y=String(t)}else{if(!o.test(y=String(t)))return i(b,y,p);b.s=45==y.charCodeAt(0)?(y=y.slice(1),-1):1}(a=y.indexOf("."))>-1&&(y=y.replace(".","")),(f=y.search(/e/i))>0?(a<0&&(a=f),a+=+y.slice(f+1),y=y.substring(0,f)):a<0&&(a=y.length)}else{if(_(e,2,H.length,"Base"),10==e&&$)return q(b=new V(t),B+b.e+1,R);if(y=String(t),p="number"==typeof t){if(0*t!=0)return i(b,y,p,e);if(b.s=1/t<0?(y=y.slice(1),-1):1,V.DEBUG&&y.replace(/^0\.0*|\./,"").length>15)throw Error(l+t)}else b.s=45===y.charCodeAt(0)?(y=y.slice(1),-1):1;for(r=H.slice(0,e),a=f=0,g=y.length;f<g;f++)if(r.indexOf(s=y.charAt(f))<0){if("."==s){if(f>a){a=g;continue}}else if(!u&&(y==y.toUpperCase()&&(y=y.toLowerCase())||y==y.toLowerCase()&&(y=y.toUpperCase()))){u=!0,f=-1,a=0;continue}return i(b,String(t),p,e)}p=!1,(a=(y=n(y,e,10,b.s)).indexOf("."))>-1?y=y.replace(".",""):a=y.length}for(f=0;48===y.charCodeAt(f);f++);for(g=y.length;48===y.charCodeAt(--g););if(y=y.slice(f,++g)){if(g-=f,p&&V.DEBUG&&g>15&&(t>d||t!==c(t)))throw Error(l+b.s*t);if((a=a-f-1)>L)b.c=b.e=null;else if(a<x)b.c=[b.e=0];else{if(b.e=a,b.c=[],f=(a+1)%h,a<0&&(f+=h),f<g){for(f&&b.c.push(+y.slice(0,f)),g-=h;f<g;)b.c.push(+y.slice(f,f+=h));f=h-(y=y.slice(f)).length}else f-=g;for(;f--;y+="0");b.c.push(+y)}}else b.c=[b.e=0]}function W(t,e,r,n){var i,s,o,u,c;if(null==r?r=R:_(r,0,8),!t.c)return t.toString();if(i=t.c[0],o=t.e,null==e)c=m(t.c),c=1==n||2==n&&(o<=U||o>=P)?E(c,o):A(c,o,"0");else if(s=(t=q(new V(t),e,r)).e,u=(c=m(t.c)).length,1==n||2==n&&(e<=s||s<=U)){for(;u<e;c+="0",u++);c=E(c,s)}else if(e-=o,c=A(c,s,"0"),s+1>u){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=s-u)>0)for(s+1==u&&(c+=".");e--;c+="0");return t.s<0&&i?"-"+c:c}function z(t,e){for(var r,n=1,i=new V(t[0]);n<t.length;n++){if(!(r=new V(t[n])).s){i=r;break}e.call(i,r)&&(i=r)}return i}function K(t,e,r){for(var n=1,i=e.length;!e[--i];e.pop());for(i=e[0];i>=10;i/=10,n++);return(r=n+r*h-1)>L?t.c=t.e=null:r<x?t.c=[t.e=0]:(t.e=r,t.c=e),t}function q(t,e,r,n){var i,s,o,a,l,d,g,y=t.c,b=p;if(y){t:{for(i=1,a=y[0];a>=10;a/=10,i++);if((s=e-i)<0)s+=h,o=e,g=(l=y[d=0])/b[i-o-1]%10|0;else if((d=u((s+1)/h))>=y.length){if(!n)break t;for(;y.length<=d;y.push(0));l=g=0,i=1,o=(s%=h)-h+1}else{for(l=a=y[d],i=1;a>=10;a/=10,i++);g=(o=(s%=h)-h+i)<0?0:l/b[i-o-1]%10|0}if(n=n||e<0||null!=y[d+1]||(o<0?l:l%b[i-o-1]),n=r<4?(g||n)&&(0==r||r==(t.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(s>0?o>0?l/b[i-o]:0:y[d-1])%10&1||r==(t.s<0?8:7)),e<1||!y[0])return y.length=0,n?(e-=t.e+1,y[0]=b[(h-e%h)%h],t.e=-e||0):y[0]=t.e=0,t;if(0==s?(y.length=d,a=1,d--):(y.length=d+1,a=b[h-s],y[d]=o>0?c(l/b[i-o]%b[o])*a:0),n)for(;;){if(0==d){for(s=1,o=y[0];o>=10;o/=10,s++);for(o=y[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(t.e++,y[0]==f&&(y[0]=1));break}if(y[d]+=a,y[d]!=f)break;y[d--]=0,a=1}for(s=y.length;0===y[--s];y.pop());}t.e>L?t.c=t.e=null:t.e<x&&(t.c=[t.e=0])}return t}function Y(t){var e,r=t.e;return null===r?t.toString():(e=m(t.c),e=r<=U||r>=P?E(e,r):A(e,r,"0"),t.s<0?"-"+e:e)}return V.clone=t,V.ROUND_UP=0,V.ROUND_DOWN=1,V.ROUND_CEIL=2,V.ROUND_FLOOR=3,V.ROUND_HALF_UP=4,V.ROUND_HALF_DOWN=5,V.ROUND_HALF_EVEN=6,V.ROUND_HALF_CEIL=7,V.ROUND_HALF_FLOOR=8,V.EUCLID=9,V.config=V.set=function(t){var e,r;if(null!=t){if("object"!=typeof t)throw Error(a+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(_(r=t[e],0,y,e),B=r),t.hasOwnProperty(e="ROUNDING_MODE")&&(_(r=t[e],0,8,e),R=r),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((r=t[e])&&r.pop?(_(r[0],-y,0,e),_(r[1],0,y,e),U=r[0],P=r[1]):(_(r,-y,y,e),U=-(P=r<0?-r:r))),t.hasOwnProperty(e="RANGE"))if((r=t[e])&&r.pop)_(r[0],-y,-1,e),_(r[1],1,y,e),x=r[0],L=r[1];else{if(_(r,-y,y,e),!r)throw Error(a+e+" cannot be zero: "+r);x=-(L=r<0?-r:r)}if(t.hasOwnProperty(e="CRYPTO")){if((r=t[e])!==!!r)throw Error(a+e+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw M=!r,Error(a+"crypto unavailable");M=r}else M=r}if(t.hasOwnProperty(e="MODULO_MODE")&&(_(r=t[e],0,9,e),D=r),t.hasOwnProperty(e="POW_PRECISION")&&(_(r=t[e],0,y,e),F=r),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(r=t[e]))throw Error(a+e+" not an object: "+r);G=r}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(r=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+e+" invalid: "+r);$="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:B,ROUNDING_MODE:R,EXPONENTIAL_AT:[U,P],RANGE:[x,L],CRYPTO:M,MODULO_MODE:D,POW_PRECISION:F,FORMAT:G,ALPHABET:H}},V.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!V.DEBUG)return!0;var e,r,n=t.c,i=t.e,s=t.s;t:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-y&&i<=y&&i===c(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break t}if((e=(i+1)%h)<1&&(e+=h),String(n[0]).length==e){for(e=0;e<n.length;e++)if((r=n[e])<0||r>=f||r!==c(r))break t;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+t)},V.maximum=V.max=function(){return z(arguments,C.lt)},V.minimum=V.min=function(){return z(arguments,C.gt)},V.random=(s=9007199254740992,O=Math.random()*s&2097151?function(){return c(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,r,n,i,s,o=0,l=[],f=new V(k);if(null==t?t=B:_(t,0,y),i=u(t/h),M)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(i*=2));o<i;)(s=131072*e[o]+(e[o+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),e[o]=r[0],e[o+1]=r[1]):(l.push(s%1e14),o+=2);o=i/2}else{if(!crypto.randomBytes)throw M=!1,Error(a+"crypto unavailable");for(e=crypto.randomBytes(i*=7);o<i;)(s=281474976710656*(31&e[o])+1099511627776*e[o+1]+4294967296*e[o+2]+16777216*e[o+3]+(e[o+4]<<16)+(e[o+5]<<8)+e[o+6])>=9e15?crypto.randomBytes(7).copy(e,o):(l.push(s%1e14),o+=7);o=i/7}if(!M)for(;o<i;)(s=O())<9e15&&(l[o++]=s%1e14);for(i=l[--o],t%=h,i&&t&&(s=p[h-t],l[o]=c(i/s)*s);0===l[o];l.pop(),o--);if(o<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=h);for(o=1,s=l[0];s>=10;s/=10,o++);o<h&&(n-=h-o)}return f.e=n,f.c=l,f}),V.sum=function(){for(var t=1,e=arguments,r=new V(e[0]);t<e.length;)r=r.plus(e[t++]);return r},n=function(){var t="0123456789";function e(t,e,r,n){for(var i,s,o=[0],u=0,c=t.length;u<c;){for(s=o.length;s--;o[s]*=e);for(o[0]+=n.indexOf(t.charAt(u++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,u){var c,a,l,f,h,d,p,g,y=n.indexOf("."),b=B,v=R;for(y>=0&&(f=F,F=0,n=n.replace(".",""),d=(g=new V(i)).pow(n.length-y),F=f,g.c=e(A(m(d.c),d.e,"0"),10,s,t),g.e=g.c.length),l=f=(p=e(n,i,s,u?(c=H,t):(c=t,H))).length;0==p[--f];p.pop());if(!p[0])return c.charAt(0);if(y<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,g,b,v,s)).c,h=d.r,l=d.e),y=p[a=l+b+1],f=s/2,h=h||a<0||null!=p[a+1],h=v<4?(null!=y||h)&&(0==v||v==(d.s<0?3:2)):y>f||y==f&&(4==v||h||6==v&&1&p[a-1]||v==(d.s<0?8:7)),a<1||!p[0])n=h?A(c.charAt(1),-b,c.charAt(0)):c.charAt(0);else{if(p.length=a,h)for(--s;++p[--a]>s;)p[a]=0,a||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(y=0,n="";y<=f;n+=c.charAt(p[y++]));n=A(n,l,c.charAt(0))}return n}}(),r=function(){function t(t,e,r){var n,i,s,o,u=0,c=t.length,a=e%g,l=e/g|0;for(t=t.slice();c--;)u=((i=a*(s=t[c]%g)+(n=l*s+(o=t[c]/g|0)*a)%g*g+u)/r|0)+(n/g|0)+l*o,t[c]=i%r;return u&&(t=[u].concat(t)),t}function e(t,e,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(t[i]!=e[i]){s=t[i]>e[i]?1:-1;break}return s}function r(t,e,r,n){for(var i=0;r--;)t[r]-=i,i=t[r]<e[r]?1:0,t[r]=i*n+t[r]-e[r];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(n,i,s,o,u){var a,l,d,p,g,y,m,v,_,w,E,A,O,T,S,j,N,I=n.s==i.s?1:-1,C=n.c,k=i.c;if(!(C&&C[0]&&k&&k[0]))return new V(n.s&&i.s&&(C?!k||C[0]!=k[0]:k)?C&&0==C[0]||!k?0*I:I/0:NaN);for(_=(v=new V(I)).c=[],I=s+(l=n.e-i.e)+1,u||(u=f,l=b(n.e/h)-b(i.e/h),I=I/h|0),d=0;k[d]==(C[d]||0);d++);if(k[d]>(C[d]||0)&&l--,I<0)_.push(1),p=!0;else{for(T=C.length,j=k.length,d=0,I+=2,(g=c(u/(k[0]+1)))>1&&(k=t(k,g,u),C=t(C,g,u),j=k.length,T=C.length),O=j,E=(w=C.slice(0,j)).length;E<j;w[E++]=0);N=k.slice(),N=[0].concat(N),S=k[0],k[1]>=u/2&&S++;do{if(g=0,(a=e(k,w,j,E))<0){if(A=w[0],j!=E&&(A=A*u+(w[1]||0)),(g=c(A/S))>1)for(g>=u&&(g=u-1),m=(y=t(k,g,u)).length,E=w.length;1==e(y,w,m,E);)g--,r(y,j<m?N:k,m,u),m=y.length,a=1;else 0==g&&(a=g=1),m=(y=k.slice()).length;if(m<E&&(y=[0].concat(y)),r(w,y,E,u),E=w.length,-1==a)for(;e(k,w,j,E)<1;)g++,r(w,j<E?N:k,E,u),E=w.length}else 0===a&&(g++,w=[0]);_[d++]=g,w[0]?w[E++]=C[O]||0:(w=[C[O]],E=1)}while((O++<T||null!=w[0])&&I--);p=null!=w[0],_[0]||_.splice(0,1)}if(u==f){for(d=1,I=_[0];I>=10;I/=10,d++);q(v,s+(v.e=d+l*h-1)+1,o,p)}else v.e=l,v.r=+p;return v}}(),T=/^(-?)0([xbo])(?=\w[\w.]*$)/i,S=/^([^.]+)\.$/,j=/^\.([^.]+)$/,N=/^-?(Infinity|NaN)$/,I=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(t,e,r,n){var i,s=r?e:e.replace(I,"");if(N.test(s))t.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(T,(function(t,e,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?t:e})),n&&(i=n,s=s.replace(S,"$1").replace(j,"0.$1")),e!=s))return new V(s,i);if(V.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+e);t.s=null}t.c=t.e=null},C.absoluteValue=C.abs=function(){var t=new V(this);return t.s<0&&(t.s=1),t},C.comparedTo=function(t,e){return v(this,new V(t,e))},C.decimalPlaces=C.dp=function(t,e){var r,n,i,s=this;if(null!=t)return _(t,0,y),null==e?e=R:_(e,0,8),q(new V(s),t+s.e+1,e);if(!(r=s.c))return null;if(n=((i=r.length-1)-b(this.e/h))*h,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},C.dividedBy=C.div=function(t,e){return r(this,new V(t,e),B,R)},C.dividedToIntegerBy=C.idiv=function(t,e){return r(this,new V(t,e),0,1)},C.exponentiatedBy=C.pow=function(t,e){var r,n,i,s,o,l,f,d,p=this;if((t=new V(t)).c&&!t.isInteger())throw Error(a+"Exponent not an integer: "+Y(t));if(null!=e&&(e=new V(e)),o=t.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!t.c||!t.c[0])return d=new V(Math.pow(+Y(p),o?t.s*(2-w(t)):+Y(t))),e?d.mod(e):d;if(l=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new V(NaN);(n=!l&&p.isInteger()&&e.isInteger())&&(p=p.mod(e))}else{if(t.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&w(t)?-0:0,p.e>-1&&(s=1/s),new V(l?1/s:s);F&&(s=u(F/h+2))}for(o?(r=new V(.5),l&&(t.s=1),f=w(t)):f=(i=Math.abs(+Y(t)))%2,d=new V(k);;){if(f){if(!(d=d.times(p)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(e))}if(i){if(0===(i=c(i/2)))break;f=i%2}else if(q(t=t.times(r),t.e+1,1),t.e>14)f=w(t);else{if(0===(i=+Y(t)))break;f=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):n&&(p=p.mod(e))}return n?d:(l&&(d=k.div(d)),e?d.mod(e):s?q(d,F,R,undefined):d)},C.integerValue=function(t){var e=new V(this);return null==t?t=R:_(t,0,8),q(e,e.e+1,t)},C.isEqualTo=C.eq=function(t,e){return 0===v(this,new V(t,e))},C.isFinite=function(){return!!this.c},C.isGreaterThan=C.gt=function(t,e){return v(this,new V(t,e))>0},C.isGreaterThanOrEqualTo=C.gte=function(t,e){return 1===(e=v(this,new V(t,e)))||0===e},C.isInteger=function(){return!!this.c&&b(this.e/h)>this.c.length-2},C.isLessThan=C.lt=function(t,e){return v(this,new V(t,e))<0},C.isLessThanOrEqualTo=C.lte=function(t,e){return-1===(e=v(this,new V(t,e)))||0===e},C.isNaN=function(){return!this.s},C.isNegative=function(){return this.s<0},C.isPositive=function(){return this.s>0},C.isZero=function(){return!!this.c&&0==this.c[0]},C.minus=function(t,e){var r,n,i,s,o=this,u=o.s;if(e=(t=new V(t,e)).s,!u||!e)return new V(NaN);if(u!=e)return t.s=-e,o.plus(t);var c=o.e/h,a=t.e/h,l=o.c,d=t.c;if(!c||!a){if(!l||!d)return l?(t.s=-e,t):new V(d?o:NaN);if(!l[0]||!d[0])return d[0]?(t.s=-e,t):new V(l[0]?o:3==R?-0:0)}if(c=b(c),a=b(a),l=l.slice(),u=c-a){for((s=u<0)?(u=-u,i=l):(a=c,i=d),i.reverse(),e=u;e--;i.push(0));i.reverse()}else for(n=(s=(u=l.length)<(e=d.length))?u:e,u=e=0;e<n;e++)if(l[e]!=d[e]){s=l[e]<d[e];break}if(s&&(i=l,l=d,d=i,t.s=-t.s),(e=(n=d.length)-(r=l.length))>0)for(;e--;l[r++]=0);for(e=f-1;n>u;){if(l[--n]<d[n]){for(r=n;r&&!l[--r];l[r]=e);--l[r],l[n]+=f}l[n]-=d[n]}for(;0==l[0];l.splice(0,1),--a);return l[0]?K(t,l,a):(t.s=3==R?-1:1,t.c=[t.e=0],t)},C.modulo=C.mod=function(t,e){var n,i,s=this;return t=new V(t,e),!s.c||!t.s||t.c&&!t.c[0]?new V(NaN):!t.c||s.c&&!s.c[0]?new V(s):(9==D?(i=t.s,t.s=1,n=r(s,t,0,3),t.s=i,n.s*=i):n=r(s,t,0,D),(t=s.minus(n.times(t))).c[0]||1!=D||(t.s=s.s),t)},C.multipliedBy=C.times=function(t,e){var r,n,i,s,o,u,c,a,l,d,p,y,m,v,_,w=this,E=w.c,A=(t=new V(t,e)).c;if(!(E&&A&&E[0]&&A[0]))return!w.s||!t.s||E&&!E[0]&&!A||A&&!A[0]&&!E?t.c=t.e=t.s=null:(t.s*=w.s,E&&A?(t.c=[0],t.e=0):t.c=t.e=null),t;for(n=b(w.e/h)+b(t.e/h),t.s*=w.s,(c=E.length)<(d=A.length)&&(m=E,E=A,A=m,i=c,c=d,d=i),i=c+d,m=[];i--;m.push(0));for(v=f,_=g,i=d;--i>=0;){for(r=0,p=A[i]%_,y=A[i]/_|0,s=i+(o=c);s>i;)r=((a=p*(a=E[--o]%_)+(u=y*a+(l=E[o]/_|0)*p)%_*_+m[s]+r)/v|0)+(u/_|0)+y*l,m[s--]=a%v;m[s]=r}return r?++n:m.splice(0,1),K(t,m,n)},C.negated=function(){var t=new V(this);return t.s=-t.s||null,t},C.plus=function(t,e){var r,n=this,i=n.s;if(e=(t=new V(t,e)).s,!i||!e)return new V(NaN);if(i!=e)return t.s=-e,n.minus(t);var s=n.e/h,o=t.e/h,u=n.c,c=t.c;if(!s||!o){if(!u||!c)return new V(i/0);if(!u[0]||!c[0])return c[0]?t:new V(u[0]?n:0*i)}if(s=b(s),o=b(o),u=u.slice(),i=s-o){for(i>0?(o=s,r=c):(i=-i,r=u),r.reverse();i--;r.push(0));r.reverse()}for((i=u.length)-(e=c.length)<0&&(r=c,c=u,u=r,e=i),i=0;e;)i=(u[--e]=u[e]+c[e]+i)/f|0,u[e]=f===u[e]?0:u[e]%f;return i&&(u=[i].concat(u),++o),K(t,u,o)},C.precision=C.sd=function(t,e){var r,n,i,s=this;if(null!=t&&t!==!!t)return _(t,1,y),null==e?e=R:_(e,0,8),q(new V(s),t,e);if(!(r=s.c))return null;if(n=(i=r.length-1)*h+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return t&&s.e+1>n&&(n=s.e+1),n},C.shiftedBy=function(t){return _(t,-9007199254740991,d),this.times("1e"+t)},C.squareRoot=C.sqrt=function(){var t,e,n,i,s,o=this,u=o.c,c=o.s,a=o.e,l=B+4,f=new V("0.5");if(1!==c||!u||!u[0])return new V(!c||c<0&&(!u||u[0])?NaN:u?o:1/0);if(0==(c=Math.sqrt(+Y(o)))||c==1/0?(((e=m(u)).length+a)%2==0&&(e+="0"),c=Math.sqrt(+e),a=b((a+1)/2)-(a<0||a%2),n=new V(e=c==1/0?"5e"+a:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+a)):n=new V(c+""),n.c[0])for((c=(a=n.e)+l)<3&&(c=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),m(s.c).slice(0,c)===(e=m(n.c)).slice(0,c)){if(n.e<a&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(i||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(q(n,n.e+B+2,1),t=!n.times(n).eq(o));break}if(!i&&(q(s,s.e+B+2,0),s.times(s).eq(o))){n=s;break}l+=4,c+=4,i=1}return q(n,n.e+B+1,R,t)},C.toExponential=function(t,e){return null!=t&&(_(t,0,y),t++),W(this,t,e,1)},C.toFixed=function(t,e){return null!=t&&(_(t,0,y),t=t+this.e+1),W(this,t,e)},C.toFormat=function(t,e,r){var n,i=this;if(null==r)null!=t&&e&&"object"==typeof e?(r=e,e=null):t&&"object"==typeof t?(r=t,t=e=null):r=G;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(t,e),i.c){var s,o=n.split("."),u=+r.groupSize,c=+r.secondaryGroupSize,l=r.groupSeparator||"",f=o[0],h=o[1],d=i.s<0,p=d?f.slice(1):f,g=p.length;if(c&&(s=u,u=c,c=s,g-=s),u>0&&g>0){for(s=g%u||u,f=p.substr(0,s);s<g;s+=u)f+=l+p.substr(s,u);c>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((c=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},C.toFraction=function(t){var e,n,i,s,o,u,c,l,f,d,g,y,b=this,v=b.c;if(null!=t&&(!(c=new V(t)).isInteger()&&(c.c||1!==c.s)||c.lt(k)))throw Error(a+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+Y(c));if(!v)return new V(b);for(e=new V(k),f=n=new V(k),i=l=new V(k),y=m(v),o=e.e=y.length-b.e-1,e.c[0]=p[(u=o%h)<0?h+u:u],t=!t||c.comparedTo(e)>0?o>0?e:f:c,u=L,L=1/0,c=new V(y),l.c[0]=0;d=r(c,e,0,1),1!=(s=n.plus(d.times(i))).comparedTo(t);)n=i,i=s,f=l.plus(d.times(s=f)),l=s,e=c.minus(d.times(s=e)),c=s;return s=r(t.minus(n),i,0,1),l=l.plus(s.times(f)),n=n.plus(s.times(i)),l.s=f.s=b.s,g=r(f,i,o*=2,R).minus(b).abs().comparedTo(r(l,n,o,R).minus(b).abs())<1?[f,i]:[l,n],L=u,g},C.toNumber=function(){return+Y(this)},C.toPrecision=function(t,e){return null!=t&&_(t,1,y),W(this,t,e,2)},C.toString=function(t){var e,r=this,i=r.s,s=r.e;return null===s?i?(e="Infinity",i<0&&(e="-"+e)):e="NaN":(null==t?e=s<=U||s>=P?E(m(r.c),s):A(m(r.c),s,"0"):10===t&&$?e=A(m((r=q(new V(r),B+s+1,R)).c),r.e,"0"):(_(t,2,H.length,"Base"),e=n(A(m(r.c),s,"0"),10,t,i,!0)),i<0&&r.c[0]&&(e="-"+e)),e},C.valueOf=C.toJSON=function(){return Y(this)},C._isBigNumber=!0,null!=e&&V.set(e),V}(),s.default=s.BigNumber=s,void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()},"../../node_modules/buffer/index.js":(t,e,r)=>{"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
const n=r("../../node_modules/base64-js/index.js"),i=r("../../node_modules/ieee754/index.js"),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=Buffer,e.h2=50;const o=2147483647;function u(t){if(t>o)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,Buffer.prototype),e}function Buffer(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return c(t,e,r)}function c(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!Buffer.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|p(t,e);let n=u(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(q(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(q(t,ArrayBuffer)||t&&q(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(q(t,SharedArrayBuffer)||t&&q(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return Buffer.from(n,e,r);const i=function(t){if(Buffer.isBuffer(t)){const e=0|d(t.length),r=u(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?u(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Buffer.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return a(t),u(t<0?0:0|d(t))}function f(t){const e=t.length<0?0:0|d(t.length),r=u(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,Buffer.prototype),n}function d(t){if(t>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|t}function p(t,e){if(Buffer.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||q(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return z(t).length;default:if(i)return n?-1:W(t).length;e=(""+e).toLowerCase(),i=!0}}function g(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,r);case"utf8":case"utf-8":return T(this,e,r);case"ascii":return j(this,e,r);case"latin1":case"binary":return N(this,e,r);case"base64":return O(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return C(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function y(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function b(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:m(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):m(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(t,e,r,n,i){let s,o=1,u=t.length,c=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,u/=2,c/=2,r/=2}function a(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(i){let n=-1;for(s=r;s<u;s++)if(a(t,s)===a(e,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===c)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+c>u&&(r=u-c),s=r;s>=0;s--){let r=!0;for(let n=0;n<c;n++)if(a(t,s+n)!==a(e,n)){r=!1;break}if(r)return s}return-1}function v(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=e.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(e.substr(2*o,2),16);if(Y(n))return o;t[r+o]=n}return o}function _(t,e,r,n){return K(W(e,t.length-r),t,r,n)}function w(t,e,r,n){return K(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return K(z(e),t,r,n)}function A(t,e,r,n){return K(function(t,e){let r,n,i;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)r=t.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(e,t.length-r),t,r,n)}function O(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function T(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(i+o<=r){let r,n,u,c;switch(o){case 1:e<128&&(s=e);break;case 2:r=t[i+1],128==(192&r)&&(c=(31&e)<<6|63&r,c>127&&(s=c));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(c=(15&e)<<12|(63&r)<<6|63&n,c>2047&&(c<55296||c>57343)&&(s=c));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(c=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,c>65535&&c<1114112&&(s=c))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(t){const e=t.length;if(e<=S)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=S));return r}(n)}Buffer.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(t,e,r){return c(t,e,r)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(t,e,r){return function(t,e,r){return a(t),t<=0?u(t):void 0!==e?"string"==typeof r?u(t).fill(e,r):u(t).fill(e):u(t)}(t,e,r)},Buffer.allocUnsafe=function(t){return l(t)},Buffer.allocUnsafeSlow=function(t){return l(t)},Buffer.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==Buffer.prototype},Buffer.compare=function(t,e){if(q(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),q(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=Buffer.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(q(e,Uint8Array))i+e.length>n.length?(Buffer.isBuffer(e)||(e=Buffer.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!Buffer.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},Buffer.byteLength=p,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},Buffer.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},Buffer.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):g.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){let t="";const r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},s&&(Buffer.prototype[s]=Buffer.prototype.inspect),Buffer.prototype.compare=function(t,e,r,n,i){if(q(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(e>>>=0);const u=Math.min(s,o),c=this.slice(n,i),a=t.slice(e,r);for(let t=0;t<u;++t)if(c[t]!==a[t]){s=c[t],o=a[t];break}return s<o?-1:o<s?1:0},Buffer.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Buffer.prototype.indexOf=function(t,e,r){return b(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return b(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return w(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const S=4096;function j(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function N(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function I(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=X[t[n]];return i}function C(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function k(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function B(t,e,r,n,i,s){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<s)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function R(t,e,r,n,i){G(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,r}function U(t,e,r,n,i){G(e,n,i,t,r,7);let s=Number(e&BigInt(4294967295));t[r+7]=s,s>>=8,t[r+6]=s,s>>=8,t[r+5]=s,s>>=8,t[r+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=o,o>>=8,t[r+2]=o,o>>=8,t[r+1]=o,o>>=8,t[r]=o,r+8}function P(t,e,r,n,i,s){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(t,e,r,n,s){return e=+e,r>>>=0,s||P(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function L(t,e,r,n,s){return e=+e,r>>>=0,s||P(t,0,r,8),i.write(t,e,r,n,52,8),r+8}Buffer.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,Buffer.prototype),n},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return n},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),this[t]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(t,e){return t>>>=0,e||k(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readBigUInt64LE=J((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||$(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=J((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||$(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),Buffer.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=this[t],i=1,s=0;for(;++s<e&&(i*=256);)n+=this[t+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||k(t,e,this.length);let n=e,i=1,s=this[t+--n];for(;n>0&&(i*=256);)s+=this[t+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*e)),s},Buffer.prototype.readInt8=function(t,e){return t>>>=0,e||k(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){t>>>=0,e||k(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){t>>>=0,e||k(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return t>>>=0,e||k(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readBigInt64LE=J((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||$(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),Buffer.prototype.readBigInt64BE=J((function(t){H(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||$(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),Buffer.prototype.readFloatLE=function(t,e){return t>>>=0,e||k(t,4,this.length),i.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return t>>>=0,e||k(t,4,this.length),i.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return t>>>=0,e||k(t,8,this.length),i.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return t>>>=0,e||k(t,8,this.length),i.read(this,t,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){B(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[e]=255&t;++s<r&&(i*=256);)this[e+s]=t/i&255;return e+r},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){B(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[e+i]=255&t;--i>=0&&(s*=256);)this[e+i]=t/s&255;return e+r},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,255,0),this[e]=255&t,e+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Buffer.prototype.writeBigUInt64LE=J((function(t,e=0){return R(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=J((function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,t,e,r,n-1,-n)}let i=0,s=1,o=0;for(this[e]=255&t;++i<r&&(s*=256);)t<0&&0===o&&0!==this[e+i-1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);B(this,t,e,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[e+i]=255&t;--i>=0&&(s*=256);)t<0&&0===o&&0!==this[e+i+1]&&(o=1),this[e+i]=(t/s>>0)-o&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||B(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Buffer.prototype.writeBigInt64LE=J((function(t,e=0){return R(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=J((function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return L(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return L(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(!Buffer.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const s=Buffer.isBuffer(t)?t:Buffer.from(t,n),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=s[i%o]}return this};const M={};function D(t,e,r){M[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function G(t,e,r,n,i,s){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=s>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new M.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||$(e,t.length-(r+1))}(n,i,s)}function H(t,e){if("number"!=typeof t)throw new M.ERR_INVALID_ARG_TYPE(e,"number",t)}function $(t,e,r){if(Math.floor(t)!==t)throw H(t,r),new M.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new M.ERR_BUFFER_OUT_OF_BOUNDS;throw new M.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const V=/[^+/0-9A-Za-z-_]/g;function W(t,e){let r;e=e||1/0;const n=t.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=t.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;s.push(r)}else if(r<2048){if((e-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function z(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(V,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function K(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function q(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const X=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?Q:t}function Q(){throw new Error("BigInt not supported")}},"../../node_modules/es6-promise/dist/es6-promise.js":function(t,e,r){var n=r("../../node_modules/process/browser.js");
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */t.exports=function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},s=0,o=void 0,u=void 0,c=function(t,e){w[s]=t,w[s+1]=e,2===(s+=2)&&(u?u(E):O())};function a(t){u=t}function l(t){c=t}var f="undefined"!=typeof window?window:void 0,h=f||{},d=h.MutationObserver||h.WebKitMutationObserver,p="undefined"==typeof self&&"[object process]"==={}.toString.call(n),g="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function y(){return function(){return n.nextTick(E)}}function b(){return void 0!==o?function(){o(E)}:_()}function m(){var t=0,e=new d(E),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function v(){var t=new MessageChannel;return t.port1.onmessage=E,function(){return t.port2.postMessage(0)}}function _(){var t=setTimeout;return function(){return t(E,1)}}var w=new Array(1e3);function E(){for(var t=0;t<s;t+=2)(0,w[t])(w[t+1]),w[t]=void 0,w[t+1]=void 0;s=0}function A(){try{var t=Function("return this")().require("vertx");return o=t.runOnLoop||t.runOnContext,b()}catch(t){return _()}}var O=void 0;function T(t,e){var r=this,n=new this.constructor(N);void 0===n[j]&&q(n);var i=r._state;if(i){var s=arguments[i-1];c((function(){return V(i,n,s,r._result)}))}else H(r,n,t,e);return n}function S(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(N);return M(r,t),r}O=p?y():d?m():g?v():void 0===f?A():_();var j=Math.random().toString(36).substring(2);function N(){}var I=void 0,C=1,k=2;function B(){return new TypeError("You cannot resolve a promise with itself")}function R(){return new TypeError("A promises callback cannot return that same promise.")}function U(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function P(t,e,r){c((function(t){var n=!1,i=U(r,e,(function(r){n||(n=!0,e!==r?M(t,r):F(t,r))}),(function(e){n||(n=!0,G(t,e))}),"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,G(t,i))}),t)}function x(t,e){e._state===C?F(t,e._result):e._state===k?G(t,e._result):H(e,void 0,(function(e){return M(t,e)}),(function(e){return G(t,e)}))}function L(t,r,n){r.constructor===t.constructor&&n===T&&r.constructor.resolve===S?x(t,r):void 0===n?F(t,r):e(n)?P(t,r,n):F(t,r)}function M(e,r){if(e===r)G(e,B());else if(t(r)){var n=void 0;try{n=r.then}catch(t){return void G(e,t)}L(e,r,n)}else F(e,r)}function D(t){t._onerror&&t._onerror(t._result),$(t)}function F(t,e){t._state===I&&(t._result=e,t._state=C,0!==t._subscribers.length&&c($,t))}function G(t,e){t._state===I&&(t._state=k,t._result=e,c(D,t))}function H(t,e,r,n){var i=t._subscribers,s=i.length;t._onerror=null,i[s]=e,i[s+C]=r,i[s+k]=n,0===s&&t._state&&c($,t)}function $(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,s=t._result,o=0;o<e.length;o+=3)n=e[o],i=e[o+r],n?V(r,n,i,s):i(s);t._subscribers.length=0}}function V(t,r,n,i){var s=e(n),o=void 0,u=void 0,c=!0;if(s){try{o=n(i)}catch(t){c=!1,u=t}if(r===o)return void G(r,R())}else o=i;r._state!==I||(s&&c?M(r,o):!1===c?G(r,u):t===C?F(r,o):t===k&&G(r,o))}function W(t,e){try{e((function(e){M(t,e)}),(function(e){G(t,e)}))}catch(e){G(t,e)}}var z=0;function K(){return z++}function q(t){t[j]=z++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var X=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(N),this.promise[j]||q(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&F(this.promise,this._result))):G(this.promise,Y())}return t.prototype._enumerate=function(t){for(var e=0;this._state===I&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===S){var i=void 0,s=void 0,o=!1;try{i=t.then}catch(t){o=!0,s=t}if(i===T&&t._state!==I)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===rt){var u=new r(N);o?G(u,s):L(u,t,i),this._willSettleAt(u,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===I&&(this._remaining--,t===k?G(n,r):this._result[e]=r),0===this._remaining&&F(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;H(t,void 0,(function(t){return r._settledAt(C,e,t)}),(function(t){return r._settledAt(k,e,t)}))},t}();function J(t){return new X(this,t).promise}function Q(t){var e=this;return i(t)?new e((function(r,n){for(var i=t.length,s=0;s<i;s++)e.resolve(t[s]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Z(t){var e=new this(N);return G(e,t),e}function tt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function et(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var rt=function(){function t(e){this[j]=K(),this._result=this._state=void 0,this._subscribers=[],N!==e&&("function"!=typeof e&&tt(),this instanceof t?W(this,e):et())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();function nt(){var t=void 0;if(void 0!==r.g)t=r.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=rt}return rt.prototype.then=T,rt.all=J,rt.race=Q,rt.resolve=S,rt.reject=Z,rt._setScheduler=a,rt._setAsap=l,rt._asap=c,rt.polyfill=nt,rt.Promise=rt,rt}()},"../../node_modules/events/events.js":(t,e,r)=>{"use strict";var n,i=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,s="object"==typeof Reflect?Reflect:null,o=s&&"function"==typeof s.apply?s.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var u=Number.isNaN||function(t){return t!=t};function c(){c.init.call(this)}t.exports=c,t.exports.once=function(t,e){return new i((function(r,n){function i(r){t.removeListener(e,s),n(r)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}m(t,e,s,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&m(t,"error",e,r)}(t,i,{once:!0})}))},c.EventEmitter=c,c.prototype._events=void 0,c.prototype._eventsCount=0,c.prototype._maxListeners=void 0;var a=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?c.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,events,s,o;if(l(r),void 0===(events=t._events)?(events=t._events=Object.create(null),t._eventsCount=0):(void 0!==events.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),events=t._events),s=events[e]),void 0===s)s=events[e]=r,++t._eventsCount;else if("function"==typeof s?s=events[e]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=f(t))>0&&s.length>i&&!s.warned){s.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=s.length,o=u,console&&console.warn&&console.warn(o)}return t}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function g(t,e,r){var events=t._events;if(void 0===events)return[];var n=events[e];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):b(n,n.length)}function y(t){var events=this._events;if(void 0!==events){var e=events[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function b(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function m(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(s){n.once&&t.removeEventListener(e,i),r(s)}))}}Object.defineProperty(c,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||u(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),c.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},c.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||u(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},c.prototype.getMaxListeners=function(){return f(this)},c.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,events=this._events;if(void 0!==events)n=n&&void 0===events.error;else if(!n)return!1;if(n){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var u=events[t];if(void 0===u)return!1;if("function"==typeof u)o(u,this,e);else{var c=u.length,a=b(u,c);for(r=0;r<c;++r)o(a[r],this,e)}return!0},c.prototype.addListener=function(t,e){return h(this,t,e,!1)},c.prototype.on=c.prototype.addListener,c.prototype.prependListener=function(t,e){return h(this,t,e,!0)},c.prototype.once=function(t,e){return l(e),this.on(t,p(this,t,e)),this},c.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,p(this,t,e)),this},c.prototype.removeListener=function(t,e){var r,events,n,i,s;if(l(e),void 0===(events=this._events))return this;if(void 0===(r=events[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete events[t],events.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){s=r[i].listener,n=i;break}if(n<0)return this;0===n?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(events[t]=r[0]),void 0!==events.removeListener&&this.emit("removeListener",t,s||e)}return this},c.prototype.off=c.prototype.removeListener,c.prototype.removeAllListeners=function(t){var e,events,r;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[t]),this;if(0===arguments.length){var n,i=Object.keys(events);for(r=0;r<i.length;++r)"removeListener"!==(n=i[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=events[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},c.prototype.listeners=function(t){return g(this,t,!0)},c.prototype.rawListeners=function(t){return g(this,t,!1)},c.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):y.call(t,e)},c.prototype.listenerCount=y,c.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"../../node_modules/ieee754/index.js":(t,e)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var s,o,u=8*i-n-1,c=(1<<u)-1,a=c>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=t[e+f];for(f+=h,s=d&(1<<-l)-1,d>>=-l,l+=u;l>0;s=256*s+t[e+f],f+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+t[e+f],f+=h,l-=8);if(0===s)s=1-a;else{if(s===c)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=a}return(d?-1:1)*o*Math.pow(2,s-n)},e.write=function(t,e,r,n,i,s){var o,u,c,a=8*s-i-1,l=(1<<a)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,o=l):(o=Math.floor(Math.log(e)/Math.LN2),e*(c=Math.pow(2,-o))<1&&(o--,c*=2),(e+=o+f>=1?h/c:h*Math.pow(2,1-f))*c>=2&&(o++,c/=2),o+f>=l?(u=0,o=l):o+f>=1?(u=(e*c-1)*Math.pow(2,i),o+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;t[r+d]=255&u,d+=p,u/=256,i-=8);for(o=o<<i|u,a+=i;a>0;t[r+d]=255&o,d+=p,o/=256,a-=8);t[r+d-p]|=128*g}},"../../node_modules/process/browser.js":t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],a=!1,l=-1;function f(){a&&u&&(a=!1,u.length?c=u.concat(c):l=-1,c.length&&h())}function h(){if(!a){var t=o(f);a=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,a=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function p(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new d(t,e)),1!==c.length||a||o(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var s=e[n]={exports:{}};return t[n].call(s.exports,s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();(()=>{"use strict";const t=r("../blockchain-link-types/lib/constants/errors.js"),e=r("../blockchain-link-types/lib/constants/index.js"),n=r("../blockchain-link/lib/workers/baseWorker.js"),i=r("../blockchain-link/lib/workers/blockfrost/websocket.js"),s=r("../blockchain-link-utils/lib/blockfrost.js"),o=({state:t,post:r},n)=>{const i=n.address,o=t.getAccount(i);r({id:-1,type:e.RESPONSES.NOTIFICATION,payload:{type:"notification",payload:{descriptor:o?o.descriptor:i,tx:o?(0,s.transformTransaction)(o.descriptor,o.addresses,n):(0,s.transformTransaction)(i,void 0,n)}}})},u=async t=>{if(t.state.getSubscription("block"))return{subscribed:!0};const r=await t.connect();return t.state.addSubscription("block"),r.on("block",(r=>(({post:t},r)=>{t({id:-1,type:e.RESPONSES.NOTIFICATION,payload:{type:"block",payload:{blockHeight:r.height||0,blockHash:r.hash}}})})(t,r))),r.subscribeBlock()},c=async r=>{const{payload:n}=r;let i;if("accounts"===n.type)i=await(async(t,e)=>{const r=await t.connect(),{state:n}=t;return n.addAccounts(e),n.getSubscription("notification")||(r.on("notification",(e=>o(t,e))),n.addSubscription("notification")),r.subscribeAddresses(n.getAddresses())})(r,n.accounts);else if("addresses"===n.type)i=await(async(t,e)=>{const r=await t.connect(),{state:n}=t;return n.addAddresses(e),n.getSubscription("notification")||(r.on("notification",(e=>o(t,e))),n.addSubscription("notification")),r.subscribeAddresses(n.getAddresses())})(r,n.addresses);else{if("block"!==n.type)throw new t.CustomError("invalid_param","+type");i=await u(r)}return{type:e.RESPONSES.SUBSCRIBE,payload:i}},a=r=>{switch(r.type){case e.MESSAGES.GET_INFO:return(async t=>{const r=await t.connect(),n=await r.getServerInfo();return{type:e.RESPONSES.GET_INFO,payload:Object.assign({url:r.options.url},n)}})(r);case e.MESSAGES.GET_BLOCK_HASH:return(async t=>{const r=await t.connect(),n=await r.getBlockHash(t.payload);return{type:e.RESPONSES.GET_BLOCK_HASH,payload:n.hash}})(r);case e.MESSAGES.GET_ACCOUNT_BALANCE_HISTORY:return(async t=>{const r=await t.connect(),n=await r.getAccountBalanceHistory(t.payload);return{type:e.RESPONSES.GET_ACCOUNT_BALANCE_HISTORY,payload:n}})(r);case e.MESSAGES.GET_ACCOUNT_INFO:return(async t=>{const r=await t.connect(),n=await r.getAccountInfo(t.payload);return{type:e.RESPONSES.GET_ACCOUNT_INFO,payload:(0,s.transformAccountInfo)(n)}})(r);case e.MESSAGES.GET_ACCOUNT_UTXO:return(async t=>{const r=await t.connect(),n=await r.getAccountUtxo(t.payload);return{type:e.RESPONSES.GET_ACCOUNT_UTXO,payload:(0,s.transformUtxos)(n)}})(r);case e.MESSAGES.GET_TRANSACTION:return(async t=>{const r=await t.connect(),n=await r.getTransaction(t.payload);return{type:e.RESPONSES.GET_TRANSACTION,payload:{type:"blockfrost",tx:n}}})(r);case e.MESSAGES.ESTIMATE_FEE:return(async t=>{const r=await t.connect(),n=await r.estimateFee(t.payload),i=[];return i.push({feePerUnit:n.lovelacePerByte.toString()}),{type:e.RESPONSES.ESTIMATE_FEE,payload:i}})(r);case e.MESSAGES.PUSH_TRANSACTION:return(async t=>{const r=await t.connect(),n=await r.pushTransaction(t.payload);return{type:e.RESPONSES.PUSH_TRANSACTION,payload:n}})(r);case e.MESSAGES.SUBSCRIBE:return c(r);case e.MESSAGES.UNSUBSCRIBE:return(async r=>{const{payload:n}=r;let i;if("accounts"===n.type)i=await(async({state:t,connect:e},r)=>{t.removeAccounts(r||t.getAccounts());const n=await e(),i=t.getAddresses();return i.length<1?(n.removeAllListeners("notification"),t.removeSubscription("notification"),n.unsubscribeAddresses()):n.subscribeAddresses(i)})(r,n.accounts);else if("addresses"===n.type)i=await(async({state:t,connect:e},r)=>{const n=await e();r||t.removeAccounts(t.getAccounts());const i=t.removeAddresses(r||t.getAddresses());return i.length<1?(n.removeAllListeners("notification"),t.removeSubscription("notification"),n.unsubscribeAddresses()):n.subscribeAddresses(i)})(r,n.addresses);else{if("block"!==n.type)throw new t.CustomError("invalid_param","+type");i=await(async({state:t,connect:e})=>{if(!t.getSubscription("block"))return{subscribed:!1};const r=await e();return r.removeAllListeners("block"),t.removeSubscription("block"),r.unsubscribeBlock()})(r)}return{type:e.RESPONSES.UNSUBSCRIBE,payload:i}})(r);default:throw new t.CustomError("worker_unknown_request",`+${r.type}`)}};class l extends n.BaseWorker{cleanup(){this.api&&(this.api.dispose(),this.api.removeAllListeners()),super.cleanup()}isConnected(t){var e;return null!==(e=null==t?void 0:t.isConnected())&&void 0!==e&&e}async tryConnect(t){const{timeout:r,pingTimeout:n,keepAlive:s}=this.settings,o=new i.BlockfrostAPI({url:t,timeout:r,pingTimeout:n,keepAlive:s,agent:this.proxyAgent});return await o.connect(),o.on("disconnected",(()=>{this.post({id:-1,type:e.RESPONSES.DISCONNECTED,payload:!0}),this.cleanup()})),this.post({id:-1,type:e.RESPONSES.CONNECTED}),o}disconnect(){this.api&&this.api.disconnect()}async messageHandler(t){try{if(await super.messageHandler(t))return!0;const e=Object.assign(Object.assign({},t.data),{connect:()=>this.connect(),post:t=>this.post(t),state:this.state}),r=await a(e);this.post(Object.assign({id:t.data.id},r))}catch(e){this.errorResponse(t.data.id,e)}}}if(function(){return new l},"worker"===n.CONTEXT){const t=new l;onmessage=t.messageHandler.bind(t)}})()})();