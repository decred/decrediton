(()=>{var e={"../blockchain-link-types/lib/constants/errors.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomError=void 0;const r="blockchain_link/",n={worker_not_found:"Worker not found",worker_invalid:"Invalid worker object",worker_timeout:"Worker timeout",worker_unknown_request:"Unknown message type:",worker_runtime:void 0,invalid_param:"Invalid parameter:",websocket_not_initialized:"WebSocket not initialized",websocket_no_url:"Cannot connect because no server was specified",websocket_timeout:"Websocket timeout",websocket_error_message:void 0,websocket_runtime_error:void 0};class i extends Error{constructor(e,t=""){if(super(t),this.message="",this.message=t,"string"==typeof e){const i=0===e.indexOf(r)?e.substring(16,e.length):e;this.code=`${r}${i}`;const s=n[i];"string"==typeof s&&(""===this.message?this.message=s:0===t.indexOf("+")&&(this.message=`${s} ${t.substring(1)}`))}"string"==typeof this.message&&""!==this.message||(this.message="Message not set")}}t.CustomError=i},"../blockchain-link-types/lib/constants/index.js":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.NETWORKS=t.RESPONSES=t.MESSAGES=void 0;const o=s(r("../blockchain-link-types/lib/constants/messages.js"));t.MESSAGES=o;const c=s(r("../blockchain-link-types/lib/constants/responses.js"));t.RESPONSES=c,t.NETWORKS={RIPPLE:"ripple",BLOCKBOOK:"blockbook",BLOCKFROST:"blockfrost"}},"../blockchain-link-types/lib/constants/messages.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TERMINATE=t.PUSH_TRANSACTION=t.UNSUBSCRIBE=t.SUBSCRIBE=t.ESTIMATE_FEE=t.GET_TRANSACTION=t.GET_ACCOUNT_UTXO=t.GET_ACCOUNT_INFO=t.GET_BLOCK=t.GET_BLOCK_HASH=t.GET_FIAT_RATES_TICKERS_LIST=t.GET_ACCOUNT_BALANCE_HISTORY=t.GET_FIAT_RATES_FOR_TIMESTAMPS=t.GET_CURRENT_FIAT_RATES=t.GET_INFO=t.DISCONNECT=t.CONNECT=t.INIT=t.HANDSHAKE=void 0,t.HANDSHAKE="m_handshake",t.INIT="m_init",t.CONNECT="m_connect",t.DISCONNECT="m_disconnect",t.GET_INFO="m_get_info",t.GET_CURRENT_FIAT_RATES="m_get_current_fiat_rates",t.GET_FIAT_RATES_FOR_TIMESTAMPS="m_get_fiat_rates_for_timestamps",t.GET_ACCOUNT_BALANCE_HISTORY="m_get_account_balance_history",t.GET_FIAT_RATES_TICKERS_LIST="m_get_fiat_rates_tickers_list",t.GET_BLOCK_HASH="m_get_block_hash",t.GET_BLOCK="m_get_block",t.GET_ACCOUNT_INFO="m_get_account_info",t.GET_ACCOUNT_UTXO="m_get_account_utxo",t.GET_TRANSACTION="m_get_transaction",t.ESTIMATE_FEE="m_estimate_fee",t.SUBSCRIBE="m_subscribe",t.UNSUBSCRIBE="m_unsubscribe",t.PUSH_TRANSACTION="m_push_tx",t.TERMINATE="terminate"},"../blockchain-link-types/lib/constants/responses.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NOTIFICATION=t.DISCONNECTED=t.CONNECTED=t.PUSH_TRANSACTION=t.UNSUBSCRIBE=t.SUBSCRIBE=t.ESTIMATE_FEE=t.GET_TRANSACTION=t.GET_ACCOUNT_BALANCE_HISTORY=t.GET_ACCOUNT_UTXO=t.GET_ACCOUNT_INFO=t.GET_FIAT_RATES_TICKERS_LIST=t.GET_FIAT_RATES_FOR_TIMESTAMPS=t.GET_CURRENT_FIAT_RATES=t.GET_BLOCK=t.GET_BLOCK_HASH=t.GET_INFO=t.CONNECT=t.ERROR=void 0,t.ERROR="r_error",t.CONNECT="r_connect",t.GET_INFO="r_info",t.GET_BLOCK_HASH="r_get_block_hash",t.GET_BLOCK="r_get_block",t.GET_CURRENT_FIAT_RATES="r_get_current_fiat_rates",t.GET_FIAT_RATES_FOR_TIMESTAMPS="r_get_fiat_rates_for_timestamps",t.GET_FIAT_RATES_TICKERS_LIST="r_GET_FIAT_RATES_TICKERS_LIST",t.GET_ACCOUNT_INFO="r_account_info",t.GET_ACCOUNT_UTXO="r_get_account_utxo",t.GET_ACCOUNT_BALANCE_HISTORY="r_get_account_balance_history",t.GET_TRANSACTION="r_get_transaction",t.ESTIMATE_FEE="r_estimate_fee",t.SUBSCRIBE="r_subscribe",t.UNSUBSCRIBE="r_unsubscribe",t.PUSH_TRANSACTION="r_push_tx",t.CONNECTED="r_connected",t.DISCONNECTED="r_disconnected",t.NOTIFICATION="r_notification"},"../blockchain-link-utils/lib/blockbook.js":function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.transformAccountUtxo=t.transformAccountInfo=t.transformAddresses=t.transformTokenInfo=t.transformTransaction=t.isTxFailed=t.filterEthereumInternalTransfers=t.filterTokenTransfers=t.transformServerInfo=void 0;const i=n(r("../../node_modules/bignumber.js/bignumber.js")),s=r("../blockchain-link-utils/lib/utils.js");t.transformServerInfo=e=>{var t;return{name:e.name,shortcut:e.shortcut,testnet:e.testnet,version:e.version,decimals:e.decimals,blockHeight:e.bestHeight,blockHash:e.bestHash,consensusBranchId:(null===(t=e.backend)||void 0===t?void 0:t.consensus)?parseInt(e.backend.consensus.chaintip,16):void 0}};t.filterTokenTransfers=(e,t)=>{if("string"==typeof e&&(e=[e]),!(e&&Array.isArray(e)&&t&&Array.isArray(t)))return[];const r=e.map((e=>"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.address?e.address:null));return t.filter((e=>!(!e||"object"!=typeof e)&&(e.from&&r.indexOf(e.from)>=0||e.to&&r.indexOf(e.to)>=0))).map((e=>{const t=e.from&&r.indexOf(e.from)>=0,n=e.to&&r.indexOf(e.to)>=0;let i;i=t&&n?"self":t?"sent":"recv";const s=Object.assign(Object.assign({},e),{type:i,decimals:e.decimals||0,amount:e.value||"",standard:e.type});return delete s.value,s}))};t.filterEthereumInternalTransfers=(e,t)=>{const r=null==t?void 0:t.internalTransfers;return e&&(null==r?void 0:r.length)?r.filter((({type:t,from:r,to:n})=>0===t&&[r,n].includes(e))).map((({from:t,to:r,value:n})=>{const i=t===e;let s;return s=i&&r===e?"self":i?"sent":"recv",{type:s,amount:n,from:t,to:r}})):[]};t.isTxFailed=e=>{var t;return!(!e.blockHeight||e.blockHeight<0)&&0===(null===(t=e.ethereumSpecific)||void 0===t?void 0:t.status)};t.transformTransaction=(e,r,n)=>{var o,c;const u=r?r.change.concat(r.used,r.unused).map((e=>e.address)):[e],a=Array.isArray(n.vin)?n.vin:[],l=a.reduce(s.sumVinVout,0),f=(0,s.filterTargets)(u,n.vin),h=f.reduce(s.sumVinVout,0),d=Array.isArray(n.vout)?n.vout:[],p=d.reduce(s.sumVinVout,0),g=(0,s.filterTargets)(u,n.vout),b=g.reduce(s.sumVinVout,0),y=(0,t.filterTokenTransfers)(u,n.tokenTransfers),m=(0,t.filterEthereumInternalTransfers)(e,n.ethereumSpecific),v=e=>!r||(0,s.filterTargets)(r.change,n.vout).indexOf(e)<0,_=e=>e.value&&"0"!==e.value;let w,E,T;if(null===(o=n.ethereumSpecific)||void 0===o?void 0:o.createdContract)w="contract",E=n.value,T=[];else if(f.length)if(f.length<a.length)w="joint",T=[],E=new i.default(b).minus(h).toString();else if(g.length<d.length||!d.length)w="sent",T=y.length?d.filter(_):d.filter(v),E=!d.length||n.ethereumSpecific?n.value:new i.default(h).minus(b).minus(null!==(c=n.fees)&&void 0!==c?c:"0").toString();else{w="self",E=n.fees;const e=d.filter(v);T=e.length?e:d}else if(g.length||y.length||m.length){w="recv",E=b.toString(),T=g;const e=[...y,...m],t=e.find((e=>"sent"===e.type)),r=e.find((e=>"recv"!==e.type));t?w="sent":!g.length&&r&&(w="self")}else w="unknown",E=n.value,T=[];w=(0,t.isTxFailed)(n)?"failed":w;const A=!(!n.rbf&&!a.find((e=>"number"==typeof e.sequence&&e.sequence<4294967294)))||void 0,S=n.ethereumSpecific&&!n.ethereumSpecific.gasUsed?new i.default(n.ethereumSpecific.gasPrice).times(n.ethereumSpecific.gasLimit).toString():n.fees,O=n.vsize?new i.default(S).div(n.vsize).decimalPlaces(2).toString():void 0,j=n.size||("string"==typeof n.hex?n.hex.length/2:0);return{type:w,txid:n.txid,hex:n.hex,blockTime:n.blockTime,blockHeight:n.blockHeight,blockHash:n.blockHash,lockTime:n.lockTime,amount:E,fee:S,vsize:n.vsize,feeRate:O,targets:T.filter((e=>"object"==typeof e)).map((e=>(0,s.transformTarget)(e,g))),tokens:y,internalTransfers:m,rbf:A,ethereumSpecific:n.ethereumSpecific,details:{vin:a.map((0,s.enhanceVinVout)(u)),vout:d.map((0,s.enhanceVinVout)(u)),size:j,totalInput:l.toString(),totalOutput:p.toString()}}};t.transformTokenInfo=e=>{if(!e||!Array.isArray(e))return;const t=e.reduce(((e,t)=>"XPUBAddress"===t.type?e:e.concat([Object.assign(Object.assign({},t),{decimals:t.decimals||0})])),[]);return t.length>0?t:void 0};t.transformAddresses=e=>{if(!e||!Array.isArray(e))return;const t=e.reduce(((e,t)=>"XPUBAddress"!==t.type?e:e.concat([{address:t.name,path:t.path,transfers:t.transfers,balance:t.balance,sent:t.totalSent,received:t.totalReceived}])),[]);if(t.length<1)return;const r=t.filter((e=>"1"===e.path.split("/")[4])),n=t.filter((e=>r.indexOf(e)<0));return{change:r,used:n.filter((e=>e.transfers>0)),unused:n.filter((e=>0===e.transfers))}};t.transformAccountInfo=e=>{let r;"number"==typeof e.page&&(r={index:e.page,size:e.itemsOnPage,total:e.totalPages});let n={};if("string"==typeof e.nonce&&(n.nonce=e.nonce),e.erc20Contract){const r=(0,t.transformTokenInfo)([Object.assign(Object.assign({},e.erc20Contract),{type:e.erc20Contract.type||"ERC20"})]);if(r){const[e]=r;n.erc20Contract=e}}Object.keys(n).length<1&&(n=void 0);const s=e.address,o=(0,t.transformAddresses)(e.tokens),c=(0,t.transformTokenInfo)(e.tokens),u=new i.default(e.unconfirmedBalance),a=u.isNaN()||u.isZero()?e.balance:u.plus(e.balance).toString(),l=0===e.txs&&0===e.unconfirmedTxs&&new i.default(a).isZero();return{descriptor:s,balance:e.balance,availableBalance:a,empty:l,tokens:c,addresses:o,history:{addrTxCount:e.addrTxCount,total:e.txs,tokens:"number"==typeof e.nonTokenTxs?e.txs-e.nonTokenTxs:void 0,unconfirmed:e.unconfirmedTxs,transactions:e.transactions?e.transactions.map((e=>(0,t.transformTransaction)(s,o,e))):void 0},misc:n,page:r}};t.transformAccountUtxo=e=>e.map((e=>({txid:e.txid,vout:e.vout,amount:e.value,blockHeight:e.height,address:e.address,path:e.path,confirmations:e.confirmations,coinbase:e.coinbase})))},"../blockchain-link-utils/lib/utils.js":function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.sortTxsFromLatest=t.transformTarget=t.sumVinVout=t.enhanceVinVout=t.filterTargets=t.isAccountOwned=void 0;const i=n(r("../../node_modules/bignumber.js/bignumber.js")),s=r("../utils/lib/index.js");t.isAccountOwned=e=>t=>Array.isArray(null==t?void 0:t.addresses)&&t.addresses.some((t=>e.includes(t)));t.filterTargets=(e,r)=>{if("string"==typeof e&&(e=[e]),!(e&&Array.isArray(e)&&r&&Array.isArray(r)))return[];const n=e.map((e=>"string"==typeof e?e:"object"==typeof e&&"string"==typeof e.address?e.address:void 0)).filter(s.isNotUndefined);return r.filter((0,t.isAccountOwned)(n))};t.enhanceVinVout=e=>r=>Object.assign(Object.assign({},r),{isAccountOwned:(0,t.isAccountOwned)(e)(r)||void 0});t.sumVinVout=(e,{value:t})=>"string"==typeof t?new i.default(t||"0").plus(e):e;t.transformTarget=(e,t)=>({n:e.n||0,addresses:e.addresses,isAddress:e.isAddress,amount:e.value,coinbase:e.coinbase,isAccountTarget:!!t.includes(e)||void 0});const o=({blockHeight:e})=>void 0===e||e<=0?Number.MAX_SAFE_INTEGER:e;t.sortTxsFromLatest=e=>{const t=e.slice().sort(((e,t)=>o(t)-o(e)));let r=0;for(;r<t.length-1;){const e=o(t[r]);let n=r+1;if(e===o(t[n])){do{n++}while(n<t.length&&e===o(t[n]));const i=(0,s.topologicalSort)(t.slice(r,n),((e,t)=>e.details.vin.some((({txid:e})=>e===t.txid))));t.splice(r,i.length,...i)}r=n}return t}},"../blockchain-link/lib/utils/socks-proxy-agent.js":e=>{"use strict";e.exports=e=>({})},"../blockchain-link/lib/utils/ws.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});const n=r("../../node_modules/events/events.js");class i extends n.EventEmitter{constructor(e,t,r){super(),this._ws=new WebSocket(e),this._ws.onclose=()=>{this.emit("close")},this._ws.onopen=()=>{this.emit("open")},this._ws.onerror=e=>{this.emit("error",new Error(`WsWrapper error. Ready state: ${this.readyState}`))},this._ws.onmessage=e=>{this.emit("message",e.data)}}close(){1===this.readyState&&this._ws.close()}send(e){this._ws.send(e)}get readyState(){return this._ws.readyState}}i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,t.default=i},"../blockchain-link/lib/workers/baseWebsocket.js":function(e,t,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseWebsocket=void 0;const s=i(r("../blockchain-link/lib/utils/ws.js")),o=r("../utils/lib/createDeferred.js"),c=r("../utils/lib/typedEventEmitter.js"),u=r("../blockchain-link-types/lib/constants/errors.js");class a extends c.TypedEmitter{constructor(e){super(),this.messages=[],this.subscriptions=[],this.emitter=this,this.messageID=0,this.options=e}setConnectionTimeout(e){this.clearConnectionTimeout(),this.connectionTimeout=setTimeout(this.onTimeout.bind(this),e||this.options.timeout||2e4)}clearConnectionTimeout(){this.connectionTimeout&&(clearTimeout(this.connectionTimeout),this.connectionTimeout=void 0)}setPingTimeout(){this.pingTimeout&&clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(this.onPing.bind(this),this.options.pingTimeout||5e4)}rejectAllPending(e,t){this.messages.forEach((r=>r.reject(new u.CustomError(e,t)))),this.messages.splice(0,this.messages.length)}onTimeout(){const{ws:e}=this;if(e)if(e.listenerCount("open")>0){e.emit("error",new u.CustomError("websocket_timeout"));try{e.close()}catch(e){}}else this.rejectAllPending("websocket_timeout"),e.close()}async onPing(){if(this.ws&&this.isConnected())try{this.subscriptions.length>0||this.options.keepAlive?await this.ping():this.ws.close()}catch(e){}}onError(){this.onClose()}sendMessage(e){var t,r;const{ws:n}=this;if(!n)throw new u.CustomError("websocket_not_initialized");const i=this.messageID.toString(),s=(0,o.createDeferred)(i),c=Object.assign({id:i},e);return this.messageID++,this.messages.push(s),this.setConnectionTimeout(),this.setPingTimeout(),null===(r=(t=this.options).onSending)||void 0===r||r.call(t,e),n.send(JSON.stringify(c)),s.promise}onMessage(e){try{const t=JSON.parse(e),{id:r,data:n}=t,i=this.messages.find((e=>e.id===r));if(i)n.error?i.reject(new u.CustomError("websocket_error_message",n.error.message)):i.resolve(n),this.messages.splice(this.messages.indexOf(i),1);else{const e=this.subscriptions.find((e=>e.id===r));e&&e.callback(n)}}catch(e){}0===this.messages.length&&this.clearConnectionTimeout(),this.setPingTimeout()}addSubscription(e,t){const r=this.messageID.toString();this.subscriptions.push({id:r,type:e,callback:t})}removeSubscription(e){const t=this.subscriptions.findIndex((t=>t.type===e));return t>=0&&this.subscriptions.splice(t,1),t}async connect(){var e;if(this.connectPromise)return this.connectPromise;(null===(e=this.ws)||void 0===e?void 0:e.readyState)===s.default.CLOSING&&await new n((e=>this.emitter.once("disconnected",e))),this.setConnectionTimeout(this.options.connectionTimeout);const t=(0,o.createDeferred)(-1);this.connectPromise=t.promise;const r=this.createWebsocket();return r.once("error",(e=>{this.onClose(),t.reject(new u.CustomError("websocket_runtime_error",e.message))})),r.on("open",(()=>{this.init(),t.resolve()})),this.ws=r,t.promise.finally((()=>{this.connectPromise=void 0}))}init(){const{ws:e}=this;if(!e||!this.isConnected())throw Error("Websocket init cannot be called");this.clearConnectionTimeout(),e.removeAllListeners(),e.on("error",this.onError.bind(this)),e.on("message",this.onMessage.bind(this)),e.on("close",(()=>{this.onClose(),this.emitter.emit("disconnected")}))}disconnect(){var e;null===(e=this.ws)||void 0===e||e.close()}isConnected(){var e;return(null===(e=this.ws)||void 0===e?void 0:e.readyState)===s.default.OPEN}onClose(){var e;this.pingTimeout&&clearTimeout(this.pingTimeout),this.connectionTimeout&&clearTimeout(this.connectionTimeout),this.isConnected()&&this.disconnect(),null===(e=this.ws)||void 0===e||e.removeAllListeners(),this.rejectAllPending("websocket_runtime_error","Websocket closed unexpectedly")}dispose(){this.onClose(),this.removeAllListeners()}}t.BaseWebsocket=a},"../blockchain-link/lib/workers/baseWorker.js":function(e,t,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseWorker=t.CONTEXT=void 0;const s=i(r("../blockchain-link/lib/utils/socks-proxy-agent.js")),o=r("../blockchain-link-types/lib/constants/errors.js"),c=r("../blockchain-link/lib/workers/state.js"),u=r("../blockchain-link/lib/workers/utils.js"),a=r("../blockchain-link-types/lib/constants/index.js");t.CONTEXT="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope||"undefined"!=typeof importScripts?"worker":"main";t.BaseWorker=class{constructor(){this.settings={},"worker"===t.CONTEXT?this.post=e=>self.postMessage(e):this.post=e=>this.onmessage({data:e}),this.state=new c.WorkerState,setTimeout((()=>{this.post({id:-1,type:a.MESSAGES.HANDSHAKE})}),10)}debug(...e){if(!this.settings.debug)return;const t=`[Worker "${this.settings.name}"]:`,r=e[0];"warn"===r||"error"===r?console[r](t,...e.slice(1)):console.log(t,...e)}cleanup(){this.api=void 0,this.state.cleanup()}connect(){if(this.isConnected(this.api))return n.resolve(this.api);if(!this.connectPromise){const e=Array.isArray(this.settings.server)?this.settings.server.filter((e=>"string"==typeof e)):[];if(e.length<1)throw new o.CustomError("connect","Endpoint not set");const t=(0,u.prioritizeEndpoints)(e);this.connectPromise=this.connectRecursive(t).then((e=>(this.debug("Connected"),this.api=e,this.connectPromise=void 0,e)))}return this.connectPromise}connectRecursive([e,...t]){if(!e)throw new o.CustomError("connect","All backends are down");return this.proxyAgent&&(this.proxyAgent.protocol=/^(https|wss):/.test(e)?"https:":"http:"),this.debug("Connecting to",e),this.tryConnect(e).catch((e=>(this.debug("Connection failed",e),this.connectRecursive(t))))}disconnect(){}async messageHandler(e){if(!e.data)return!0;const{data:t}=e,{id:r}=t;return this.debug("onmessage",t),t.type===a.MESSAGES.HANDSHAKE?(this.settings=t.settings,this.proxyAgent=t.settings.proxy?(0,s.default)(t.settings.proxy):void 0,!0):t.type===a.MESSAGES.CONNECT?(await this.connect(),this.post({id:r,type:a.RESPONSES.CONNECT,payload:!0}),!0):t.type===a.MESSAGES.DISCONNECT?(this.disconnect(),this.post({id:r,type:a.RESPONSES.DISCONNECTED,payload:!0}),!0):t.type===a.MESSAGES.TERMINATE?(this.disconnect(),this.cleanup(),!0):void 0}errorResponse(e,t){const r={code:"",message:""};t instanceof Error&&(r.message=t.message,r.code=t instanceof o.CustomError&&t.code?t.code:""),this.post({id:e,type:a.RESPONSES.ERROR,payload:r})}postMessage(e){this.messageHandler({data:e})}onmessage(e){}onmessageerror(e){}onerror(e){}terminate(){this.postMessage({id:-1,type:a.MESSAGES.TERMINATE})}}},"../blockchain-link/lib/workers/blockbook/websocket.js":function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.BlockbookAPI=void 0;const i=n(r("../blockchain-link/lib/utils/ws.js")),s=r("../blockchain-link-types/lib/constants/errors.js"),o=r("../blockchain-link/lib/workers/baseWebsocket.js");class c extends o.BaseWebsocket{constructor(){super(...arguments),this.send=(e,t={})=>this.sendMessage({method:e,params:t})}createWebsocket(){let{url:e}=this.options;if("string"!=typeof e)throw new s.CustomError("websocket_no_url");if(e.startsWith("http")&&(e=e.replace("http","ws")),!e.endsWith("/websocket")){const t=e.endsWith("/")?"websocket":"/websocket";e+=t}return new i.default(e,{agent:this.options.agent,headers:Object.assign({Origin:"https://node.trezor.io","User-Agent":"Trezor Suite"},this.options.headers)})}ping(){return this.getBlockHash(1)}getServerInfo(){return this.send("getInfo")}getBlockHash(e){return this.send("getBlockHash",{height:e})}getBlock(e){return this.send("getBlock",{id:`${e}`})}getBlockFilter(e,t){return this.send("getBlockFilter",Object.assign({blockHash:e,scriptType:"taproot-noordinals"},t))}getBlockFiltersBatch(e,t,r){return this.send("getBlockFiltersBatch",Object.assign({bestKnownBlockHash:e,pageSize:t,scriptType:"taproot-noordinals"},r))}getMempoolFilters(e,t){return this.send("getMempoolFilters",Object.assign({fromTimestamp:e,scriptType:"taproot-noordinals"},t))}getAccountInfo(e){return this.send("getAccountInfo",e)}getAccountUtxo(e){return this.send("getAccountUtxo",{descriptor:e})}getTransaction(e){return this.send("getTransaction",{txid:e})}pushTransaction(e){return this.send("sendTransaction",{hex:e})}estimateFee(e){return this.send("estimateFee",e)}getCurrentFiatRates(e){return this.send("getCurrentFiatRates",e)}getAccountBalanceHistory(e){return this.send("getBalanceHistory",e)}getFiatRatesForTimestamps(e){return this.send("getFiatRatesForTimestamps",e)}getFiatRatesTickersList(e){return this.send("getFiatRatesTickersList",e)}subscribeAddresses(e){return this.removeSubscription("notification"),this.addSubscription("notification",(e=>this.emit("notification",e))),this.send("subscribeAddresses",{addresses:e})}unsubscribeAddresses(){return this.removeSubscription("notification")>=0?this.send("unsubscribeAddresses"):{subscribed:!1}}subscribeBlock(){return this.removeSubscription("block"),this.addSubscription("block",(e=>this.emit("block",e))),this.send("subscribeNewBlock")}unsubscribeBlock(){return this.removeSubscription("block")>=0?this.send("unsubscribeNewBlock"):{subscribed:!1}}subscribeFiatRates(e){return this.removeSubscription("fiatRates"),this.addSubscription("fiatRates",(e=>this.emit("fiatRates",e))),this.send("subscribeFiatRates",{currency:e})}unsubscribeFiatRates(){return this.removeSubscription("fiatRates")>=0?this.send("unsubscribeFiatRates"):{subscribed:!1}}subscribeMempool(){return this.removeSubscription("mempool"),this.addSubscription("mempool",(e=>this.emit("mempool",e))),this.send("subscribeNewTransaction")}unsubscribeMempool(){return this.removeSubscription("mempool")>=0?this.send("unsubscribeNewTransaction"):{subscribed:!1}}}t.BlockbookAPI=c},"../blockchain-link/lib/workers/state.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WorkerState=void 0;const n=r("../blockchain-link-types/lib/constants/errors.js");t.WorkerState=class{constructor(){this.addresses=[],this.accounts=[],this.subscription={}}validateAddresses(e){if(!Array.isArray(e))throw new n.CustomError("invalid_param","+addresses");const t=[];return e.filter((e=>"string"==typeof e&&(!(t.indexOf(e)>=0)&&(t.push(e),!0))))}addAddresses(e){const t=this.validateAddresses(e).filter((e=>this.addresses.indexOf(e)<0));return this.addresses=this.addresses.concat(t),t}getAddresses(){return this.addresses}removeAddresses(e){const t=this.validateAddresses(e);return this.addresses=this.addresses.filter((e=>t.indexOf(e)<0)),this.addresses}validateAccounts(e){if(!Array.isArray(e))throw new n.CustomError("invalid_param","+accounts");const t=[];return e.filter((e=>!(!e||"object"!=typeof e||"string"!=typeof e.descriptor)&&(!(t.indexOf(e.descriptor)>=0)&&(t.push(e.descriptor),!0))))}getAccountAddresses(e){if(e.addresses){const{change:t,used:r,unused:n}=e.addresses;return t.concat(r,n).map((e=>e.address))}return[e.descriptor]}addAccounts(e){const t=this.validateAccounts(e),r=this.accounts.filter((e=>!t.find((t=>t.descriptor===e.descriptor))));this.accounts=r.concat(t);const n=this.accounts.reduce(((e,t)=>e.concat(this.getAccountAddresses(t))),[]);return this.addAddresses(n),t}getAccount(e){return this.accounts.find((t=>{if(t.descriptor===e)return!0;if(t.addresses){const{change:r,used:n,unused:i}=t.addresses;if(r.find((t=>t.address===e)))return!0;if(n.find((t=>t.address===e)))return!0;if(i.find((t=>t.address===e)))return!0}return!1}))}getAccounts(){return this.accounts}removeAccounts(e){const t=this.validateAccounts(e),r=this.accounts.filter((e=>t.find((t=>t.descriptor===e.descriptor)))),n=r.reduce(((e,t)=>e.concat(this.getAccountAddresses(t))),[]);return this.accounts=this.accounts.filter((e=>r.indexOf(e)<0)),this.removeAddresses(n),this.accounts}addSubscription(e){this.subscription[e]=!0}getSubscription(e){return this.subscription[e]}hasSubscriptions(){return Object.keys(this.subscription).length>0}removeSubscription(e){delete this.subscription[e]}clearSubscriptions(){Object.keys(this.subscription).forEach((e=>{delete this.subscription[e]}))}removeEmpty(e){return Object.keys(e).forEach((t=>{Array.isArray(e[t])&&e[t].map((e=>this.removeEmpty(e))),e[t]&&"object"==typeof e[t]?this.removeEmpty(e[t]):void 0===e[t]&&delete e[t]})),e}cleanup(){this.removeAccounts(this.getAccounts()),this.removeAddresses(this.getAddresses()),this.clearSubscriptions()}}},"../blockchain-link/lib/workers/utils.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.prioritizeEndpoints=void 0;const n=r("../utils/lib/index.js");t.prioritizeEndpoints=e=>e.map((e=>{const t=(0,n.parseHostname)(e);let r=Math.random();return"localhost"===t||"127.0.0.1"===t?r+=2:(null==t?void 0:t.endsWith(".onion"))&&(r+=1),[e,r]})).sort((([,e],[,t])=>t-e)).map((([e])=>e))},"../utils/lib/arrayDistinct.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayDistinct=void 0;t.arrayDistinct=(e,t,r)=>r.indexOf(e)===t},"../utils/lib/arrayPartition.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayPartition=void 0;t.arrayPartition=(e,t)=>e.reduce((([e,r],n)=>t(n)?[[...e,n],r]:[e,[...r,n]]),[[],[]])},"../utils/lib/arrayShuffle.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayShuffle=void 0;t.arrayShuffle=e=>{const t=e.slice();for(let e=t.length-1;e>0;e--){const r=Math.floor(Math.random()*(e+1));[t[e],t[r]]=[t[r],t[e]]}return t}},"../utils/lib/arrayToDictionary.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.arrayToDictionary=void 0;const r=e=>!!["string","number"].includes(typeof e);t.arrayToDictionary=(e,t,n)=>n?e.reduce(((e,n)=>{var i;const s=t(n);return r(s)?Object.assign(Object.assign({},e),{[s]:[...null!==(i=e[s])&&void 0!==i?i:[],n]}):e}),{}):e.reduce(((e,n)=>{const i=t(n);return r(i)?Object.assign(Object.assign({},e),{[i]:n}):e}),{})},"../utils/lib/bufferUtils.js":(e,t,r)=>{"use strict";var Buffer=r("../../node_modules/buffer/index.js").lW;Object.defineProperty(t,"__esModule",{value:!0}),t.getChunkSize=t.reverseBuffer=void 0;t.reverseBuffer=e=>{if(e.length<1)return e;const t=Buffer.alloc(e.length);let r=t.length-1;for(let n=0;n<t.length/2;n++)t[n]=e[r],t[r]=e[n],r--;return t};t.getChunkSize=e=>{const t=Buffer.allocUnsafe(1);return t.writeUInt8(e),t}},"../utils/lib/bytesToHumanReadable.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToHumanReadable=void 0;const r=["B","KB","MB","GB","TB"];t.bytesToHumanReadable=e=>{let t=Math.abs(e),n=0;for(;t>=1024||n>=r.length;)t/=1024,n++;return`${t.toFixed(1)} ${r[n]}`}},"../utils/lib/capitalizeFirstLetter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.capitalizeFirstLetter=void 0;t.capitalizeFirstLetter=e=>e.charAt(0).toUpperCase()+e.slice(1)},"../utils/lib/cloneObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cloneObject=void 0;t.cloneObject=e=>{const t=JSON.stringify(e);return void 0===t?e:JSON.parse(t)}},"../utils/lib/countBytesInString.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countBytesInString=void 0;t.countBytesInString=e=>encodeURI(e).split(/%..|./).length-1},"../utils/lib/createCooldown.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCooldown=void 0;t.createCooldown=e=>{let t=0;return()=>{const r=Date.now();return r-t>=e&&(t=r,!0)}}},"../utils/lib/createDeferred.js":(e,t,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(t,"__esModule",{value:!0}),t.createDeferred=void 0;t.createDeferred=e=>{let t=()=>{},r=()=>{};const i=new n(((e,n)=>{t=e,r=n}));return{id:e,resolve:t,reject:r,promise:i}}},"../utils/lib/createTimeoutPromise.js":(e,t,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(t,"__esModule",{value:!0}),t.createTimeoutPromise=void 0;t.createTimeoutPromise=e=>new n((t=>setTimeout(t,e)))},"../utils/lib/enumUtils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getValueByKey=t.getKeyByValue=void 0,t.getKeyByValue=function(e,t){return e&&Object.keys(e).find((r=>e[r]===t))},t.getValueByKey=function(e,t){const r=e&&Object.keys(e).find((e=>e===t));return r&&e[r]}},"../utils/lib/getLocaleSeparators.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocaleSeparators=void 0;t.getLocaleSeparators=e=>{var t,r;const n=new Intl.NumberFormat(e).formatToParts(10000.1);return{decimalSeparator:null===(t=n.find((({type:e})=>"decimal"===e)))||void 0===t?void 0:t.value,thousandsSeparator:null===(r=n.find((({type:e})=>"group"===e)))||void 0===r?void 0:r.value}}},"../utils/lib/getNumberFromPixelString.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNumberFromPixelString=void 0;t.getNumberFromPixelString=e=>parseInt(e.replace("px",""),10)},"../utils/lib/getRandomNumberInRange.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRandomNumberInRange=void 0;t.getRandomNumberInRange=(e,t)=>Math.floor(Math.random()*(t-e+1))+e},"../utils/lib/getSynchronize.js":(e,t,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(t,"__esModule",{value:!0}),t.getSynchronize=void 0;t.getSynchronize=()=>{let e;return t=>{const r=(null!=e?e:n.resolve()).catch((()=>{})).then(t).finally((()=>{e===r&&(e=void 0)}));return e=r,e}}},"../utils/lib/getWeakRandomId.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getWeakRandomId=void 0;t.getWeakRandomId=e=>{let t="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<e;n++)t+=r.charAt(Math.floor(62*Math.random()));return t}},"../utils/lib/hasUppercaseLetter.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasUppercaseLetter=void 0;const r=new RegExp("^(.*[A-Z].*)$");t.hasUppercaseLetter=e=>r.test(e)},"../utils/lib/index.js":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)},o=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.xssFilters=t.versionUtils=t.enumUtils=t.bufferUtils=void 0,s(r("../utils/lib/arrayDistinct.js"),t),s(r("../utils/lib/arrayPartition.js"),t),s(r("../utils/lib/arrayShuffle.js"),t),s(r("../utils/lib/arrayToDictionary.js"),t),t.bufferUtils=o(r("../utils/lib/bufferUtils.js")),s(r("../utils/lib/bytesToHumanReadable.js"),t),s(r("../utils/lib/capitalizeFirstLetter.js"),t),s(r("../utils/lib/cloneObject.js"),t),s(r("../utils/lib/countBytesInString.js"),t),s(r("../utils/lib/createCooldown.js"),t),s(r("../utils/lib/createDeferred.js"),t),s(r("../utils/lib/createTimeoutPromise.js"),t),t.enumUtils=o(r("../utils/lib/enumUtils.js")),s(r("../utils/lib/getNumberFromPixelString.js"),t),s(r("../utils/lib/getRandomNumberInRange.js"),t),s(r("../utils/lib/getSynchronize.js"),t),s(r("../utils/lib/getWeakRandomId.js"),t),s(r("../utils/lib/hasUppercaseLetter.js"),t),s(r("../utils/lib/isAscii.js"),t),s(r("../utils/lib/isHex.js"),t),s(r("../utils/lib/isNotUndefined.js"),t),s(r("../utils/lib/isUrl.js"),t),s(r("../utils/lib/mergeDeepObject.js"),t),s(r("../utils/lib/objectPartition.js"),t),s(r("../utils/lib/parseElectrumUrl.js"),t),s(r("../utils/lib/parseHostname.js"),t),s(r("../utils/lib/promiseAllSequence.js"),t),s(r("../utils/lib/redactUserPath.js"),t),s(r("../utils/lib/scheduleAction.js"),t),s(r("../utils/lib/throwError.js"),t),s(r("../utils/lib/truncateMiddle.js"),t),s(r("../utils/lib/topologicalSort.js"),t),s(r("../utils/lib/urlToOnion.js"),t),t.versionUtils=o(r("../utils/lib/versionUtils.js")),t.xssFilters=o(r("../utils/lib/xssFilters.js")),s(r("../utils/lib/getLocaleSeparators.js"),t)},"../utils/lib/isAscii.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAscii=void 0,t.isAscii=function(e){return!e||/^[\x00-\x7F]*$/.test(e)}},"../utils/lib/isHex.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isHex=void 0;t.isHex=e=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(e)},"../utils/lib/isNotUndefined.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNotUndefined=void 0;t.isNotUndefined=e=>void 0!==e},"../utils/lib/isUrl.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUrl=void 0;const r=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i;t.isUrl=e=>r.test(e)},"../utils/lib/mergeDeepObject.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mergeDeepObject=void 0;const r=e=>{if("object"==typeof e&&null!==e){if("function"==typeof Object.getPrototypeOf){const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t}return"[object Object]"===Object.prototype.toString.call(e)}return!1};t.mergeDeepObject=(...e)=>e.reduce(((e,n)=>{if(Array.isArray(n))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(n).forEach((i=>{["__proto__","constructor","prototype"].includes(i)||(Array.isArray(e[i])&&Array.isArray(n[i])?e[i]=t.mergeDeepObject.options.mergeArrays?Array.from(new Set(e[i].concat(n[i]))):n[i]:r(e[i])&&r(n[i])?e[i]=(0,t.mergeDeepObject)(e[i],n[i]):e[i]=n[i])})),e}),{});const n={mergeArrays:!0};t.mergeDeepObject.options=n,t.mergeDeepObject.withOptions=(e,...r)=>{t.mergeDeepObject.options=Object.assign({mergeArrays:!0},e);const i=(0,t.mergeDeepObject)(...r);return t.mergeDeepObject.options=n,i}},"../utils/lib/objectPartition.js":function(e,t){"use strict";var r=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.objectPartition=void 0;t.objectPartition=(e,t)=>t.reduce((([e,t],n)=>{const i=t,s=n,o=i[s],c=r(i,["symbol"==typeof s?s:s+""]);return void 0!==o?[Object.assign(Object.assign({},e),{[n]:o}),c]:[e,t]}),[{},e])},"../utils/lib/parseElectrumUrl.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseElectrumUrl=void 0;const r=/^(?:([a-zA-Z0-9.-]+)|\[([a-f0-9:]+)\]):([0-9]{1,5}):([ts])$/;t.parseElectrumUrl=e=>{var t;const n=e.match(r);if(n)return{host:null!==(t=n[1])&&void 0!==t?t:n[2],port:Number.parseInt(n[3],10),protocol:n[4]}}},"../utils/lib/parseHostname.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseHostname=void 0;const r=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i;t.parseHostname=e=>{var t,n;return null===(n=null===(t=e.match(r))||void 0===t?void 0:t[2])||void 0===n?void 0:n.toLowerCase()}},"../utils/lib/promiseAllSequence.js":function(e,t,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=n))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function c(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.promiseAllSequence=void 0;t.promiseAllSequence=e=>i(void 0,void 0,void 0,(function*(){const t=[];for(let r=0;r<e.length;++r){const n=yield e[r]();t.push(n)}return t}))},"../utils/lib/redactUserPath.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.redactUserPathFromString=t.startOfUserPathRegex=void 0,t.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;t.redactUserPathFromString=e=>e.replace(t.startOfUserPathRegex,"$1[*]")},"../utils/lib/scheduleAction.js":function(e,t,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(e,t,r,i){return new(r||(r=n))((function(n,s){function o(e){try{u(i.next(e))}catch(e){s(e)}}function c(e){try{u(i.throw(e))}catch(e){s(e)}}function u(e){var t;e.done?n(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,c)}u((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.scheduleAction=void 0;const s=e=>Array.isArray(e),o=()=>new Error("Aborted by signal"),c=()=>new Error("Aborted by deadline"),u=()=>new Error("Aborted by timeout"),a=(e,t)=>new n(((r,n)=>{if(t.aborted)return n();if(void 0===e)return r();const i=setTimeout(r,e),s=()=>{clearTimeout(i),t.removeEventListener("abort",s),n()};t.addEventListener("abort",s)})),l=(e,t,r)=>new n(((n,i)=>{if(r.aborted)return i();const s=void 0!==e?setTimeout((()=>i(t())),e):void 0,o=()=>{clearTimeout(s),r.removeEventListener("abort",o),i()};r.addEventListener("abort",o)})),f=(e,t)=>new n(((r,n)=>{if(t.aborted)return n();if(null==e?void 0:e.aborted)return n(o());const i=()=>n(o());null==e||e.addEventListener("abort",i);const s=()=>{null==e||e.removeEventListener("abort",i),t.removeEventListener("abort",s),n()};t.addEventListener("abort",s)})),h=(e,t)=>i(void 0,void 0,void 0,(function*(){const r=new AbortController,i=()=>r.abort();t.aborted&&i(),t.addEventListener("abort",i);try{return yield new n((t=>t(e(r.signal))))}finally{t.removeEventListener("abort",i)}}));t.scheduleAction=(e,t)=>i(void 0,void 0,void 0,(function*(){const{signal:r,delay:o,attempts:d,timeout:p,deadline:g,gap:b}=t,y=g&&g-Date.now(),m=s(d)?d.length:null!=d?d:g?1/0:1,v=new AbortController,_=v.signal,w=s(d)?e=>d[e]:()=>({timeout:p,gap:b});try{return yield n.race([f(r,_),l(y,c,_),a(o,_).then((()=>((e,t,r,s)=>i(void 0,void 0,void 0,(function*(){for(let n=0;n<e-1&&!s.aborted;n++){const e=new AbortController,i=()=>e.abort();s.addEventListener("abort",i);try{return yield t(n,e.signal)}catch(e){i(),yield r(n)}finally{s.removeEventListener("abort",i)}}return s.aborted?n.reject():t(e-1,s)})))(m,((t,r)=>n.race([l(w(t).timeout,u,_),h(e,r)])),(e=>{var t;return a(null!==(t=w(e).gap)&&void 0!==t?t:0,_)}),_)))])}finally{v.abort()}}))},"../utils/lib/throwError.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.throwError=void 0;t.throwError=e=>{throw new Error(e)}},"../utils/lib/topologicalSort.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.topologicalSort=void 0;const n=r("../utils/lib/arrayPartition.js");t.topologicalSort=(e,t,r)=>{const i=[],s=e=>(0,n.arrayPartition)(e,(r=>!e.some((e=>t(e,r)))));let o=e;for(;o.length;){const[e,t]=s(o);if(!e.length)throw new Error("Cycle detected");i.push(...r?e.sort(r):e),o=t}return i}},"../utils/lib/truncateMiddle.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.truncateMiddle=void 0;t.truncateMiddle=(e,t,r)=>{if(e.length<=t+r)return e;return`${e.substring(0,t)}…${e.substring(e.length-r,e.length)}`}},"../utils/lib/typedEventEmitter.js":(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TypedEmitter=void 0;const n=r("../../node_modules/events/events.js");class i extends n.EventEmitter{listenerCount(e){return super.listenerCount(e)}}t.TypedEmitter=i},"../utils/lib/urlToOnion.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.urlToOnion=void 0;t.urlToOnion=(e,t)=>{var r;const[,n,i,s,o]=null!==(r=e.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))&&void 0!==r?r:[];if(s&&t[s])return`${n}://${null!=i?i:""}${t[s]}${null!=o?o:""}`}},"../utils/lib/versionUtils.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.normalizeVersion=t.isNewerOrEqual=t.isEqual=t.isNewer=t.isVersionArray=void 0;t.isVersionArray=e=>{if(!Array.isArray(e))return!1;if(3!==e.length)return!1;for(let t=0;t<e.length;t++){const r=e[t];if("number"!=typeof r||r<0)return!1}return!0};const r=e=>({major:e[0],minor:e[1],patch:e[2]}),n=e=>{const r=e.split(".").map((e=>Number(e)));if(!(0,t.isVersionArray)(r))throw new Error("version string is in wrong format");return r},i=e=>`${e[0]}.${e[1]}.${e[2]}`;t.isNewer=(e,t)=>{const i=r("string"==typeof e?n(e):e),s=r("string"==typeof t?n(t):t);return i.major-s.major!=0?i.major>s.major:i.minor-s.minor!=0?i.minor>s.minor:i.patch-s.patch!=0&&i.patch>s.patch};t.isEqual=(e,t)=>("string"==typeof e?e:i(e))===("string"==typeof t?t:i(t));t.isNewerOrEqual=(e,r)=>(0,t.isNewer)(e,r)||(0,t.isEqual)(e,r);t.normalizeVersion=e=>e.replace(/\b0+(\d)/g,"$1")},"../utils/lib/xssFilters.js":(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.inDoubleQuotes=t.inSingleQuotes=t.inHTML=void 0;const r=/</g,n=/'/g,i=/"/g;t.inHTML=e=>e.replace(r,"&lt;");t.inSingleQuotes=e=>e.replace(n,"&#39;");t.inDoubleQuotes=e=>e.replace(i,"&quot;")},"../../node_modules/base64-js/index.js":(e,t)=>{"use strict";t.byteLength=function(e){var t=c(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,s=c(e),o=s[0],u=s[1],a=new i(function(e,t,r){return 3*(t+r)/4-r}(0,o,u)),l=0,f=u>0?o-4:o;for(r=0;r<f;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],a[l++]=t>>16&255,a[l++]=t>>8&255,a[l++]=255&t;2===u&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,a[l++]=255&t);1===u&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,a[l++]=t>>8&255,a[l++]=255&t);return a},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,s=[],o=16383,c=0,a=n-i;c<a;c+=o)s.push(u(e,c,c+o>a?a:c+o));1===i?(t=e[n-1],s.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],s.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"="));return s.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)r[o]=s[o],n[s.charCodeAt(o)]=o;function c(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function u(e,t,n){for(var i,s,o=[],c=t;c<n;c+=3)i=(e[c]<<16&16711680)+(e[c+1]<<8&65280)+(255&e[c+2]),o.push(r[(s=i)>>18&63]+r[s>>12&63]+r[s>>6&63]+r[63&s]);return o.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},"../../node_modules/bignumber.js/bignumber.js":function(e,t,r){var n;!function(i){"use strict";var s,o=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,c=Math.ceil,u=Math.floor,a="[BigNumber Error] ",l=a+"Number primitive has more than 15 significant digits: ",f=1e14,h=14,d=9007199254740991,p=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],g=1e7,b=1e9;function y(e){var t=0|e;return e>0||e===t?t:t-1}function m(e){for(var t,r,n=1,i=e.length,s=e[0]+"";n<i;){for(t=e[n++]+"",r=h-t.length;r--;t="0"+t);s+=t}for(i=s.length;48===s.charCodeAt(--i););return s.slice(0,i+1||1)}function v(e,t){var r,n,i=e.c,s=t.c,o=e.s,c=t.s,u=e.e,a=t.e;if(!o||!c)return null;if(r=i&&!i[0],n=s&&!s[0],r||n)return r?n?0:-c:o;if(o!=c)return o;if(r=o<0,n=u==a,!i||!s)return n?0:!i^r?1:-1;if(!n)return u>a^r?1:-1;for(c=(u=i.length)<(a=s.length)?u:a,o=0;o<c;o++)if(i[o]!=s[o])return i[o]>s[o]^r?1:-1;return u==a?0:u>a^r?1:-1}function _(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(a+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return y(e.e/h)==t&&e.c[t]%2!=0}function E(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function T(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}s=function e(t){var r,n,i,s,A,S,O,j,k,N,I=z.prototype={constructor:z,toString:null,valueOf:null},C=new z(1),R=20,B=4,P=-7,U=21,M=-1e7,x=1e7,L=!1,F=1,G=0,D={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},H="0123456789abcdefghijklmnopqrstuvwxyz",$=!0;function z(e,t){var r,s,c,a,f,p,g,b,y=this;if(!(y instanceof z))return new z(e,t);if(null==t){if(e&&!0===e._isBigNumber)return y.s=e.s,void(!e.c||e.e>x?y.c=y.e=null:e.e<M?y.c=[y.e=0]:(y.e=e.e,y.c=e.c.slice()));if((p="number"==typeof e)&&0*e==0){if(y.s=1/e<0?(e=-e,-1):1,e===~~e){for(a=0,f=e;f>=10;f/=10,a++);return void(a>x?y.c=y.e=null:(y.e=a,y.c=[e]))}b=String(e)}else{if(!o.test(b=String(e)))return i(y,b,p);y.s=45==b.charCodeAt(0)?(b=b.slice(1),-1):1}(a=b.indexOf("."))>-1&&(b=b.replace(".","")),(f=b.search(/e/i))>0?(a<0&&(a=f),a+=+b.slice(f+1),b=b.substring(0,f)):a<0&&(a=b.length)}else{if(_(t,2,H.length,"Base"),10==t&&$)return q(y=new z(e),R+y.e+1,B);if(b=String(e),p="number"==typeof e){if(0*e!=0)return i(y,b,p,t);if(y.s=1/e<0?(b=b.slice(1),-1):1,z.DEBUG&&b.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else y.s=45===b.charCodeAt(0)?(b=b.slice(1),-1):1;for(r=H.slice(0,t),a=f=0,g=b.length;f<g;f++)if(r.indexOf(s=b.charAt(f))<0){if("."==s){if(f>a){a=g;continue}}else if(!c&&(b==b.toUpperCase()&&(b=b.toLowerCase())||b==b.toLowerCase()&&(b=b.toUpperCase()))){c=!0,f=-1,a=0;continue}return i(y,String(e),p,t)}p=!1,(a=(b=n(b,t,10,y.s)).indexOf("."))>-1?b=b.replace(".",""):a=b.length}for(f=0;48===b.charCodeAt(f);f++);for(g=b.length;48===b.charCodeAt(--g););if(b=b.slice(f,++g)){if(g-=f,p&&z.DEBUG&&g>15&&(e>d||e!==u(e)))throw Error(l+y.s*e);if((a=a-f-1)>x)y.c=y.e=null;else if(a<M)y.c=[y.e=0];else{if(y.e=a,y.c=[],f=(a+1)%h,a<0&&(f+=h),f<g){for(f&&y.c.push(+b.slice(0,f)),g-=h;f<g;)y.c.push(+b.slice(f,f+=h));f=h-(b=b.slice(f)).length}else f-=g;for(;f--;b+="0");y.c.push(+b)}}else y.c=[y.e=0]}function W(e,t,r,n){var i,s,o,c,u;if(null==r?r=B:_(r,0,8),!e.c)return e.toString();if(i=e.c[0],o=e.e,null==t)u=m(e.c),u=1==n||2==n&&(o<=P||o>=U)?E(u,o):T(u,o,"0");else if(s=(e=q(new z(e),t,r)).e,c=(u=m(e.c)).length,1==n||2==n&&(t<=s||s<=P)){for(;c<t;u+="0",c++);u=E(u,s)}else if(t-=o,u=T(u,s,"0"),s+1>c){if(--t>0)for(u+=".";t--;u+="0");}else if((t+=s-c)>0)for(s+1==c&&(u+=".");t--;u+="0");return e.s<0&&i?"-"+u:u}function V(e,t){for(var r,n=1,i=new z(e[0]);n<e.length;n++){if(!(r=new z(e[n])).s){i=r;break}t.call(i,r)&&(i=r)}return i}function K(e,t,r){for(var n=1,i=t.length;!t[--i];t.pop());for(i=t[0];i>=10;i/=10,n++);return(r=n+r*h-1)>x?e.c=e.e=null:r<M?e.c=[e.e=0]:(e.e=r,e.c=t),e}function q(e,t,r,n){var i,s,o,a,l,d,g,b=e.c,y=p;if(b){e:{for(i=1,a=b[0];a>=10;a/=10,i++);if((s=t-i)<0)s+=h,o=t,g=(l=b[d=0])/y[i-o-1]%10|0;else if((d=c((s+1)/h))>=b.length){if(!n)break e;for(;b.length<=d;b.push(0));l=g=0,i=1,o=(s%=h)-h+1}else{for(l=a=b[d],i=1;a>=10;a/=10,i++);g=(o=(s%=h)-h+i)<0?0:l/y[i-o-1]%10|0}if(n=n||t<0||null!=b[d+1]||(o<0?l:l%y[i-o-1]),n=r<4?(g||n)&&(0==r||r==(e.s<0?3:2)):g>5||5==g&&(4==r||n||6==r&&(s>0?o>0?l/y[i-o]:0:b[d-1])%10&1||r==(e.s<0?8:7)),t<1||!b[0])return b.length=0,n?(t-=e.e+1,b[0]=y[(h-t%h)%h],e.e=-t||0):b[0]=e.e=0,e;if(0==s?(b.length=d,a=1,d--):(b.length=d+1,a=y[h-s],b[d]=o>0?u(l/y[i-o]%y[o])*a:0),n)for(;;){if(0==d){for(s=1,o=b[0];o>=10;o/=10,s++);for(o=b[0]+=a,a=1;o>=10;o/=10,a++);s!=a&&(e.e++,b[0]==f&&(b[0]=1));break}if(b[d]+=a,b[d]!=f)break;b[d--]=0,a=1}for(s=b.length;0===b[--s];b.pop());}e.e>x?e.c=e.e=null:e.e<M&&(e.c=[e.e=0])}return e}function Y(e){var t,r=e.e;return null===r?e.toString():(t=m(e.c),t=r<=P||r>=U?E(t,r):T(t,r,"0"),e.s<0?"-"+t:t)}return z.clone=e,z.ROUND_UP=0,z.ROUND_DOWN=1,z.ROUND_CEIL=2,z.ROUND_FLOOR=3,z.ROUND_HALF_UP=4,z.ROUND_HALF_DOWN=5,z.ROUND_HALF_EVEN=6,z.ROUND_HALF_CEIL=7,z.ROUND_HALF_FLOOR=8,z.EUCLID=9,z.config=z.set=function(e){var t,r;if(null!=e){if("object"!=typeof e)throw Error(a+"Object expected: "+e);if(e.hasOwnProperty(t="DECIMAL_PLACES")&&(_(r=e[t],0,b,t),R=r),e.hasOwnProperty(t="ROUNDING_MODE")&&(_(r=e[t],0,8,t),B=r),e.hasOwnProperty(t="EXPONENTIAL_AT")&&((r=e[t])&&r.pop?(_(r[0],-b,0,t),_(r[1],0,b,t),P=r[0],U=r[1]):(_(r,-b,b,t),P=-(U=r<0?-r:r))),e.hasOwnProperty(t="RANGE"))if((r=e[t])&&r.pop)_(r[0],-b,-1,t),_(r[1],1,b,t),M=r[0],x=r[1];else{if(_(r,-b,b,t),!r)throw Error(a+t+" cannot be zero: "+r);M=-(x=r<0?-r:r)}if(e.hasOwnProperty(t="CRYPTO")){if((r=e[t])!==!!r)throw Error(a+t+" not true or false: "+r);if(r){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw L=!r,Error(a+"crypto unavailable");L=r}else L=r}if(e.hasOwnProperty(t="MODULO_MODE")&&(_(r=e[t],0,9,t),F=r),e.hasOwnProperty(t="POW_PRECISION")&&(_(r=e[t],0,b,t),G=r),e.hasOwnProperty(t="FORMAT")){if("object"!=typeof(r=e[t]))throw Error(a+t+" not an object: "+r);D=r}if(e.hasOwnProperty(t="ALPHABET")){if("string"!=typeof(r=e[t])||/^.?$|[+\-.\s]|(.).*\1/.test(r))throw Error(a+t+" invalid: "+r);$="0123456789"==r.slice(0,10),H=r}}return{DECIMAL_PLACES:R,ROUNDING_MODE:B,EXPONENTIAL_AT:[P,U],RANGE:[M,x],CRYPTO:L,MODULO_MODE:F,POW_PRECISION:G,FORMAT:D,ALPHABET:H}},z.isBigNumber=function(e){if(!e||!0!==e._isBigNumber)return!1;if(!z.DEBUG)return!0;var t,r,n=e.c,i=e.e,s=e.s;e:if("[object Array]"=={}.toString.call(n)){if((1===s||-1===s)&&i>=-b&&i<=b&&i===u(i)){if(0===n[0]){if(0===i&&1===n.length)return!0;break e}if((t=(i+1)%h)<1&&(t+=h),String(n[0]).length==t){for(t=0;t<n.length;t++)if((r=n[t])<0||r>=f||r!==u(r))break e;if(0!==r)return!0}}}else if(null===n&&null===i&&(null===s||1===s||-1===s))return!0;throw Error(a+"Invalid BigNumber: "+e)},z.maximum=z.max=function(){return V(arguments,I.lt)},z.minimum=z.min=function(){return V(arguments,I.gt)},z.random=(s=9007199254740992,A=Math.random()*s&2097151?function(){return u(Math.random()*s)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(e){var t,r,n,i,s,o=0,l=[],f=new z(C);if(null==e?e=R:_(e,0,b),i=c(e/h),L)if(crypto.getRandomValues){for(t=crypto.getRandomValues(new Uint32Array(i*=2));o<i;)(s=131072*t[o]+(t[o+1]>>>11))>=9e15?(r=crypto.getRandomValues(new Uint32Array(2)),t[o]=r[0],t[o+1]=r[1]):(l.push(s%1e14),o+=2);o=i/2}else{if(!crypto.randomBytes)throw L=!1,Error(a+"crypto unavailable");for(t=crypto.randomBytes(i*=7);o<i;)(s=281474976710656*(31&t[o])+1099511627776*t[o+1]+4294967296*t[o+2]+16777216*t[o+3]+(t[o+4]<<16)+(t[o+5]<<8)+t[o+6])>=9e15?crypto.randomBytes(7).copy(t,o):(l.push(s%1e14),o+=7);o=i/7}if(!L)for(;o<i;)(s=A())<9e15&&(l[o++]=s%1e14);for(i=l[--o],e%=h,i&&e&&(s=p[h-e],l[o]=u(i/s)*s);0===l[o];l.pop(),o--);if(o<0)l=[n=0];else{for(n=-1;0===l[0];l.splice(0,1),n-=h);for(o=1,s=l[0];s>=10;s/=10,o++);o<h&&(n-=h-o)}return f.e=n,f.c=l,f}),z.sum=function(){for(var e=1,t=arguments,r=new z(t[0]);e<t.length;)r=r.plus(t[e++]);return r},n=function(){var e="0123456789";function t(e,t,r,n){for(var i,s,o=[0],c=0,u=e.length;c<u;){for(s=o.length;s--;o[s]*=t);for(o[0]+=n.indexOf(e.charAt(c++)),i=0;i<o.length;i++)o[i]>r-1&&(null==o[i+1]&&(o[i+1]=0),o[i+1]+=o[i]/r|0,o[i]%=r)}return o.reverse()}return function(n,i,s,o,c){var u,a,l,f,h,d,p,g,b=n.indexOf("."),y=R,v=B;for(b>=0&&(f=G,G=0,n=n.replace(".",""),d=(g=new z(i)).pow(n.length-b),G=f,g.c=t(T(m(d.c),d.e,"0"),10,s,e),g.e=g.c.length),l=f=(p=t(n,i,s,c?(u=H,e):(u=e,H))).length;0==p[--f];p.pop());if(!p[0])return u.charAt(0);if(b<0?--l:(d.c=p,d.e=l,d.s=o,p=(d=r(d,g,y,v,s)).c,h=d.r,l=d.e),b=p[a=l+y+1],f=s/2,h=h||a<0||null!=p[a+1],h=v<4?(null!=b||h)&&(0==v||v==(d.s<0?3:2)):b>f||b==f&&(4==v||h||6==v&&1&p[a-1]||v==(d.s<0?8:7)),a<1||!p[0])n=h?T(u.charAt(1),-y,u.charAt(0)):u.charAt(0);else{if(p.length=a,h)for(--s;++p[--a]>s;)p[a]=0,a||(++l,p=[1].concat(p));for(f=p.length;!p[--f];);for(b=0,n="";b<=f;n+=u.charAt(p[b++]));n=T(n,l,u.charAt(0))}return n}}(),r=function(){function e(e,t,r){var n,i,s,o,c=0,u=e.length,a=t%g,l=t/g|0;for(e=e.slice();u--;)c=((i=a*(s=e[u]%g)+(n=l*s+(o=e[u]/g|0)*a)%g*g+c)/r|0)+(n/g|0)+l*o,e[u]=i%r;return c&&(e=[c].concat(e)),e}function t(e,t,r,n){var i,s;if(r!=n)s=r>n?1:-1;else for(i=s=0;i<r;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function r(e,t,r,n){for(var i=0;r--;)e[r]-=i,i=e[r]<t[r]?1:0,e[r]=i*n+e[r]-t[r];for(;!e[0]&&e.length>1;e.splice(0,1));}return function(n,i,s,o,c){var a,l,d,p,g,b,m,v,_,w,E,T,A,S,O,j,k,N=n.s==i.s?1:-1,I=n.c,C=i.c;if(!(I&&I[0]&&C&&C[0]))return new z(n.s&&i.s&&(I?!C||I[0]!=C[0]:C)?I&&0==I[0]||!C?0*N:N/0:NaN);for(_=(v=new z(N)).c=[],N=s+(l=n.e-i.e)+1,c||(c=f,l=y(n.e/h)-y(i.e/h),N=N/h|0),d=0;C[d]==(I[d]||0);d++);if(C[d]>(I[d]||0)&&l--,N<0)_.push(1),p=!0;else{for(S=I.length,j=C.length,d=0,N+=2,(g=u(c/(C[0]+1)))>1&&(C=e(C,g,c),I=e(I,g,c),j=C.length,S=I.length),A=j,E=(w=I.slice(0,j)).length;E<j;w[E++]=0);k=C.slice(),k=[0].concat(k),O=C[0],C[1]>=c/2&&O++;do{if(g=0,(a=t(C,w,j,E))<0){if(T=w[0],j!=E&&(T=T*c+(w[1]||0)),(g=u(T/O))>1)for(g>=c&&(g=c-1),m=(b=e(C,g,c)).length,E=w.length;1==t(b,w,m,E);)g--,r(b,j<m?k:C,m,c),m=b.length,a=1;else 0==g&&(a=g=1),m=(b=C.slice()).length;if(m<E&&(b=[0].concat(b)),r(w,b,E,c),E=w.length,-1==a)for(;t(C,w,j,E)<1;)g++,r(w,j<E?k:C,E,c),E=w.length}else 0===a&&(g++,w=[0]);_[d++]=g,w[0]?w[E++]=I[A]||0:(w=[I[A]],E=1)}while((A++<S||null!=w[0])&&N--);p=null!=w[0],_[0]||_.splice(0,1)}if(c==f){for(d=1,N=_[0];N>=10;N/=10,d++);q(v,s+(v.e=d+l*h-1)+1,o,p)}else v.e=l,v.r=+p;return v}}(),S=/^(-?)0([xbo])(?=\w[\w.]*$)/i,O=/^([^.]+)\.$/,j=/^\.([^.]+)$/,k=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g,i=function(e,t,r,n){var i,s=r?t:t.replace(N,"");if(k.test(s))e.s=isNaN(s)?null:s<0?-1:1;else{if(!r&&(s=s.replace(S,(function(e,t,r){return i="x"==(r=r.toLowerCase())?16:"b"==r?2:8,n&&n!=i?e:t})),n&&(i=n,s=s.replace(O,"$1").replace(j,"0.$1")),t!=s))return new z(s,i);if(z.DEBUG)throw Error(a+"Not a"+(n?" base "+n:"")+" number: "+t);e.s=null}e.c=e.e=null},I.absoluteValue=I.abs=function(){var e=new z(this);return e.s<0&&(e.s=1),e},I.comparedTo=function(e,t){return v(this,new z(e,t))},I.decimalPlaces=I.dp=function(e,t){var r,n,i,s=this;if(null!=e)return _(e,0,b),null==t?t=B:_(t,0,8),q(new z(s),e+s.e+1,t);if(!(r=s.c))return null;if(n=((i=r.length-1)-y(this.e/h))*h,i=r[i])for(;i%10==0;i/=10,n--);return n<0&&(n=0),n},I.dividedBy=I.div=function(e,t){return r(this,new z(e,t),R,B)},I.dividedToIntegerBy=I.idiv=function(e,t){return r(this,new z(e,t),0,1)},I.exponentiatedBy=I.pow=function(e,t){var r,n,i,s,o,l,f,d,p=this;if((e=new z(e)).c&&!e.isInteger())throw Error(a+"Exponent not an integer: "+Y(e));if(null!=t&&(t=new z(t)),o=e.e>14,!p.c||!p.c[0]||1==p.c[0]&&!p.e&&1==p.c.length||!e.c||!e.c[0])return d=new z(Math.pow(+Y(p),o?e.s*(2-w(e)):+Y(e))),t?d.mod(t):d;if(l=e.s<0,t){if(t.c?!t.c[0]:!t.s)return new z(NaN);(n=!l&&p.isInteger()&&t.isInteger())&&(p=p.mod(t))}else{if(e.e>9&&(p.e>0||p.e<-1||(0==p.e?p.c[0]>1||o&&p.c[1]>=24e7:p.c[0]<8e13||o&&p.c[0]<=9999975e7)))return s=p.s<0&&w(e)?-0:0,p.e>-1&&(s=1/s),new z(l?1/s:s);G&&(s=c(G/h+2))}for(o?(r=new z(.5),l&&(e.s=1),f=w(e)):f=(i=Math.abs(+Y(e)))%2,d=new z(C);;){if(f){if(!(d=d.times(p)).c)break;s?d.c.length>s&&(d.c.length=s):n&&(d=d.mod(t))}if(i){if(0===(i=u(i/2)))break;f=i%2}else if(q(e=e.times(r),e.e+1,1),e.e>14)f=w(e);else{if(0===(i=+Y(e)))break;f=i%2}p=p.times(p),s?p.c&&p.c.length>s&&(p.c.length=s):n&&(p=p.mod(t))}return n?d:(l&&(d=C.div(d)),t?d.mod(t):s?q(d,G,B,undefined):d)},I.integerValue=function(e){var t=new z(this);return null==e?e=B:_(e,0,8),q(t,t.e+1,e)},I.isEqualTo=I.eq=function(e,t){return 0===v(this,new z(e,t))},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(e,t){return v(this,new z(e,t))>0},I.isGreaterThanOrEqualTo=I.gte=function(e,t){return 1===(t=v(this,new z(e,t)))||0===t},I.isInteger=function(){return!!this.c&&y(this.e/h)>this.c.length-2},I.isLessThan=I.lt=function(e,t){return v(this,new z(e,t))<0},I.isLessThanOrEqualTo=I.lte=function(e,t){return-1===(t=v(this,new z(e,t)))||0===t},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&0==this.c[0]},I.minus=function(e,t){var r,n,i,s,o=this,c=o.s;if(t=(e=new z(e,t)).s,!c||!t)return new z(NaN);if(c!=t)return e.s=-t,o.plus(e);var u=o.e/h,a=e.e/h,l=o.c,d=e.c;if(!u||!a){if(!l||!d)return l?(e.s=-t,e):new z(d?o:NaN);if(!l[0]||!d[0])return d[0]?(e.s=-t,e):new z(l[0]?o:3==B?-0:0)}if(u=y(u),a=y(a),l=l.slice(),c=u-a){for((s=c<0)?(c=-c,i=l):(a=u,i=d),i.reverse(),t=c;t--;i.push(0));i.reverse()}else for(n=(s=(c=l.length)<(t=d.length))?c:t,c=t=0;t<n;t++)if(l[t]!=d[t]){s=l[t]<d[t];break}if(s&&(i=l,l=d,d=i,e.s=-e.s),(t=(n=d.length)-(r=l.length))>0)for(;t--;l[r++]=0);for(t=f-1;n>c;){if(l[--n]<d[n]){for(r=n;r&&!l[--r];l[r]=t);--l[r],l[n]+=f}l[n]-=d[n]}for(;0==l[0];l.splice(0,1),--a);return l[0]?K(e,l,a):(e.s=3==B?-1:1,e.c=[e.e=0],e)},I.modulo=I.mod=function(e,t){var n,i,s=this;return e=new z(e,t),!s.c||!e.s||e.c&&!e.c[0]?new z(NaN):!e.c||s.c&&!s.c[0]?new z(s):(9==F?(i=e.s,e.s=1,n=r(s,e,0,3),e.s=i,n.s*=i):n=r(s,e,0,F),(e=s.minus(n.times(e))).c[0]||1!=F||(e.s=s.s),e)},I.multipliedBy=I.times=function(e,t){var r,n,i,s,o,c,u,a,l,d,p,b,m,v,_,w=this,E=w.c,T=(e=new z(e,t)).c;if(!(E&&T&&E[0]&&T[0]))return!w.s||!e.s||E&&!E[0]&&!T||T&&!T[0]&&!E?e.c=e.e=e.s=null:(e.s*=w.s,E&&T?(e.c=[0],e.e=0):e.c=e.e=null),e;for(n=y(w.e/h)+y(e.e/h),e.s*=w.s,(u=E.length)<(d=T.length)&&(m=E,E=T,T=m,i=u,u=d,d=i),i=u+d,m=[];i--;m.push(0));for(v=f,_=g,i=d;--i>=0;){for(r=0,p=T[i]%_,b=T[i]/_|0,s=i+(o=u);s>i;)r=((a=p*(a=E[--o]%_)+(c=b*a+(l=E[o]/_|0)*p)%_*_+m[s]+r)/v|0)+(c/_|0)+b*l,m[s--]=a%v;m[s]=r}return r?++n:m.splice(0,1),K(e,m,n)},I.negated=function(){var e=new z(this);return e.s=-e.s||null,e},I.plus=function(e,t){var r,n=this,i=n.s;if(t=(e=new z(e,t)).s,!i||!t)return new z(NaN);if(i!=t)return e.s=-t,n.minus(e);var s=n.e/h,o=e.e/h,c=n.c,u=e.c;if(!s||!o){if(!c||!u)return new z(i/0);if(!c[0]||!u[0])return u[0]?e:new z(c[0]?n:0*i)}if(s=y(s),o=y(o),c=c.slice(),i=s-o){for(i>0?(o=s,r=u):(i=-i,r=c),r.reverse();i--;r.push(0));r.reverse()}for((i=c.length)-(t=u.length)<0&&(r=u,u=c,c=r,t=i),i=0;t;)i=(c[--t]=c[t]+u[t]+i)/f|0,c[t]=f===c[t]?0:c[t]%f;return i&&(c=[i].concat(c),++o),K(e,c,o)},I.precision=I.sd=function(e,t){var r,n,i,s=this;if(null!=e&&e!==!!e)return _(e,1,b),null==t?t=B:_(t,0,8),q(new z(s),e,t);if(!(r=s.c))return null;if(n=(i=r.length-1)*h+1,i=r[i]){for(;i%10==0;i/=10,n--);for(i=r[0];i>=10;i/=10,n++);}return e&&s.e+1>n&&(n=s.e+1),n},I.shiftedBy=function(e){return _(e,-9007199254740991,d),this.times("1e"+e)},I.squareRoot=I.sqrt=function(){var e,t,n,i,s,o=this,c=o.c,u=o.s,a=o.e,l=R+4,f=new z("0.5");if(1!==u||!c||!c[0])return new z(!u||u<0&&(!c||c[0])?NaN:c?o:1/0);if(0==(u=Math.sqrt(+Y(o)))||u==1/0?(((t=m(c)).length+a)%2==0&&(t+="0"),u=Math.sqrt(+t),a=y((a+1)/2)-(a<0||a%2),n=new z(t=u==1/0?"5e"+a:(t=u.toExponential()).slice(0,t.indexOf("e")+1)+a)):n=new z(u+""),n.c[0])for((u=(a=n.e)+l)<3&&(u=0);;)if(s=n,n=f.times(s.plus(r(o,s,l,1))),m(s.c).slice(0,u)===(t=m(n.c)).slice(0,u)){if(n.e<a&&--u,"9999"!=(t=t.slice(u-3,u+1))&&(i||"4999"!=t)){+t&&(+t.slice(1)||"5"!=t.charAt(0))||(q(n,n.e+R+2,1),e=!n.times(n).eq(o));break}if(!i&&(q(s,s.e+R+2,0),s.times(s).eq(o))){n=s;break}l+=4,u+=4,i=1}return q(n,n.e+R+1,B,e)},I.toExponential=function(e,t){return null!=e&&(_(e,0,b),e++),W(this,e,t,1)},I.toFixed=function(e,t){return null!=e&&(_(e,0,b),e=e+this.e+1),W(this,e,t)},I.toFormat=function(e,t,r){var n,i=this;if(null==r)null!=e&&t&&"object"==typeof t?(r=t,t=null):e&&"object"==typeof e?(r=e,e=t=null):r=D;else if("object"!=typeof r)throw Error(a+"Argument not an object: "+r);if(n=i.toFixed(e,t),i.c){var s,o=n.split("."),c=+r.groupSize,u=+r.secondaryGroupSize,l=r.groupSeparator||"",f=o[0],h=o[1],d=i.s<0,p=d?f.slice(1):f,g=p.length;if(u&&(s=c,c=u,u=s,g-=s),c>0&&g>0){for(s=g%c||c,f=p.substr(0,s);s<g;s+=c)f+=l+p.substr(s,c);u>0&&(f+=l+p.slice(s)),d&&(f="-"+f)}n=h?f+(r.decimalSeparator||"")+((u=+r.fractionGroupSize)?h.replace(new RegExp("\\d{"+u+"}\\B","g"),"$&"+(r.fractionGroupSeparator||"")):h):f}return(r.prefix||"")+n+(r.suffix||"")},I.toFraction=function(e){var t,n,i,s,o,c,u,l,f,d,g,b,y=this,v=y.c;if(null!=e&&(!(u=new z(e)).isInteger()&&(u.c||1!==u.s)||u.lt(C)))throw Error(a+"Argument "+(u.isInteger()?"out of range: ":"not an integer: ")+Y(u));if(!v)return new z(y);for(t=new z(C),f=n=new z(C),i=l=new z(C),b=m(v),o=t.e=b.length-y.e-1,t.c[0]=p[(c=o%h)<0?h+c:c],e=!e||u.comparedTo(t)>0?o>0?t:f:u,c=x,x=1/0,u=new z(b),l.c[0]=0;d=r(u,t,0,1),1!=(s=n.plus(d.times(i))).comparedTo(e);)n=i,i=s,f=l.plus(d.times(s=f)),l=s,t=u.minus(d.times(s=t)),u=s;return s=r(e.minus(n),i,0,1),l=l.plus(s.times(f)),n=n.plus(s.times(i)),l.s=f.s=y.s,g=r(f,i,o*=2,B).minus(y).abs().comparedTo(r(l,n,o,B).minus(y).abs())<1?[f,i]:[l,n],x=c,g},I.toNumber=function(){return+Y(this)},I.toPrecision=function(e,t){return null!=e&&_(e,1,b),W(this,e,t,2)},I.toString=function(e){var t,r=this,i=r.s,s=r.e;return null===s?i?(t="Infinity",i<0&&(t="-"+t)):t="NaN":(null==e?t=s<=P||s>=U?E(m(r.c),s):T(m(r.c),s,"0"):10===e&&$?t=T(m((r=q(new z(r),R+s+1,B)).c),r.e,"0"):(_(e,2,H.length,"Base"),t=n(T(m(r.c),s,"0"),10,e,i,!0)),i<0&&r.c[0]&&(t="-"+t)),t},I.valueOf=I.toJSON=function(){return Y(this)},I._isBigNumber=!0,null!=t&&z.set(t),z}(),s.default=s.BigNumber=s,void 0===(n=function(){return s}.call(t,r,t,e))||(e.exports=n)}()},"../../node_modules/buffer/index.js":(e,t,r)=>{"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
const n=r("../../node_modules/base64-js/index.js"),i=r("../../node_modules/ieee754/index.js"),s="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.lW=Buffer,t.h2=50;const o=2147483647;function c(e){if(e>o)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,Buffer.prototype),t}function Buffer(e,t,r){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,r)}function u(e,t,r){if("string"==typeof e)return function(e,t){"string"==typeof t&&""!==t||(t="utf8");if(!Buffer.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const r=0|p(e,t);let n=c(r);const i=n.write(e,t);i!==r&&(n=n.slice(0,i));return n}(e,t);if(ArrayBuffer.isView(e))return function(e){if(q(e,Uint8Array)){const t=new Uint8Array(e);return h(t.buffer,t.byteOffset,t.byteLength)}return f(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(q(e,ArrayBuffer)||e&&q(e.buffer,ArrayBuffer))return h(e,t,r);if("undefined"!=typeof SharedArrayBuffer&&(q(e,SharedArrayBuffer)||e&&q(e.buffer,SharedArrayBuffer)))return h(e,t,r);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=e.valueOf&&e.valueOf();if(null!=n&&n!==e)return Buffer.from(n,t,r);const i=function(e){if(Buffer.isBuffer(e)){const t=0|d(e.length),r=c(t);return 0===r.length||e.copy(r,0,0,t),r}if(void 0!==e.length)return"number"!=typeof e.length||Y(e.length)?c(0):f(e);if("Buffer"===e.type&&Array.isArray(e.data))return f(e.data)}(e);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return Buffer.from(e[Symbol.toPrimitive]("string"),t,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function a(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return a(e),c(e<0?0:0|d(e))}function f(e){const t=e.length<0?0:0|d(e.length),r=c(t);for(let n=0;n<t;n+=1)r[n]=255&e[n];return r}function h(e,t,r){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===t&&void 0===r?new Uint8Array(e):void 0===r?new Uint8Array(e,t):new Uint8Array(e,t,r),Object.setPrototypeOf(n,Buffer.prototype),n}function d(e){if(e>=o)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+o.toString(16)+" bytes");return 0|e}function p(e,t){if(Buffer.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const r=e.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(i)return n?-1:W(e).length;t=(""+t).toLowerCase(),i=!0}}function g(e,t,r){let n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return j(this,t,r);case"latin1":case"binary":return k(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return I(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}function b(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function y(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=Buffer.from(t,n)),Buffer.isBuffer(t))return 0===t.length?-1:m(e,t,r,n,i);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):m(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function m(e,t,r,n,i){let s,o=1,c=e.length,u=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;o=2,c/=2,u/=2,r/=2}function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}if(i){let n=-1;for(s=r;s<c;s++)if(a(e,s)===a(t,-1===n?0:s-n)){if(-1===n&&(n=s),s-n+1===u)return n*o}else-1!==n&&(s-=s-n),n=-1}else for(r+u>c&&(r=c-u),s=r;s>=0;s--){let r=!0;for(let n=0;n<u;n++)if(a(e,s+n)!==a(t,n)){r=!1;break}if(r)return s}return-1}function v(e,t,r,n){r=Number(r)||0;const i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;const s=t.length;let o;for(n>s/2&&(n=s/2),o=0;o<n;++o){const n=parseInt(t.substr(2*o,2),16);if(Y(n))return o;e[r+o]=n}return o}function _(e,t,r,n){return K(W(t,e.length-r),e,r,n)}function w(e,t,r,n){return K(function(e){const t=[];for(let r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function E(e,t,r,n){return K(V(t),e,r,n)}function T(e,t,r,n){return K(function(e,t){let r,n,i;const s=[];for(let o=0;o<e.length&&!((t-=2)<0);++o)r=e.charCodeAt(o),n=r>>8,i=r%256,s.push(i),s.push(n);return s}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);const n=[];let i=t;for(;i<r;){const t=e[i];let s=null,o=t>239?4:t>223?3:t>191?2:1;if(i+o<=r){let r,n,c,u;switch(o){case 1:t<128&&(s=t);break;case 2:r=e[i+1],128==(192&r)&&(u=(31&t)<<6|63&r,u>127&&(s=u));break;case 3:r=e[i+1],n=e[i+2],128==(192&r)&&128==(192&n)&&(u=(15&t)<<12|(63&r)<<6|63&n,u>2047&&(u<55296||u>57343)&&(s=u));break;case 4:r=e[i+1],n=e[i+2],c=e[i+3],128==(192&r)&&128==(192&n)&&128==(192&c)&&(u=(15&t)<<18|(63&r)<<12|(63&n)<<6|63&c,u>65535&&u<1114112&&(s=u))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=o}return function(e){const t=e.length;if(t<=O)return String.fromCharCode.apply(String,e);let r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=O));return r}(n)}Buffer.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(e,t,r){return u(e,t,r)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(e,t,r){return function(e,t,r){return a(e),e<=0?c(e):void 0!==t?"string"==typeof r?c(e).fill(t,r):c(e).fill(t):c(e)}(e,t,r)},Buffer.allocUnsafe=function(e){return l(e)},Buffer.allocUnsafeSlow=function(e){return l(e)},Buffer.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==Buffer.prototype},Buffer.compare=function(e,t){if(q(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),q(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(e)||!Buffer.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let r=e.length,n=t.length;for(let i=0,s=Math.min(r,n);i<s;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return Buffer.alloc(0);let r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;const n=Buffer.allocUnsafe(t);let i=0;for(r=0;r<e.length;++r){let t=e[r];if(q(t,Uint8Array))i+t.length>n.length?(Buffer.isBuffer(t)||(t=Buffer.from(t)),t.copy(n,i)):Uint8Array.prototype.set.call(n,t,i);else{if(!Buffer.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(n,i)}i+=t.length}return n},Buffer.byteLength=p,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)b(this,t,t+1);return this},Buffer.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)b(this,t,t+3),b(this,t+1,t+2);return this},Buffer.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)b(this,t,t+7),b(this,t+1,t+6),b(this,t+2,t+5),b(this,t+3,t+4);return this},Buffer.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(e){if(!Buffer.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===Buffer.compare(this,e)},Buffer.prototype.inspect=function(){let e="";const r=t.h2;return e=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(e+=" ... "),"<Buffer "+e+">"},s&&(Buffer.prototype[s]=Buffer.prototype.inspect),Buffer.prototype.compare=function(e,t,r,n,i){if(q(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(this===e)return 0;let s=(i>>>=0)-(n>>>=0),o=(r>>>=0)-(t>>>=0);const c=Math.min(s,o),u=this.slice(n,i),a=e.slice(t,r);for(let e=0;e<c;++e)if(u[e]!==a[e]){s=u[e],o=a[e];break}return s<o?-1:o<s?1:0},Buffer.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},Buffer.prototype.indexOf=function(e,t,r){return y(this,e,t,r,!0)},Buffer.prototype.lastIndexOf=function(e,t,r){return y(this,e,t,r,!1)},Buffer.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let s=!1;for(;;)switch(n){case"hex":return v(this,e,t,r);case"utf8":case"utf-8":return _(this,e,t,r);case"ascii":case"latin1":case"binary":return w(this,e,t,r);case"base64":return E(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(s)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),s=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const O=4096;function j(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function k(e,t,r){let n="";r=Math.min(e.length,r);for(let i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){const n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=t;n<r;++n)i+=X[e[n]];return i}function I(e,t,r){const n=e.slice(t,r);let i="";for(let e=0;e<n.length-1;e+=2)i+=String.fromCharCode(n[e]+256*n[e+1]);return i}function C(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function R(e,t,r,n,i,s){if(!Buffer.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<s)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function B(e,t,r,n,i){D(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s,s>>=8,e[r++]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,o>>=8,e[r++]=o,r}function P(e,t,r,n,i){D(t,n,i,e,r,7);let s=Number(t&BigInt(4294967295));e[r+7]=s,s>>=8,e[r+6]=s,s>>=8,e[r+5]=s,s>>=8,e[r+4]=s;let o=Number(t>>BigInt(32)&BigInt(4294967295));return e[r+3]=o,o>>=8,e[r+2]=o,o>>=8,e[r+1]=o,o>>=8,e[r]=o,r+8}function U(e,t,r,n,i,s){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function M(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function x(e,t,r,n,s){return t=+t,r>>>=0,s||U(e,0,r,8),i.write(e,t,r,n,52,8),r+8}Buffer.prototype.slice=function(e,t){const r=this.length;(e=~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),(t=void 0===t?r:~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),t<e&&(t=e);const n=this.subarray(e,t);return Object.setPrototypeOf(n,Buffer.prototype),n},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return n},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e+--t],i=1;for(;t>0&&(i*=256);)n+=this[e+--t]*i;return n},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),this[e]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]|this[e+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(e,t){return e>>>=0,t||C(e,2,this.length),this[e]<<8|this[e+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},Buffer.prototype.readBigUInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,i=this[++e]+256*this[++e]+65536*this[++e]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=t*2**24+65536*this[++e]+256*this[++e]+this[++e],i=this[++e]*2**24+65536*this[++e]+256*this[++e]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),Buffer.prototype.readIntLE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=this[e],i=1,s=0;for(;++s<t&&(i*=256);)n+=this[e+s]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*t)),n},Buffer.prototype.readIntBE=function(e,t,r){e>>>=0,t>>>=0,r||C(e,t,this.length);let n=t,i=1,s=this[e+--n];for(;n>0&&(i*=256);)s+=this[e+--n]*i;return i*=128,s>=i&&(s-=Math.pow(2,8*t)),s},Buffer.prototype.readInt8=function(e,t){return e>>>=0,t||C(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},Buffer.prototype.readInt16LE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(e,t){e>>>=0,t||C(e,2,this.length);const r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},Buffer.prototype.readInt32BE=function(e,t){return e>>>=0,t||C(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},Buffer.prototype.readBigInt64LE=J((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=this[e+4]+256*this[e+5]+65536*this[e+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),Buffer.prototype.readBigInt64BE=J((function(e){H(e>>>=0,"offset");const t=this[e],r=this[e+7];void 0!==t&&void 0!==r||$(e,this.length-8);const n=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(n)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+r)})),Buffer.prototype.readFloatLE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!0,23,4)},Buffer.prototype.readFloatBE=function(e,t){return e>>>=0,t||C(e,4,this.length),i.read(this,e,!1,23,4)},Buffer.prototype.readDoubleLE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!0,52,8)},Buffer.prototype.readDoubleBE=function(e,t){return e>>>=0,t||C(e,8,this.length),i.read(this,e,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=1,s=0;for(this[t]=255&e;++s<r&&(i*=256);)this[t+s]=e/i&255;return t+r},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(e,t,r,n){if(e=+e,t>>>=0,r>>>=0,!n){R(this,e,t,r,Math.pow(2,8*r)-1,0)}let i=r-1,s=1;for(this[t+i]=255&e;--i>=0&&(s*=256);)this[t+i]=e/s&255;return t+r},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,255,0),this[t]=255&e,t+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigUInt64LE=J((function(e,t=0){return B(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=J((function(e,t=0){return P(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=0,s=1,o=0;for(this[t]=255&e;++i<r&&(s*=256);)e<0&&0===o&&0!==this[t+i-1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},Buffer.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t>>>=0,!n){const n=Math.pow(2,8*r-1);R(this,e,t,r,n-1,-n)}let i=r-1,s=1,o=0;for(this[t+i]=255&e;--i>=0&&(s*=256);)e<0&&0===o&&0!==this[t+i+1]&&(o=1),this[t+i]=(e/s>>0)-o&255;return t+r},Buffer.prototype.writeInt8=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},Buffer.prototype.writeInt16LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},Buffer.prototype.writeInt16BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},Buffer.prototype.writeInt32LE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},Buffer.prototype.writeInt32BE=function(e,t,r){return e=+e,t>>>=0,r||R(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},Buffer.prototype.writeBigInt64LE=J((function(e,t=0){return B(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=J((function(e,t=0){return P(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function(e,t,r){return M(this,e,t,!0,r)},Buffer.prototype.writeFloatBE=function(e,t,r){return M(this,e,t,!1,r)},Buffer.prototype.writeDoubleLE=function(e,t,r){return x(this,e,t,!0,r)},Buffer.prototype.writeDoubleBE=function(e,t,r){return x(this,e,t,!1,r)},Buffer.prototype.copy=function(e,t,r,n){if(!Buffer.isBuffer(e))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);const i=n-r;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,r,n):Uint8Array.prototype.set.call(e,this.subarray(r,n),t),i},Buffer.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===e.length){const t=e.charCodeAt(0);("utf8"===n&&t<128||"latin1"===n)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;let i;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(i=t;i<r;++i)this[i]=e;else{const s=Buffer.isBuffer(e)?e:Buffer.from(e,n),o=s.length;if(0===o)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(i=0;i<r-t;++i)this[i+t]=s[i%o]}return this};const L={};function F(e,t,r){L[e]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function G(e){let t="",r=e.length;const n="-"===e[0]?1:0;for(;r>=n+4;r-=3)t=`_${e.slice(r-3,r)}${t}`;return`${e.slice(0,r)}${t}`}function D(e,t,r,n,i,s){if(e>r||e<t){const n="bigint"==typeof t?"n":"";let i;throw i=s>3?0===t||t===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(s+1)}${n}`:`>= -(2${n} ** ${8*(s+1)-1}${n}) and < 2 ** ${8*(s+1)-1}${n}`:`>= ${t}${n} and <= ${r}${n}`,new L.ERR_OUT_OF_RANGE("value",i,e)}!function(e,t,r){H(t,"offset"),void 0!==e[t]&&void 0!==e[t+r]||$(t,e.length-(r+1))}(n,i,s)}function H(e,t){if("number"!=typeof e)throw new L.ERR_INVALID_ARG_TYPE(t,"number",e)}function $(e,t,r){if(Math.floor(e)!==e)throw H(e,r),new L.ERR_OUT_OF_RANGE(r||"offset","an integer",e);if(t<0)throw new L.ERR_BUFFER_OUT_OF_BOUNDS;throw new L.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${t}`,e)}F("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),F("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),F("ERR_OUT_OF_RANGE",(function(e,t,r){let n=`The value of "${e}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=G(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=G(i)),i+="n"),n+=` It must be ${t}. Received ${i}`,n}),RangeError);const z=/[^+/0-9A-Za-z-_]/g;function W(e,t){let r;t=t||1/0;const n=e.length;let i=null;const s=[];for(let o=0;o<n;++o){if(r=e.charCodeAt(o),r>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&s.push(239,191,189);continue}if(o+1===n){(t-=3)>-1&&s.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&s.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&s.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;s.push(r)}else if(r<2048){if((t-=2)<0)break;s.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;s.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;s.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return s}function V(e){return n.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace(z,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function K(e,t,r,n){let i;for(i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}function q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Y(e){return e!=e}const X=function(){const e="0123456789abcdef",t=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)t[n+i]=e[r]+e[i]}return t}();function J(e){return"undefined"==typeof BigInt?Z:e}function Z(){throw new Error("BigInt not supported")}},"../../node_modules/es6-promise/dist/es6-promise.js":function(e,t,r){var n=r("../../node_modules/process/browser.js");
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */e.exports=function(){"use strict";function e(e){var t=typeof e;return null!==e&&("object"===t||"function"===t)}function t(e){return"function"==typeof e}var i=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},s=0,o=void 0,c=void 0,u=function(e,t){w[s]=e,w[s+1]=t,2===(s+=2)&&(c?c(E):A())};function a(e){c=e}function l(e){u=e}var f="undefined"!=typeof window?window:void 0,h=f||{},d=h.MutationObserver||h.WebKitMutationObserver,p="undefined"==typeof self&&"[object process]"==={}.toString.call(n),g="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function b(){return function(){return n.nextTick(E)}}function y(){return void 0!==o?function(){o(E)}:_()}function m(){var e=0,t=new d(E),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function v(){var e=new MessageChannel;return e.port1.onmessage=E,function(){return e.port2.postMessage(0)}}function _(){var e=setTimeout;return function(){return e(E,1)}}var w=new Array(1e3);function E(){for(var e=0;e<s;e+=2)(0,w[e])(w[e+1]),w[e]=void 0,w[e+1]=void 0;s=0}function T(){try{var e=Function("return this")().require("vertx");return o=e.runOnLoop||e.runOnContext,y()}catch(e){return _()}}var A=void 0;function S(e,t){var r=this,n=new this.constructor(k);void 0===n[j]&&q(n);var i=r._state;if(i){var s=arguments[i-1];u((function(){return z(i,n,s,r._result)}))}else H(r,n,e,t);return n}function O(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var r=new t(k);return L(r,e),r}A=p?b():d?m():g?v():void 0===f?T():_();var j=Math.random().toString(36).substring(2);function k(){}var N=void 0,I=1,C=2;function R(){return new TypeError("You cannot resolve a promise with itself")}function B(){return new TypeError("A promises callback cannot return that same promise.")}function P(e,t,r,n){try{e.call(t,r,n)}catch(e){return e}}function U(e,t,r){u((function(e){var n=!1,i=P(r,t,(function(r){n||(n=!0,t!==r?L(e,r):G(e,r))}),(function(t){n||(n=!0,D(e,t))}),"Settle: "+(e._label||" unknown promise"));!n&&i&&(n=!0,D(e,i))}),e)}function M(e,t){t._state===I?G(e,t._result):t._state===C?D(e,t._result):H(t,void 0,(function(t){return L(e,t)}),(function(t){return D(e,t)}))}function x(e,r,n){r.constructor===e.constructor&&n===S&&r.constructor.resolve===O?M(e,r):void 0===n?G(e,r):t(n)?U(e,r,n):G(e,r)}function L(t,r){if(t===r)D(t,R());else if(e(r)){var n=void 0;try{n=r.then}catch(e){return void D(t,e)}x(t,r,n)}else G(t,r)}function F(e){e._onerror&&e._onerror(e._result),$(e)}function G(e,t){e._state===N&&(e._result=t,e._state=I,0!==e._subscribers.length&&u($,e))}function D(e,t){e._state===N&&(e._state=C,e._result=t,u(F,e))}function H(e,t,r,n){var i=e._subscribers,s=i.length;e._onerror=null,i[s]=t,i[s+I]=r,i[s+C]=n,0===s&&e._state&&u($,e)}function $(e){var t=e._subscribers,r=e._state;if(0!==t.length){for(var n=void 0,i=void 0,s=e._result,o=0;o<t.length;o+=3)n=t[o],i=t[o+r],n?z(r,n,i,s):i(s);e._subscribers.length=0}}function z(e,r,n,i){var s=t(n),o=void 0,c=void 0,u=!0;if(s){try{o=n(i)}catch(e){u=!1,c=e}if(r===o)return void D(r,B())}else o=i;r._state!==N||(s&&u?L(r,o):!1===u?D(r,c):e===I?G(r,o):e===C&&D(r,o))}function W(e,t){try{t((function(t){L(e,t)}),(function(t){D(e,t)}))}catch(t){D(e,t)}}var V=0;function K(){return V++}function q(e){e[j]=V++,e._state=void 0,e._result=void 0,e._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var X=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(k),this.promise[j]||q(this.promise),i(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?G(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&G(this.promise,this._result))):D(this.promise,Y())}return e.prototype._enumerate=function(e){for(var t=0;this._state===N&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(e,t){var r=this._instanceConstructor,n=r.resolve;if(n===O){var i=void 0,s=void 0,o=!1;try{i=e.then}catch(e){o=!0,s=e}if(i===S&&e._state!==N)this._settledAt(e._state,t,e._result);else if("function"!=typeof i)this._remaining--,this._result[t]=e;else if(r===re){var c=new r(k);o?D(c,s):x(c,e,i),this._willSettleAt(c,t)}else this._willSettleAt(new r((function(t){return t(e)})),t)}else this._willSettleAt(n(e),t)},e.prototype._settledAt=function(e,t,r){var n=this.promise;n._state===N&&(this._remaining--,e===C?D(n,r):this._result[t]=r),0===this._remaining&&G(n,this._result)},e.prototype._willSettleAt=function(e,t){var r=this;H(e,void 0,(function(e){return r._settledAt(I,t,e)}),(function(e){return r._settledAt(C,t,e)}))},e}();function J(e){return new X(this,e).promise}function Z(e){var t=this;return i(e)?new t((function(r,n){for(var i=e.length,s=0;s<i;s++)t.resolve(e[s]).then(r,n)})):new t((function(e,t){return t(new TypeError("You must pass an array to race."))}))}function Q(e){var t=new this(k);return D(t,e),t}function ee(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function te(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var re=function(){function e(t){this[j]=K(),this._result=this._state=void 0,this._subscribers=[],k!==t&&("function"!=typeof t&&ee(),this instanceof e?W(this,t):te())}return e.prototype.catch=function(e){return this.then(null,e)},e.prototype.finally=function(e){var r=this,n=r.constructor;return t(e)?r.then((function(t){return n.resolve(e()).then((function(){return t}))}),(function(t){return n.resolve(e()).then((function(){throw t}))})):r.then(e,e)},e}();function ne(){var e=void 0;if(void 0!==r.g)e=r.g;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=re}return re.prototype.then=S,re.all=J,re.race=Z,re.resolve=O,re.reject=Q,re._setScheduler=a,re._setAsap=l,re._asap=u,re.polyfill=ne,re.Promise=re,re}()},"../../node_modules/events/events.js":(e,t,r)=>{"use strict";var n,i=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,s="object"==typeof Reflect?Reflect:null,o=s&&"function"==typeof s.apply?s.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var c=Number.isNaN||function(e){return e!=e};function u(){u.init.call(this)}e.exports=u,e.exports.once=function(e,t){return new i((function(r,n){function i(r){e.removeListener(t,s),n(r)}function s(){"function"==typeof e.removeListener&&e.removeListener("error",i),r([].slice.call(arguments))}m(e,t,s,{once:!0}),"error"!==t&&function(e,t,r){"function"==typeof e.on&&m(e,"error",t,r)}(e,i,{once:!0})}))},u.EventEmitter=u,u.prototype._events=void 0,u.prototype._eventsCount=0,u.prototype._maxListeners=void 0;var a=10;function l(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function f(e){return void 0===e._maxListeners?u.defaultMaxListeners:e._maxListeners}function h(e,t,r,n){var i,events,s,o;if(l(r),void 0===(events=e._events)?(events=e._events=Object.create(null),e._eventsCount=0):(void 0!==events.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),events=e._events),s=events[t]),void 0===s)s=events[t]=r,++e._eventsCount;else if("function"==typeof s?s=events[t]=n?[r,s]:[s,r]:n?s.unshift(r):s.push(r),(i=f(e))>0&&s.length>i&&!s.warned){s.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+s.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=e,c.type=t,c.count=s.length,o=c,console&&console.warn&&console.warn(o)}return e}function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},i=d.bind(n);return i.listener=r,n.wrapFn=i,i}function g(e,t,r){var events=e._events;if(void 0===events)return[];var n=events[t];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(n):y(n,n.length)}function b(e){var events=this._events;if(void 0!==events){var t=events[e];if("function"==typeof t)return 1;if(void 0!==t)return t.length}return 0}function y(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}function m(e,t,r,n){if("function"==typeof e.on)n.once?e.once(t,r):e.on(t,r);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(s){n.once&&e.removeEventListener(t,i),r(s)}))}}Object.defineProperty(u,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),u.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},u.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||c(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},u.prototype.getMaxListeners=function(){return f(this)},u.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,events=this._events;if(void 0!==events)n=n&&void 0===events.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var s=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw s.context=i,s}var c=events[e];if(void 0===c)return!1;if("function"==typeof c)o(c,this,t);else{var u=c.length,a=y(c,u);for(r=0;r<u;++r)o(a[r],this,t)}return!0},u.prototype.addListener=function(e,t){return h(this,e,t,!1)},u.prototype.on=u.prototype.addListener,u.prototype.prependListener=function(e,t){return h(this,e,t,!0)},u.prototype.once=function(e,t){return l(t),this.on(e,p(this,e,t)),this},u.prototype.prependOnceListener=function(e,t){return l(t),this.prependListener(e,p(this,e,t)),this},u.prototype.removeListener=function(e,t){var r,events,n,i,s;if(l(t),void 0===(events=this._events))return this;if(void 0===(r=events[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete events[e],events.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(n=-1,i=r.length-1;i>=0;i--)if(r[i]===t||r[i].listener===t){s=r[i].listener,n=i;break}if(n<0)return this;0===n?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,n),1===r.length&&(events[e]=r[0]),void 0!==events.removeListener&&this.emit("removeListener",e,s||t)}return this},u.prototype.off=u.prototype.removeListener,u.prototype.removeAllListeners=function(e){var t,events,r;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[e]),this;if(0===arguments.length){var n,i=Object.keys(events);for(r=0;r<i.length;++r)"removeListener"!==(n=i[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=events[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},u.prototype.listeners=function(e){return g(this,e,!0)},u.prototype.rawListeners=function(e){return g(this,e,!1)},u.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):b.call(e,t)},u.prototype.listenerCount=b,u.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"../../node_modules/ieee754/index.js":(e,t)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var s,o,c=8*i-n-1,u=(1<<c)-1,a=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,d=e[t+f];for(f+=h,s=d&(1<<-l)-1,d>>=-l,l+=c;l>0;s=256*s+e[t+f],f+=h,l-=8);for(o=s&(1<<-l)-1,s>>=-l,l+=n;l>0;o=256*o+e[t+f],f+=h,l-=8);if(0===s)s=1-a;else{if(s===u)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,n),s-=a}return(d?-1:1)*o*Math.pow(2,s-n)},t.write=function(e,t,r,n,i,s){var o,c,u,a=8*s-i-1,l=(1<<a)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:s-1,p=n?1:-1,g=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(c=isNaN(t)?1:0,o=l):(o=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-o))<1&&(o--,u*=2),(t+=o+f>=1?h/u:h*Math.pow(2,1-f))*u>=2&&(o++,u/=2),o+f>=l?(c=0,o=l):o+f>=1?(c=(t*u-1)*Math.pow(2,i),o+=f):(c=t*Math.pow(2,f-1)*Math.pow(2,i),o=0));i>=8;e[r+d]=255&c,d+=p,c/=256,i-=8);for(o=o<<i|c,a+=i;a>0;e[r+d]=255&o,d+=p,o/=256,a-=8);e[r+d-p]|=128*g}},"../../node_modules/process/browser.js":e=>{var t,r,n=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(t===setTimeout)return setTimeout(e,0);if((t===i||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:i}catch(e){t=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],a=!1,l=-1;function f(){a&&c&&(a=!1,c.length?u=c.concat(u):l=-1,u.length&&h())}function h(){if(!a){var e=o(f);a=!0;for(var t=u.length;t;){for(c=u,u=[];++l<t;)c&&c[l].run();l=-1,t=u.length}c=null,a=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{return r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function d(e,t){this.fun=e,this.array=t}function p(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new d(e,t)),1!==u.length||a||o(h)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=p,n.addListener=p,n.once=p,n.off=p,n.removeListener=p,n.removeAllListeners=p,n.emit=p,n.prependListener=p,n.prependOnceListener=p,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"../blockchain-link/lib/workers/blockbook/index.js":function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const o=r("../blockchain-link-types/lib/constants/errors.js"),c=r("../blockchain-link-types/lib/constants/index.js"),u=r("../blockchain-link/lib/workers/baseWorker.js"),a=r("../blockchain-link/lib/workers/blockbook/websocket.js"),l=s(r("../blockchain-link-utils/lib/blockbook.js")),f=({state:e,post:t},r)=>{if(!r.tx)return;const n=r.address,i=e.getAccount(n);t({id:-1,type:c.RESPONSES.NOTIFICATION,payload:{type:"notification",payload:{descriptor:i?i.descriptor:n,tx:i?l.transformTransaction(i.descriptor,i.addresses,r.tx):l.transformTransaction(n,void 0,r.tx)}}})},h=async e=>{if(e.state.getSubscription("block"))return{subscribed:!0};const t=await e.connect();return e.state.addSubscription("block"),t.on("block",(t=>(({post:e},t)=>{e({id:-1,type:c.RESPONSES.NOTIFICATION,payload:{type:"block",payload:{blockHeight:t.height,blockHash:t.hash}}})})(e,t))),t.subscribeBlock()},d=async(e,t)=>{const r=await e.connect();return e.state.getSubscription("fiatRates")||(e.state.addSubscription("fiatRates"),r.on("fiatRates",(t=>(({post:e},t)=>{e({id:-1,type:c.RESPONSES.NOTIFICATION,payload:{type:"fiatRates",payload:{rates:t.rates}}})})(e,t)))),r.subscribeFiatRates(t)},p=async e=>{const t=await e.connect();return e.state.getSubscription("mempool")||(e.state.addSubscription("mempool"),t.on("mempool",(t=>(({post:e},t)=>{e({id:-1,type:c.RESPONSES.NOTIFICATION,payload:{type:"mempool",payload:t}})})(e,t)))),t.subscribeMempool()},g=async e=>{const{payload:t}=e;let r;if("accounts"===t.type)r=await(async(e,t)=>{const r=await e.connect(),{state:n}=e;return n.addAccounts(t),n.getSubscription("notification")||(r.on("notification",(t=>f(e,t))),n.addSubscription("notification")),r.subscribeAddresses(n.getAddresses())})(e,t.accounts);else if("addresses"===t.type)r=await(async(e,t)=>{const r=await e.connect(),{state:n}=e;return n.addAddresses(t),n.getSubscription("notification")||(r.on("notification",(t=>f(e,t))),n.addSubscription("notification")),r.subscribeAddresses(n.getAddresses())})(e,t.addresses);else if("block"===t.type)r=await h(e);else if("fiatRates"===t.type)r=await d(e,t.currency);else{if("mempool"!==t.type)throw new o.CustomError("invalid_param","+type");r=await p(e)}return{type:c.RESPONSES.SUBSCRIBE,payload:r}},b=e=>{switch(e.type){case c.MESSAGES.GET_INFO:return(async e=>{const t=await e.connect(),r=await t.getServerInfo();return{type:c.RESPONSES.GET_INFO,payload:Object.assign({url:t.options.url},l.transformServerInfo(r))}})(e);case c.MESSAGES.GET_BLOCK_HASH:return(async e=>{const t=await e.connect(),r=await t.getBlockHash(e.payload);return{type:c.RESPONSES.GET_BLOCK_HASH,payload:r.hash}})(e);case c.MESSAGES.GET_BLOCK:return(async e=>{const t=await e.connect(),r=await t.getBlock(e.payload);return{type:c.RESPONSES.GET_BLOCK,payload:r}})(e);case c.MESSAGES.GET_ACCOUNT_INFO:return(async e=>{const{payload:t}=e,r=await e.connect(),n=await r.getAccountInfo(t);return{type:c.RESPONSES.GET_ACCOUNT_INFO,payload:l.transformAccountInfo(n)}})(e);case c.MESSAGES.GET_ACCOUNT_UTXO:return(async e=>{const{payload:t}=e,r=await e.connect(),n=await r.getAccountUtxo(t);return{type:c.RESPONSES.GET_ACCOUNT_UTXO,payload:l.transformAccountUtxo(n)}})(e);case c.MESSAGES.GET_TRANSACTION:return(async e=>{const t=await e.connect(),r=await t.getTransaction(e.payload);return{type:c.RESPONSES.GET_TRANSACTION,payload:{type:"blockbook",tx:r}}})(e);case c.MESSAGES.GET_ACCOUNT_BALANCE_HISTORY:return(async e=>{const{payload:t}=e,r=await e.connect(),n=await r.getAccountBalanceHistory(t);return{type:c.RESPONSES.GET_ACCOUNT_BALANCE_HISTORY,payload:n}})(e);case c.MESSAGES.GET_CURRENT_FIAT_RATES:return(async e=>{const{payload:t}=e,r=await e.connect(),n=await r.getCurrentFiatRates(t);return{type:c.RESPONSES.GET_CURRENT_FIAT_RATES,payload:n}})(e);case c.MESSAGES.GET_FIAT_RATES_FOR_TIMESTAMPS:return(async e=>{const{payload:t}=e,r=await e.connect(),{tickers:n}=await r.getFiatRatesForTimestamps(t);return{type:c.RESPONSES.GET_FIAT_RATES_FOR_TIMESTAMPS,payload:{tickers:n}}})(e);case c.MESSAGES.GET_FIAT_RATES_TICKERS_LIST:return(async e=>{const{payload:t}=e,r=await e.connect(),n=await r.getFiatRatesTickersList(t);return{type:c.RESPONSES.GET_FIAT_RATES_TICKERS_LIST,payload:{ts:n.ts,availableCurrencies:n.available_currencies}}})(e);case c.MESSAGES.ESTIMATE_FEE:return(async e=>{const t=await e.connect(),r=await t.estimateFee(e.payload);return{type:c.RESPONSES.ESTIMATE_FEE,payload:r}})(e);case c.MESSAGES.PUSH_TRANSACTION:return(async e=>{const t=await e.connect(),r=await t.pushTransaction(e.payload);return{type:c.RESPONSES.PUSH_TRANSACTION,payload:r.result}})(e);case c.MESSAGES.SUBSCRIBE:return g(e);case c.MESSAGES.UNSUBSCRIBE:return(async e=>{const{payload:t}=e;let r;if("accounts"===t.type)r=await(async({state:e,connect:t},r)=>{e.removeAccounts(r||e.getAccounts());const n=await t(),i=e.getAddresses();return i.length<1?(n.removeAllListeners("notification"),e.removeSubscription("notification"),n.unsubscribeAddresses()):n.subscribeAddresses(i)})(e,t.accounts);else if("addresses"===t.type)r=await(async({state:e,connect:t},r)=>{const n=await t();r||e.removeAccounts(e.getAccounts());const i=e.removeAddresses(r||e.getAddresses());return i.length<1?(n.removeAllListeners("notification"),e.removeSubscription("notification"),n.unsubscribeAddresses()):n.subscribeAddresses(i)})(e,t.addresses);else if("block"===t.type)r=await(async({state:e,connect:t})=>{if(!e.getSubscription("block"))return{subscribed:!1};const r=await t();return r.removeAllListeners("block"),e.removeSubscription("block"),r.unsubscribeBlock()})(e);else if("fiatRates"===t.type)r=await(async({state:e,connect:t})=>{if(!e.getSubscription("fiatRates"))return{subscribed:!1};const r=await t();return r.removeAllListeners("fiatRates"),e.removeSubscription("fiatRates"),r.unsubscribeFiatRates()})(e);else{if("mempool"!==t.type)throw new o.CustomError("invalid_param","+type");r=await(async({state:e,connect:t})=>{if(!e.getSubscription("mempool"))return{subscribed:!1};const r=await t();return r.removeAllListeners("mempool"),e.removeSubscription("mempool"),r.unsubscribeMempool()})(e)}return{type:c.RESPONSES.UNSUBSCRIBE,payload:r}})(e);default:throw new o.CustomError("worker_unknown_request",`+${e.type}`)}};class y extends u.BaseWorker{cleanup(){this.api&&(this.api.dispose(),this.api.removeAllListeners()),super.cleanup()}isConnected(e){var t;return null!==(t=null==e?void 0:e.isConnected())&&void 0!==t&&t}async tryConnect(e){const{timeout:t,pingTimeout:r,keepAlive:n}=this.settings,i=new a.BlockbookAPI({url:e,timeout:t,pingTimeout:r,keepAlive:n,agent:this.proxyAgent});return await i.connect(),i.on("disconnected",(()=>{this.post({id:-1,type:c.RESPONSES.DISCONNECTED,payload:!0}),this.cleanup()})),this.post({id:-1,type:c.RESPONSES.CONNECTED}),i}disconnect(){this.api&&this.api.disconnect()}async messageHandler(e){try{if(await super.messageHandler(e))return!0;const t=Object.assign(Object.assign({},e.data),{connect:()=>this.connect(),post:e=>this.post(e),state:this.state}),r=await b(t);this.post(Object.assign({id:e.data.id},r))}catch(t){this.errorResponse(e.data.id,t)}}}if(t.default=function(){return new y},"worker"===u.CONTEXT){const e=new y;onmessage=e.messageHandler.bind(e)}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var s=t[n]={exports:{}};return e[n].call(s.exports,s,s.exports,r),s.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}();r("../blockchain-link/lib/workers/blockbook/index.js")})();