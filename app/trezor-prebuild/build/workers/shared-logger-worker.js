(()=>{"use strict";const e=[],s=[],t=[];self.addEventListener("connect",(a=>{const o=a.ports[0];e.push(o),o.addEventListener("message",(e=>{!function(e,a){const{type:o,data:n}=e;switch(o){case"add-log":t.push(n),t.length>1e3&&t.shift(),s.length>0&&s.forEach((e=>{e.postMessage({type:"log-entry",payload:n})}));break;case"get-logs":a.postMessage({type:"get-logs",payload:t});break;case"subscribe":s.push(a)}}(e.data,o)})),o.start()}))})();