(()=>{var t={"../transport/lib/errors.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ABORTED_BY_TIMEOUT=e.ABORTED_BY_SIGNAL=e.UNEXPECTED_ERROR=e.HTTP_ERROR=e.OTHER_CALL_IN_PROGRESS=e.DEVICE_DISCONNECTED_DURING_ACTION=e.WRONG_ENVIRONMENT=e.WRONG_RESULT_TYPE=e.NATIVE_INTERFACE_NOT_AVAILABLE=e.ALREADY_LISTENING=e.SESSION_BACKGROUND_TIMEOUT=e.SESSION_NOT_FOUND=e.SESSION_WRONG_PREVIOUS=e.DEVICE_UNREADABLE=e.DEVICE_NOT_FOUND=e.INTERFACE_DATA_TRANSFER=e.INTERFACE_UNABLE_TO_CLOSE_DEVICE=e.INTERFACE_UNABLE_TO_OPEN_DEVICE=void 0,e.INTERFACE_UNABLE_TO_OPEN_DEVICE="Unable to open device",e.INTERFACE_UNABLE_TO_CLOSE_DEVICE="Unable to close device",e.INTERFACE_DATA_TRANSFER="A transfer error has occurred.",e.DEVICE_NOT_FOUND="device not found",e.DEVICE_UNREADABLE="Device unreadable",e.SESSION_WRONG_PREVIOUS="wrong previous session",e.SESSION_NOT_FOUND="session not found",e.SESSION_BACKGROUND_TIMEOUT="sessions background did not respond",e.ALREADY_LISTENING="already listening",e.NATIVE_INTERFACE_NOT_AVAILABLE="interface not available",e.WRONG_RESULT_TYPE="Wrong result type.",e.WRONG_ENVIRONMENT="This transport can not be used in this environment",e.DEVICE_DISCONNECTED_DURING_ACTION="device disconnected during action",e.OTHER_CALL_IN_PROGRESS="other call in progress",e.HTTP_ERROR="Network request failed",e.UNEXPECTED_ERROR="unexpected error",e.ABORTED_BY_SIGNAL="Aborted by signal",e.ABORTED_BY_TIMEOUT="Aborted by timeout"},"../transport/lib/sessions/background.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),o=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&i(e,t,r);return o(e,t),e},u=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,o){function s(t){try{a(i.next(t))}catch(t){o(t)}}function u(t){try{a(i.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.SessionsBackground=void 0;const a=r("../utils/lib/index.js"),c=r("../utils/lib/typedEventEmitter.js"),l=s(r("../transport/lib/errors.js"));class f extends c.TypedEmitter{constructor(){super(...arguments),this.sessions={},this.locksQueue=[],this.locksTimeoutQueue=[],this.lastSession=0}handleMessage(t){return u(this,void 0,void 0,(function*(){let e;try{switch(t.type){case"handshake":e=this.handshake();break;case"enumerateIntent":e=yield this.enumerateIntent();break;case"enumerateDone":e=yield this.enumerateDone(t.payload);break;case"acquireIntent":e=yield this.acquireIntent(t.payload);break;case"acquireDone":e=yield this.acquireDone(t.payload);break;case"getSessions":e=yield this.getSessions();break;case"releaseIntent":e=yield this.releaseIntent(t.payload);break;case"releaseDone":e=yield this.releaseDone(t.payload);break;case"getPathBySession":e=this.getPathBySession(t.payload);break;default:throw new Error(l.UNEXPECTED_ERROR)}return Object.assign(Object.assign({},e),{id:t.id})}catch(e){return Object.assign(Object.assign({},this.error(l.UNEXPECTED_ERROR)),{id:t.type})}finally{if(e&&e.success&&e.payload&&"descriptors"in e.payload){const{descriptors:t}=e.payload;setTimeout((()=>this.emit("descriptors",t)),0)}}}))}handshake(){return this.success(void 0)}enumerateIntent(){return u(this,void 0,void 0,(function*(){return yield this.waitInQueue(),this.success({sessions:this.sessions})}))}enumerateDone(t){this.clearLock();this.filterDisconnectedDevices(this.sessionsToDescriptors(),t.paths).forEach((t=>{delete this.sessions[t.path]})),t.paths.forEach((t=>{this.sessions[t]||(this.sessions[t]=null)}));const e=this.sessionsToDescriptors();return n.resolve(this.success({sessions:this.sessions,descriptors:e}))}acquireIntent(t){return u(this,void 0,void 0,(function*(){const e=this.sessions[t.path];if(t.previous&&t.previous!==e)return this.error(l.SESSION_WRONG_PREVIOUS);if(yield this.waitInQueue(),e!==this.sessions[t.path])return this.clearLock(),this.error(l.SESSION_WRONG_PREVIOUS);const r=JSON.parse(JSON.stringify(this.sessions)),n=`${this.getNewSessionId()}`;r[t.path]=n;const i=this.sessionsToDescriptors(r);return this.success({session:n,descriptors:i})}))}acquireDone(t){this.clearLock(),this.sessions[t.path]=`${this.lastSession}`;const e=this.sessionsToDescriptors();return n.resolve(this.success({descriptors:e}))}releaseIntent(t){return u(this,void 0,void 0,(function*(){const e=this._getPathBySession({session:t.session});return e?(yield this.waitInQueue(),this.success({path:e})):this.error(l.SESSION_NOT_FOUND)}))}releaseDone(t){this.sessions[t.path]=null,this.clearLock();const e=this.sessionsToDescriptors();return n.resolve(this.success({descriptors:e}))}getSessions(){return n.resolve(this.success({sessions:this.sessions}))}getPathBySession({session:t}){const e=this._getPathBySession({session:t});return e?this.success({path:e}):this.error(l.SESSION_NOT_FOUND)}_getPathBySession({session:t}){let e;return Object.keys(this.sessions).forEach((r=>{this.sessions[r]===t&&(e=r)})),e}startLock(){const t=(0,a.createDeferred)(),e=setTimeout((()=>{t.resolve(void 0)}),4e3);return this.locksQueue.push(t),this.locksTimeoutQueue.push(e),this.locksQueue.length-1}clearLock(){this.locksQueue[0]?(this.locksQueue[0].resolve(void 0),this.locksQueue.shift(),clearTimeout(this.locksTimeoutQueue[0]),this.locksTimeoutQueue.shift()):console.warn("empty lock queue")}waitForUnlocked(t){return u(this,void 0,void 0,(function*(){if(t>0){const e=this.locksQueue.slice(0,t);e.length&&(yield n.all(e.map((t=>t.promise))))}}))}waitInQueue(){return u(this,void 0,void 0,(function*(){const t=this.startLock();yield this.waitForUnlocked(t)}))}getNewSessionId(){return this.lastSession++,this.lastSession}sessionsToDescriptors(t){return Object.entries(t||this.sessions).map((t=>({path:t[0],session:t[1]})))}filterDisconnectedDevices(t,e){return t.filter((t=>!e.find((e=>t.path===e))))}success(t){return{success:!0,payload:t}}error(t){return{success:!1,error:t}}}e.SessionsBackground=f},"../utils/lib/arrayDistinct.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayDistinct=void 0;e.arrayDistinct=(t,e,r)=>r.indexOf(t)===e},"../utils/lib/arrayPartition.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayPartition=void 0;e.arrayPartition=(t,e)=>t.reduce((([t,r],n)=>e(n)?[[...t,n],r]:[t,[...r,n]]),[[],[]])},"../utils/lib/arrayShuffle.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayShuffle=void 0;e.arrayShuffle=t=>{const e=t.slice();for(let t=e.length-1;t>0;t--){const r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e}},"../utils/lib/arrayToDictionary.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.arrayToDictionary=void 0;const r=t=>!!["string","number"].includes(typeof t);e.arrayToDictionary=(t,e,n)=>n?t.reduce(((t,n)=>{var i;const o=e(n);return r(o)?Object.assign(Object.assign({},t),{[o]:[...null!==(i=t[o])&&void 0!==i?i:[],n]}):t}),{}):t.reduce(((t,n)=>{const i=e(n);return r(i)?Object.assign(Object.assign({},t),{[i]:n}):t}),{})},"../utils/lib/bufferUtils.js":(t,e,r)=>{"use strict";var Buffer=r("../../node_modules/buffer/index.js").lW;Object.defineProperty(e,"__esModule",{value:!0}),e.getChunkSize=e.reverseBuffer=void 0;e.reverseBuffer=t=>{if(t.length<1)return t;const e=Buffer.alloc(t.length);let r=e.length-1;for(let n=0;n<e.length/2;n++)e[n]=t[r],e[r]=t[n],r--;return e};e.getChunkSize=t=>{const e=Buffer.allocUnsafe(1);return e.writeUInt8(t),e}},"../utils/lib/bytesToHumanReadable.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.bytesToHumanReadable=void 0;const r=["B","KB","MB","GB","TB"];e.bytesToHumanReadable=t=>{let e=Math.abs(t),n=0;for(;e>=1024||n>=r.length;)e/=1024,n++;return`${e.toFixed(1)} ${r[n]}`}},"../utils/lib/capitalizeFirstLetter.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.capitalizeFirstLetter=void 0;e.capitalizeFirstLetter=t=>t.charAt(0).toUpperCase()+t.slice(1)},"../utils/lib/cloneObject.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.cloneObject=void 0;e.cloneObject=t=>{const e=JSON.stringify(t);return void 0===e?t:JSON.parse(e)}},"../utils/lib/countBytesInString.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.countBytesInString=void 0;e.countBytesInString=t=>encodeURI(t).split(/%..|./).length-1},"../utils/lib/createCooldown.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createCooldown=void 0;e.createCooldown=t=>{let e=0;return()=>{const r=Date.now();return r-e>=t&&(e=r,!0)}}},"../utils/lib/createDeferred.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.createDeferred=void 0;e.createDeferred=t=>{let e=()=>{},r=()=>{};const i=new n(((t,n)=>{e=t,r=n}));return{id:t,resolve:e,reject:r,promise:i}}},"../utils/lib/createTimeoutPromise.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.createTimeoutPromise=void 0;e.createTimeoutPromise=t=>new n((e=>setTimeout(e,t)))},"../utils/lib/enumUtils.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getValueByKey=e.getKeyByValue=void 0,e.getKeyByValue=function(t,e){return t&&Object.keys(t).find((r=>t[r]===e))},e.getValueByKey=function(t,e){const r=t&&Object.keys(t).find((t=>t===e));return r&&t[r]}},"../utils/lib/getLocaleSeparators.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getLocaleSeparators=void 0;e.getLocaleSeparators=t=>{var e,r;const n=new Intl.NumberFormat(t).formatToParts(10000.1);return{decimalSeparator:null===(e=n.find((({type:t})=>"decimal"===t)))||void 0===e?void 0:e.value,thousandsSeparator:null===(r=n.find((({type:t})=>"group"===t)))||void 0===r?void 0:r.value}}},"../utils/lib/getNumberFromPixelString.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getNumberFromPixelString=void 0;e.getNumberFromPixelString=t=>parseInt(t.replace("px",""),10)},"../utils/lib/getRandomNumberInRange.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomNumberInRange=void 0;e.getRandomNumberInRange=(t,e)=>Math.floor(Math.random()*(e-t+1))+t},"../utils/lib/getSynchronize.js":(t,e,r)=>{"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise;Object.defineProperty(e,"__esModule",{value:!0}),e.getSynchronize=void 0;e.getSynchronize=()=>{let t;return e=>{const r=(null!=t?t:n.resolve()).catch((()=>{})).then(e).finally((()=>{t===r&&(t=void 0)}));return t=r,t}}},"../utils/lib/getWeakRandomId.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getWeakRandomId=void 0;e.getWeakRandomId=t=>{let e="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(let n=0;n<t;n++)e+=r.charAt(Math.floor(62*Math.random()));return e}},"../utils/lib/hasUppercaseLetter.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUppercaseLetter=void 0;const r=new RegExp("^(.*[A-Z].*)$");e.hasUppercaseLetter=t=>r.test(t)},"../utils/lib/index.js":function(t,e,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(t,e,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(e,r);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,n,i)}:function(t,e,r,n){void 0===n&&(n=r),t[n]=e[r]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),o=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||n(e,t,r)},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)"default"!==r&&Object.prototype.hasOwnProperty.call(t,r)&&n(e,t,r);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.xssFilters=e.versionUtils=e.enumUtils=e.bufferUtils=void 0,o(r("../utils/lib/arrayDistinct.js"),e),o(r("../utils/lib/arrayPartition.js"),e),o(r("../utils/lib/arrayShuffle.js"),e),o(r("../utils/lib/arrayToDictionary.js"),e),e.bufferUtils=s(r("../utils/lib/bufferUtils.js")),o(r("../utils/lib/bytesToHumanReadable.js"),e),o(r("../utils/lib/capitalizeFirstLetter.js"),e),o(r("../utils/lib/cloneObject.js"),e),o(r("../utils/lib/countBytesInString.js"),e),o(r("../utils/lib/createCooldown.js"),e),o(r("../utils/lib/createDeferred.js"),e),o(r("../utils/lib/createTimeoutPromise.js"),e),e.enumUtils=s(r("../utils/lib/enumUtils.js")),o(r("../utils/lib/getNumberFromPixelString.js"),e),o(r("../utils/lib/getRandomNumberInRange.js"),e),o(r("../utils/lib/getSynchronize.js"),e),o(r("../utils/lib/getWeakRandomId.js"),e),o(r("../utils/lib/hasUppercaseLetter.js"),e),o(r("../utils/lib/isAscii.js"),e),o(r("../utils/lib/isHex.js"),e),o(r("../utils/lib/isNotUndefined.js"),e),o(r("../utils/lib/isUrl.js"),e),o(r("../utils/lib/mergeDeepObject.js"),e),o(r("../utils/lib/objectPartition.js"),e),o(r("../utils/lib/parseElectrumUrl.js"),e),o(r("../utils/lib/parseHostname.js"),e),o(r("../utils/lib/promiseAllSequence.js"),e),o(r("../utils/lib/redactUserPath.js"),e),o(r("../utils/lib/scheduleAction.js"),e),o(r("../utils/lib/throwError.js"),e),o(r("../utils/lib/truncateMiddle.js"),e),o(r("../utils/lib/topologicalSort.js"),e),o(r("../utils/lib/urlToOnion.js"),e),e.versionUtils=s(r("../utils/lib/versionUtils.js")),e.xssFilters=s(r("../utils/lib/xssFilters.js")),o(r("../utils/lib/getLocaleSeparators.js"),e)},"../utils/lib/isAscii.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isAscii=void 0,e.isAscii=function(t){return!t||/^[\x00-\x7F]*$/.test(t)}},"../utils/lib/isHex.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isHex=void 0;e.isHex=t=>/^(0x|0X)?[0-9A-Fa-f]+$/g.test(t)},"../utils/lib/isNotUndefined.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isNotUndefined=void 0;e.isNotUndefined=t=>void 0!==t},"../utils/lib/isUrl.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isUrl=void 0;const r=/^(http|ws)s?:\/\/[a-z0-9]([a-z0-9.-]+)?(:[0-9]{1,5})?((\/)?(([a-z0-9-_])+(\/)?)+)$/i;e.isUrl=t=>r.test(t)},"../utils/lib/mergeDeepObject.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.mergeDeepObject=void 0;const r=t=>{if("object"==typeof t&&null!==t){if("function"==typeof Object.getPrototypeOf){const e=Object.getPrototypeOf(t);return e===Object.prototype||null===e}return"[object Object]"===Object.prototype.toString.call(t)}return!1};e.mergeDeepObject=(...t)=>t.reduce(((t,n)=>{if(Array.isArray(n))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(n).forEach((i=>{["__proto__","constructor","prototype"].includes(i)||(Array.isArray(t[i])&&Array.isArray(n[i])?t[i]=e.mergeDeepObject.options.mergeArrays?Array.from(new Set(t[i].concat(n[i]))):n[i]:r(t[i])&&r(n[i])?t[i]=(0,e.mergeDeepObject)(t[i],n[i]):t[i]=n[i])})),t}),{});const n={mergeArrays:!0};e.mergeDeepObject.options=n,e.mergeDeepObject.withOptions=(t,...r)=>{e.mergeDeepObject.options=Object.assign({mergeArrays:!0},t);const i=(0,e.mergeDeepObject)(...r);return e.mergeDeepObject.options=n,i}},"../utils/lib/objectPartition.js":function(t,e){"use strict";var r=this&&this.__rest||function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};Object.defineProperty(e,"__esModule",{value:!0}),e.objectPartition=void 0;e.objectPartition=(t,e)=>e.reduce((([t,e],n)=>{const i=e,o=n,s=i[o],u=r(i,["symbol"==typeof o?o:o+""]);return void 0!==s?[Object.assign(Object.assign({},t),{[n]:s}),u]:[t,e]}),[{},t])},"../utils/lib/parseElectrumUrl.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseElectrumUrl=void 0;const r=/^(?:([a-zA-Z0-9.-]+)|\[([a-f0-9:]+)\]):([0-9]{1,5}):([ts])$/;e.parseElectrumUrl=t=>{var e;const n=t.match(r);if(n)return{host:null!==(e=n[1])&&void 0!==e?e:n[2],port:Number.parseInt(n[3],10),protocol:n[4]}}},"../utils/lib/parseHostname.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.parseHostname=void 0;const r=/^([a-z0-9.+-]+:\/\/)?([a-z0-9.-]+)([:/][^:/]+)*\/?$/i;e.parseHostname=t=>{var e,n;return null===(n=null===(e=t.match(r))||void 0===e?void 0:e[2])||void 0===n?void 0:n.toLowerCase()}},"../utils/lib/promiseAllSequence.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,o){function s(t){try{a(i.next(t))}catch(t){o(t)}}function u(t){try{a(i.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.promiseAllSequence=void 0;e.promiseAllSequence=t=>i(void 0,void 0,void 0,(function*(){const e=[];for(let r=0;r<t.length;++r){const n=yield t[r]();e.push(n)}return e}))},"../utils/lib/redactUserPath.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.redactUserPathFromString=e.startOfUserPathRegex=void 0,e.startOfUserPathRegex=/([/\\][Uu]sers[/\\]{1,4})([^"^'^[^\]^/^\\]*)/g;e.redactUserPathFromString=t=>t.replace(e.startOfUserPathRegex,"$1[*]")},"../utils/lib/scheduleAction.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,o){function s(t){try{a(i.next(t))}catch(t){o(t)}}function u(t){try{a(i.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.scheduleAction=void 0;const o=t=>Array.isArray(t),s=()=>new Error("Aborted by signal"),u=()=>new Error("Aborted by deadline"),a=()=>new Error("Aborted by timeout"),c=(t,e)=>new n(((r,n)=>{if(e.aborted)return n();if(void 0===t)return r();const i=setTimeout(r,t),o=()=>{clearTimeout(i),e.removeEventListener("abort",o),n()};e.addEventListener("abort",o)})),l=(t,e,r)=>new n(((n,i)=>{if(r.aborted)return i();const o=void 0!==t?setTimeout((()=>i(e())),t):void 0,s=()=>{clearTimeout(o),r.removeEventListener("abort",s),i()};r.addEventListener("abort",s)})),f=(t,e)=>new n(((r,n)=>{if(e.aborted)return n();if(null==t?void 0:t.aborted)return n(s());const i=()=>n(s());null==t||t.addEventListener("abort",i);const o=()=>{null==t||t.removeEventListener("abort",i),e.removeEventListener("abort",o),n()};e.addEventListener("abort",o)})),h=(t,e)=>i(void 0,void 0,void 0,(function*(){const r=new AbortController,i=()=>r.abort();e.aborted&&i(),e.addEventListener("abort",i);try{return yield new n((e=>e(t(r.signal))))}finally{e.removeEventListener("abort",i)}}));e.scheduleAction=(t,e)=>i(void 0,void 0,void 0,(function*(){const{signal:r,delay:s,attempts:p,timeout:d,deadline:y,gap:g}=e,v=y&&y-Date.now(),b=o(p)?p.length:null!=p?p:y?1/0:1,m=new AbortController,_=m.signal,w=o(p)?t=>p[t]:()=>({timeout:d,gap:g});try{return yield n.race([f(r,_),l(v,u,_),c(s,_).then((()=>((t,e,r,o)=>i(void 0,void 0,void 0,(function*(){for(let n=0;n<t-1&&!o.aborted;n++){const t=new AbortController,i=()=>t.abort();o.addEventListener("abort",i);try{return yield e(n,t.signal)}catch(t){i(),yield r(n)}finally{o.removeEventListener("abort",i)}}return o.aborted?n.reject():e(t-1,o)})))(b,((e,r)=>n.race([l(w(e).timeout,a,_),h(t,r)])),(t=>{var e;return c(null!==(e=w(t).gap)&&void 0!==e?e:0,_)}),_)))])}finally{m.abort()}}))},"../utils/lib/throwError.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.throwError=void 0;e.throwError=t=>{throw new Error(t)}},"../utils/lib/topologicalSort.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.topologicalSort=void 0;const n=r("../utils/lib/arrayPartition.js");e.topologicalSort=(t,e,r)=>{const i=[],o=t=>(0,n.arrayPartition)(t,(r=>!t.some((t=>e(t,r)))));let s=t;for(;s.length;){const[t,e]=o(s);if(!t.length)throw new Error("Cycle detected");i.push(...r?t.sort(r):t),s=e}return i}},"../utils/lib/truncateMiddle.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.truncateMiddle=void 0;e.truncateMiddle=(t,e,r)=>{if(t.length<=e+r)return t;return`${t.substring(0,e)}…${t.substring(t.length-r,t.length)}`}},"../utils/lib/typedEventEmitter.js":(t,e,r)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TypedEmitter=void 0;const n=r("../../node_modules/events/events.js");class i extends n.EventEmitter{listenerCount(t){return super.listenerCount(t)}}e.TypedEmitter=i},"../utils/lib/urlToOnion.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.urlToOnion=void 0;e.urlToOnion=(t,e)=>{var r;const[,n,i,o,s]=null!==(r=t.match(/^(http|ws)s?:\/\/([^:/]+\.)?([^/.]+\.[^/.]+)(\/.*)?$/i))&&void 0!==r?r:[];if(o&&e[o])return`${n}://${null!=i?i:""}${e[o]}${null!=s?s:""}`}},"../utils/lib/versionUtils.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeVersion=e.isNewerOrEqual=e.isEqual=e.isNewer=e.isVersionArray=void 0;e.isVersionArray=t=>{if(!Array.isArray(t))return!1;if(3!==t.length)return!1;for(let e=0;e<t.length;e++){const r=t[e];if("number"!=typeof r||r<0)return!1}return!0};const r=t=>({major:t[0],minor:t[1],patch:t[2]}),n=t=>{const r=t.split(".").map((t=>Number(t)));if(!(0,e.isVersionArray)(r))throw new Error("version string is in wrong format");return r},i=t=>`${t[0]}.${t[1]}.${t[2]}`;e.isNewer=(t,e)=>{const i=r("string"==typeof t?n(t):t),o=r("string"==typeof e?n(e):e);return i.major-o.major!=0?i.major>o.major:i.minor-o.minor!=0?i.minor>o.minor:i.patch-o.patch!=0&&i.patch>o.patch};e.isEqual=(t,e)=>("string"==typeof t?t:i(t))===("string"==typeof e?e:i(e));e.isNewerOrEqual=(t,r)=>(0,e.isNewer)(t,r)||(0,e.isEqual)(t,r);e.normalizeVersion=t=>t.replace(/\b0+(\d)/g,"$1")},"../utils/lib/xssFilters.js":(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.inDoubleQuotes=e.inSingleQuotes=e.inHTML=void 0;const r=/</g,n=/'/g,i=/"/g;e.inHTML=t=>t.replace(r,"&lt;");e.inSingleQuotes=t=>t.replace(n,"&#39;");e.inDoubleQuotes=t=>t.replace(i,"&quot;")},"../../node_modules/base64-js/index.js":(t,e)=>{"use strict";e.byteLength=function(t){var e=u(t),r=e[0],n=e[1];return 3*(r+n)/4-n},e.toByteArray=function(t){var e,r,o=u(t),s=o[0],a=o[1],c=new i(function(t,e,r){return 3*(e+r)/4-r}(0,s,a)),l=0,f=a>0?s-4:s;for(r=0;r<f;r+=4)e=n[t.charCodeAt(r)]<<18|n[t.charCodeAt(r+1)]<<12|n[t.charCodeAt(r+2)]<<6|n[t.charCodeAt(r+3)],c[l++]=e>>16&255,c[l++]=e>>8&255,c[l++]=255&e;2===a&&(e=n[t.charCodeAt(r)]<<2|n[t.charCodeAt(r+1)]>>4,c[l++]=255&e);1===a&&(e=n[t.charCodeAt(r)]<<10|n[t.charCodeAt(r+1)]<<4|n[t.charCodeAt(r+2)]>>2,c[l++]=e>>8&255,c[l++]=255&e);return c},e.fromByteArray=function(t){for(var e,n=t.length,i=n%3,o=[],s=16383,u=0,c=n-i;u<c;u+=s)o.push(a(t,u,u+s>c?c:u+s));1===i?(e=t[n-1],o.push(r[e>>2]+r[e<<4&63]+"==")):2===i&&(e=(t[n-2]<<8)+t[n-1],o.push(r[e>>10]+r[e>>4&63]+r[e<<2&63]+"="));return o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=t.indexOf("=");return-1===r&&(r=e),[r,r===e?0:4-r%4]}function a(t,e,n){for(var i,o,s=[],u=e;u<n;u+=3)i=(t[u]<<16&16711680)+(t[u+1]<<8&65280)+(255&t[u+2]),s.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return s.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},"../../node_modules/buffer/index.js":(t,e,r)=>{"use strict";
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
const n=r("../../node_modules/base64-js/index.js"),i=r("../../node_modules/ieee754/index.js"),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.lW=Buffer,e.h2=50;const s=2147483647;function u(t){if(t>s)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,Buffer.prototype),e}function Buffer(t,e,r){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return a(t,e,r)}function a(t,e,r){if("string"==typeof t)return function(t,e){"string"==typeof e&&""!==e||(e="utf8");if(!Buffer.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const r=0|d(t,e);let n=u(r);const i=n.write(t,e);i!==r&&(n=n.slice(0,i));return n}(t,e);if(ArrayBuffer.isView(t))return function(t){if(H(t,Uint8Array)){const e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(H(t,ArrayBuffer)||t&&H(t.buffer,ArrayBuffer))return h(t,e,r);if("undefined"!=typeof SharedArrayBuffer&&(H(t,SharedArrayBuffer)||t&&H(t.buffer,SharedArrayBuffer)))return h(t,e,r);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const n=t.valueOf&&t.valueOf();if(null!=n&&n!==t)return Buffer.from(n,e,r);const i=function(t){if(Buffer.isBuffer(t)){const e=0|p(t.length),r=u(e);return 0===r.length||t.copy(r,0,0,e),r}if(void 0!==t.length)return"number"!=typeof t.length||Y(t.length)?u(0):f(t);if("Buffer"===t.type&&Array.isArray(t.data))return f(t.data)}(t);if(i)return i;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return Buffer.from(t[Symbol.toPrimitive]("string"),e,r);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return c(t),u(t<0?0:0|p(t))}function f(t){const e=t.length<0?0:0|p(t.length),r=u(e);for(let n=0;n<e;n+=1)r[n]=255&t[n];return r}function h(t,e,r){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(r||0))throw new RangeError('"length" is outside of buffer bounds');let n;return n=void 0===e&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,e):new Uint8Array(t,e,r),Object.setPrototypeOf(n,Buffer.prototype),n}function p(t){if(t>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|t}function d(t,e){if(Buffer.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||H(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const r=t.length,n=arguments.length>2&&!0===arguments[2];if(!n&&0===r)return 0;let i=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return Q(t).length;default:if(i)return n?-1:q(t).length;e=(""+e).toLowerCase(),i=!0}}function y(t,e,r){let n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return S(this,e,r);case"utf8":case"utf-8":return A(this,e,r);case"ascii":return I(this,e,r);case"latin1":case"binary":return B(this,e,r);case"base64":return j(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function g(t,e,r){const n=t[e];t[e]=t[r],t[r]=n}function v(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),Y(r=+r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:b(t,e,r,n,i);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):b(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function b(t,e,r,n,i){let o,s=1,u=t.length,a=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;s=2,u/=2,a/=2,r/=2}function c(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(i){let n=-1;for(o=r;o<u;o++)if(c(t,o)===c(e,-1===n?0:o-n)){if(-1===n&&(n=o),o-n+1===a)return n*s}else-1!==n&&(o-=o-n),n=-1}else for(r+a>u&&(r=u-a),o=r;o>=0;o--){let r=!0;for(let n=0;n<a;n++)if(c(t,o+n)!==c(e,n)){r=!1;break}if(r)return o}return-1}function m(t,e,r,n){r=Number(r)||0;const i=t.length-r;n?(n=Number(n))>i&&(n=i):n=i;const o=e.length;let s;for(n>o/2&&(n=o/2),s=0;s<n;++s){const n=parseInt(e.substr(2*s,2),16);if(Y(n))return s;t[r+s]=n}return s}function _(t,e,r,n){return W(q(e,t.length-r),t,r,n)}function w(t,e,r,n){return W(function(t){const e=[];for(let r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}(e),t,r,n)}function E(t,e,r,n){return W(Q(e),t,r,n)}function O(t,e,r,n){return W(function(t,e){let r,n,i;const o=[];for(let s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(e,t.length-r),t,r,n)}function j(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function A(t,e,r){r=Math.min(t.length,r);const n=[];let i=e;for(;i<r;){const e=t[i];let o=null,s=e>239?4:e>223?3:e>191?2:1;if(i+s<=r){let r,n,u,a;switch(s){case 1:e<128&&(o=e);break;case 2:r=t[i+1],128==(192&r)&&(a=(31&e)<<6|63&r,a>127&&(o=a));break;case 3:r=t[i+1],n=t[i+2],128==(192&r)&&128==(192&n)&&(a=(15&e)<<12|(63&r)<<6|63&n,a>2047&&(a<55296||a>57343)&&(o=a));break;case 4:r=t[i+1],n=t[i+2],u=t[i+3],128==(192&r)&&128==(192&n)&&128==(192&u)&&(a=(15&e)<<18|(63&r)<<12|(63&n)<<6|63&u,a>65535&&a<1114112&&(o=a))}}null===o?(o=65533,s=1):o>65535&&(o-=65536,n.push(o>>>10&1023|55296),o=56320|1023&o),n.push(o),i+=s}return function(t){const e=t.length;if(e<=T)return String.fromCharCode.apply(String,t);let r="",n=0;for(;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=T));return r}(n)}Buffer.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),Buffer.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(Buffer.prototype,"parent",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.buffer}}),Object.defineProperty(Buffer.prototype,"offset",{enumerable:!0,get:function(){if(Buffer.isBuffer(this))return this.byteOffset}}),Buffer.poolSize=8192,Buffer.from=function(t,e,r){return a(t,e,r)},Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype),Object.setPrototypeOf(Buffer,Uint8Array),Buffer.alloc=function(t,e,r){return function(t,e,r){return c(t),t<=0?u(t):void 0!==e?"string"==typeof r?u(t).fill(e,r):u(t).fill(e):u(t)}(t,e,r)},Buffer.allocUnsafe=function(t){return l(t)},Buffer.allocUnsafeSlow=function(t){return l(t)},Buffer.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==Buffer.prototype},Buffer.compare=function(t,e){if(H(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),H(e,Uint8Array)&&(e=Buffer.from(e,e.offset,e.byteLength)),!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let r=t.length,n=e.length;for(let i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);let r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;const n=Buffer.allocUnsafe(e);let i=0;for(r=0;r<t.length;++r){let e=t[r];if(H(e,Uint8Array))i+e.length>n.length?(Buffer.isBuffer(e)||(e=Buffer.from(e)),e.copy(n,i)):Uint8Array.prototype.set.call(n,e,i);else{if(!Buffer.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(n,i)}i+=e.length}return n},Buffer.byteLength=d,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)g(this,e,e+1);return this},Buffer.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)g(this,e,e+3),g(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)g(this,e,e+7),g(this,e+1,e+6),g(this,e+2,e+5),g(this,e+3,e+4);return this},Buffer.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):y.apply(this,arguments)},Buffer.prototype.toLocaleString=Buffer.prototype.toString,Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){let t="";const r=e.h2;return t=this.toString("hex",0,r).replace(/(.{2})/g,"$1 ").trim(),this.length>r&&(t+=" ... "),"<Buffer "+t+">"},o&&(Buffer.prototype[o]=Buffer.prototype.inspect),Buffer.prototype.compare=function(t,e,r,n,i){if(H(t,Uint8Array)&&(t=Buffer.from(t,t.offset,t.byteLength)),!Buffer.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(this===t)return 0;let o=(i>>>=0)-(n>>>=0),s=(r>>>=0)-(e>>>=0);const u=Math.min(o,s),a=this.slice(n,i),c=t.slice(e,r);for(let t=0;t<u;++t)if(a[t]!==c[t]){o=a[t],s=c[t];break}return o<s?-1:s<o?1:0},Buffer.prototype.includes=function(t,e,r){return-1!==this.indexOf(t,e,r)},Buffer.prototype.indexOf=function(t,e,r){return v(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return v(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(r)?(r>>>=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}const i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");let o=!1;for(;;)switch(n){case"hex":return m(this,t,e,r);case"utf8":case"utf-8":return _(this,t,e,r);case"ascii":case"latin1":case"binary":return w(this,t,e,r);case"base64":return E(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const T=4096;function I(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function B(t,e,r){let n="";r=Math.min(t.length,r);for(let i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function S(t,e,r){const n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);let i="";for(let n=e;n<r;++n)i+=K[t[n]];return i}function U(t,e,r){const n=t.slice(e,r);let i="";for(let t=0;t<n.length-1;t+=2)i+=String.fromCharCode(n[t]+256*n[t+1]);return i}function R(t,e,r){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function L(t,e,r,n,i,o){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function P(t,e,r,n,i){$(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o,o>>=8,t[r++]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,s>>=8,t[r++]=s,r}function N(t,e,r,n,i){$(e,n,i,t,r,7);let o=Number(e&BigInt(4294967295));t[r+7]=o,o>>=8,t[r+6]=o,o>>=8,t[r+5]=o,o>>=8,t[r+4]=o;let s=Number(e>>BigInt(32)&BigInt(4294967295));return t[r+3]=s,s>>=8,t[r+2]=s,s>>=8,t[r+1]=s,s>>=8,t[r]=s,r+8}function M(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function x(t,e,r,n,o){return e=+e,r>>>=0,o||M(t,0,r,4),i.write(t,e,r,n,23,4),r+4}function D(t,e,r,n,o){return e=+e,r>>>=0,o||M(t,0,r,8),i.write(t,e,r,n,52,8),r+8}Buffer.prototype.slice=function(t,e){const r=this.length;(t=~~t)<0?(t+=r)<0&&(t=0):t>r&&(t=r),(e=void 0===e?r:~~e)<0?(e+=r)<0&&(e=0):e>r&&(e=r),e<t&&(e=t);const n=this.subarray(t,e);return Object.setPrototypeOf(n,Buffer.prototype),n},Buffer.prototype.readUintLE=Buffer.prototype.readUIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return n},Buffer.prototype.readUintBE=Buffer.prototype.readUIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t+--e],i=1;for(;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUint8=Buffer.prototype.readUInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),this[t]},Buffer.prototype.readUint16LE=Buffer.prototype.readUInt16LE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUint16BE=Buffer.prototype.readUInt16BE=function(t,e){return t>>>=0,e||R(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUint32LE=Buffer.prototype.readUInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUint32BE=Buffer.prototype.readUInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readBigUInt64LE=J((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,i=this[++t]+256*this[++t]+65536*this[++t]+r*2**24;return BigInt(n)+(BigInt(i)<<BigInt(32))})),Buffer.prototype.readBigUInt64BE=J((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=e*2**24+65536*this[++t]+256*this[++t]+this[++t],i=this[++t]*2**24+65536*this[++t]+256*this[++t]+r;return(BigInt(n)<<BigInt(32))+BigInt(i)})),Buffer.prototype.readIntLE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=this[t],i=1,o=0;for(;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t>>>=0,e>>>=0,r||R(t,e,this.length);let n=e,i=1,o=this[t+--n];for(;n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},Buffer.prototype.readInt8=function(t,e){return t>>>=0,e||R(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},Buffer.prototype.readInt16LE=function(t,e){t>>>=0,e||R(t,2,this.length);const r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){t>>>=0,e||R(t,2,this.length);const r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return t>>>=0,e||R(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readBigInt64LE=J((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=this[t+4]+256*this[t+5]+65536*this[t+6]+(r<<24);return(BigInt(n)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)})),Buffer.prototype.readBigInt64BE=J((function(t){V(t>>>=0,"offset");const e=this[t],r=this[t+7];void 0!==e&&void 0!==r||z(t,this.length-8);const n=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(n)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+r)})),Buffer.prototype.readFloatLE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return t>>>=0,e||R(t,4,this.length),i.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return t>>>=0,e||R(t,8,this.length),i.read(this,t,!1,52,8)},Buffer.prototype.writeUintLE=Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){L(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=1,o=0;for(this[e]=255&t;++o<r&&(i*=256);)this[e+o]=t/i&255;return e+r},Buffer.prototype.writeUintBE=Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e>>>=0,r>>>=0,!n){L(this,t,e,r,Math.pow(2,8*r)-1,0)}let i=r-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+r},Buffer.prototype.writeUint8=Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,255,0),this[e]=255&t,e+1},Buffer.prototype.writeUint16LE=Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},Buffer.prototype.writeUint16BE=Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},Buffer.prototype.writeUint32LE=Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},Buffer.prototype.writeUint32BE=Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Buffer.prototype.writeBigUInt64LE=J((function(t,e=0){return P(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeBigUInt64BE=J((function(t,e=0){return N(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))})),Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=0,o=1,s=0;for(this[e]=255&t;++i<r&&(o*=256);)t<0&&0===s&&0!==this[e+i-1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e>>>=0,!n){const n=Math.pow(2,8*r-1);L(this,t,e,r,n-1,-n)}let i=r-1,o=1,s=0;for(this[e+i]=255&t;--i>=0&&(o*=256);)t<0&&0===s&&0!==this[e+i+1]&&(s=1),this[e+i]=(t/o>>0)-s&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e>>>=0,r||L(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},Buffer.prototype.writeBigInt64LE=J((function(t,e=0){return P(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeBigInt64BE=J((function(t,e=0){return N(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),Buffer.prototype.writeFloatLE=function(t,e,r){return x(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return x(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return D(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return D(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(!Buffer.isBuffer(t))throw new TypeError("argument should be a Buffer");if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);const i=n-r;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,r,n):Uint8Array.prototype.set.call(t,this.subarray(r,n),e),i},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n);if(1===t.length){const e=t.charCodeAt(0);("utf8"===n&&e<128||"latin1"===n)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;let i;if(e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0),"number"==typeof t)for(i=e;i<r;++i)this[i]=t;else{const o=Buffer.isBuffer(t)?t:Buffer.from(t,n),s=o.length;if(0===s)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(i=0;i<r-e;++i)this[i+e]=o[i%s]}return this};const C={};function k(t,e,r){C[t]=class extends r{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function F(t){let e="",r=t.length;const n="-"===t[0]?1:0;for(;r>=n+4;r-=3)e=`_${t.slice(r-3,r)}${e}`;return`${t.slice(0,r)}${e}`}function $(t,e,r,n,i,o){if(t>r||t<e){const n="bigint"==typeof e?"n":"";let i;throw i=o>3?0===e||e===BigInt(0)?`>= 0${n} and < 2${n} ** ${8*(o+1)}${n}`:`>= -(2${n} ** ${8*(o+1)-1}${n}) and < 2 ** ${8*(o+1)-1}${n}`:`>= ${e}${n} and <= ${r}${n}`,new C.ERR_OUT_OF_RANGE("value",i,t)}!function(t,e,r){V(e,"offset"),void 0!==t[e]&&void 0!==t[e+r]||z(e,t.length-(r+1))}(n,i,o)}function V(t,e){if("number"!=typeof t)throw new C.ERR_INVALID_ARG_TYPE(e,"number",t)}function z(t,e,r){if(Math.floor(t)!==t)throw V(t,r),new C.ERR_OUT_OF_RANGE(r||"offset","an integer",t);if(e<0)throw new C.ERR_BUFFER_OUT_OF_BOUNDS;throw new C.ERR_OUT_OF_RANGE(r||"offset",`>= ${r?1:0} and <= ${e}`,t)}k("ERR_BUFFER_OUT_OF_BOUNDS",(function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),k("ERR_INVALID_ARG_TYPE",(function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`}),TypeError),k("ERR_OUT_OF_RANGE",(function(t,e,r){let n=`The value of "${t}" is out of range.`,i=r;return Number.isInteger(r)&&Math.abs(r)>2**32?i=F(String(r)):"bigint"==typeof r&&(i=String(r),(r>BigInt(2)**BigInt(32)||r<-(BigInt(2)**BigInt(32)))&&(i=F(i)),i+="n"),n+=` It must be ${e}. Received ${i}`,n}),RangeError);const G=/[^+/0-9A-Za-z-_]/g;function q(t,e){let r;e=e||1/0;const n=t.length;let i=null;const o=[];for(let s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function Q(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(G,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function W(t,e,r,n){let i;for(i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function H(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function Y(t){return t!=t}const K=function(){const t="0123456789abcdef",e=new Array(256);for(let r=0;r<16;++r){const n=16*r;for(let i=0;i<16;++i)e[n+i]=t[r]+t[i]}return e}();function J(t){return"undefined"==typeof BigInt?X:t}function X(){throw new Error("BigInt not supported")}},"../../node_modules/es6-promise/dist/es6-promise.js":function(t,e,r){var n=r("../../node_modules/process/browser.js");
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */t.exports=function(){"use strict";function t(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}function e(t){return"function"==typeof t}var i=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,s=void 0,u=void 0,a=function(t,e){w[o]=t,w[o+1]=e,2===(o+=2)&&(u?u(E):j())};function c(t){u=t}function l(t){a=t}var f="undefined"!=typeof window?window:void 0,h=f||{},p=h.MutationObserver||h.WebKitMutationObserver,d="undefined"==typeof self&&"[object process]"==={}.toString.call(n),y="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function g(){return function(){return n.nextTick(E)}}function v(){return void 0!==s?function(){s(E)}:_()}function b(){var t=0,e=new p(E),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function m(){var t=new MessageChannel;return t.port1.onmessage=E,function(){return t.port2.postMessage(0)}}function _(){var t=setTimeout;return function(){return t(E,1)}}var w=new Array(1e3);function E(){for(var t=0;t<o;t+=2)(0,w[t])(w[t+1]),w[t]=void 0,w[t+1]=void 0;o=0}function O(){try{var t=Function("return this")().require("vertx");return s=t.runOnLoop||t.runOnContext,v()}catch(t){return _()}}var j=void 0;function A(t,e){var r=this,n=new this.constructor(B);void 0===n[I]&&H(n);var i=r._state;if(i){var o=arguments[i-1];a((function(){return G(i,n,o,r._result)}))}else V(r,n,t,e);return n}function T(t){var e=this;if(t&&"object"==typeof t&&t.constructor===e)return t;var r=new e(B);return C(r,t),r}j=d?g():p?b():y?m():void 0===f?O():_();var I=Math.random().toString(36).substring(2);function B(){}var S=void 0,U=1,R=2;function L(){return new TypeError("You cannot resolve a promise with itself")}function P(){return new TypeError("A promises callback cannot return that same promise.")}function N(t,e,r,n){try{t.call(e,r,n)}catch(t){return t}}function M(t,e,r){a((function(t){var n=!1,i=N(r,e,(function(r){n||(n=!0,e!==r?C(t,r):F(t,r))}),(function(e){n||(n=!0,$(t,e))}),"Settle: "+(t._label||" unknown promise"));!n&&i&&(n=!0,$(t,i))}),t)}function x(t,e){e._state===U?F(t,e._result):e._state===R?$(t,e._result):V(e,void 0,(function(e){return C(t,e)}),(function(e){return $(t,e)}))}function D(t,r,n){r.constructor===t.constructor&&n===A&&r.constructor.resolve===T?x(t,r):void 0===n?F(t,r):e(n)?M(t,r,n):F(t,r)}function C(e,r){if(e===r)$(e,L());else if(t(r)){var n=void 0;try{n=r.then}catch(t){return void $(e,t)}D(e,r,n)}else F(e,r)}function k(t){t._onerror&&t._onerror(t._result),z(t)}function F(t,e){t._state===S&&(t._result=e,t._state=U,0!==t._subscribers.length&&a(z,t))}function $(t,e){t._state===S&&(t._state=R,t._result=e,a(k,t))}function V(t,e,r,n){var i=t._subscribers,o=i.length;t._onerror=null,i[o]=e,i[o+U]=r,i[o+R]=n,0===o&&t._state&&a(z,t)}function z(t){var e=t._subscribers,r=t._state;if(0!==e.length){for(var n=void 0,i=void 0,o=t._result,s=0;s<e.length;s+=3)n=e[s],i=e[s+r],n?G(r,n,i,o):i(o);t._subscribers.length=0}}function G(t,r,n,i){var o=e(n),s=void 0,u=void 0,a=!0;if(o){try{s=n(i)}catch(t){a=!1,u=t}if(r===s)return void $(r,P())}else s=i;r._state!==S||(o&&a?C(r,s):!1===a?$(r,u):t===U?F(r,s):t===R&&$(r,s))}function q(t,e){try{e((function(e){C(t,e)}),(function(e){$(t,e)}))}catch(e){$(t,e)}}var Q=0;function W(){return Q++}function H(t){t[I]=Q++,t._state=void 0,t._result=void 0,t._subscribers=[]}function Y(){return new Error("Array Methods must be provided an Array")}var K=function(){function t(t,e){this._instanceConstructor=t,this.promise=new t(B),this.promise[I]||H(this.promise),i(e)?(this.length=e.length,this._remaining=e.length,this._result=new Array(this.length),0===this.length?F(this.promise,this._result):(this.length=this.length||0,this._enumerate(e),0===this._remaining&&F(this.promise,this._result))):$(this.promise,Y())}return t.prototype._enumerate=function(t){for(var e=0;this._state===S&&e<t.length;e++)this._eachEntry(t[e],e)},t.prototype._eachEntry=function(t,e){var r=this._instanceConstructor,n=r.resolve;if(n===T){var i=void 0,o=void 0,s=!1;try{i=t.then}catch(t){s=!0,o=t}if(i===A&&t._state!==S)this._settledAt(t._state,e,t._result);else if("function"!=typeof i)this._remaining--,this._result[e]=t;else if(r===rt){var u=new r(B);s?$(u,o):D(u,t,i),this._willSettleAt(u,e)}else this._willSettleAt(new r((function(e){return e(t)})),e)}else this._willSettleAt(n(t),e)},t.prototype._settledAt=function(t,e,r){var n=this.promise;n._state===S&&(this._remaining--,t===R?$(n,r):this._result[e]=r),0===this._remaining&&F(n,this._result)},t.prototype._willSettleAt=function(t,e){var r=this;V(t,void 0,(function(t){return r._settledAt(U,e,t)}),(function(t){return r._settledAt(R,e,t)}))},t}();function J(t){return new K(this,t).promise}function X(t){var e=this;return i(t)?new e((function(r,n){for(var i=t.length,o=0;o<i;o++)e.resolve(t[o]).then(r,n)})):new e((function(t,e){return e(new TypeError("You must pass an array to race."))}))}function Z(t){var e=new this(B);return $(e,t),e}function tt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function et(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var rt=function(){function t(e){this[I]=W(),this._result=this._state=void 0,this._subscribers=[],B!==e&&("function"!=typeof e&&tt(),this instanceof t?q(this,e):et())}return t.prototype.catch=function(t){return this.then(null,t)},t.prototype.finally=function(t){var r=this,n=r.constructor;return e(t)?r.then((function(e){return n.resolve(t()).then((function(){return e}))}),(function(e){return n.resolve(t()).then((function(){throw e}))})):r.then(t,t)},t}();function nt(){var t=void 0;if(void 0!==r.g)t=r.g;else if("undefined"!=typeof self)t=self;else try{t=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var e=t.Promise;if(e){var n=null;try{n=Object.prototype.toString.call(e.resolve())}catch(t){}if("[object Promise]"===n&&!e.cast)return}t.Promise=rt}return rt.prototype.then=A,rt.all=J,rt.race=X,rt.resolve=T,rt.reject=Z,rt._setScheduler=c,rt._setAsap=l,rt._asap=a,rt.polyfill=nt,rt.Promise=rt,rt}()},"../../node_modules/events/events.js":(t,e,r)=>{"use strict";var n,i=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var u=Number.isNaN||function(t){return t!=t};function a(){a.init.call(this)}t.exports=a,t.exports.once=function(t,e){return new i((function(r,n){function i(r){t.removeListener(e,o),n(r)}function o(){"function"==typeof t.removeListener&&t.removeListener("error",i),r([].slice.call(arguments))}b(t,e,o,{once:!0}),"error"!==e&&function(t,e,r){"function"==typeof t.on&&b(t,"error",e,r)}(t,i,{once:!0})}))},a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var c=10;function l(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function f(t){return void 0===t._maxListeners?a.defaultMaxListeners:t._maxListeners}function h(t,e,r,n){var i,events,o,s;if(l(r),void 0===(events=t._events)?(events=t._events=Object.create(null),t._eventsCount=0):(void 0!==events.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),events=t._events),o=events[e]),void 0===o)o=events[e]=r,++t._eventsCount;else if("function"==typeof o?o=events[e]=n?[r,o]:[o,r]:n?o.unshift(r):o.push(r),(i=f(t))>0&&o.length>i&&!o.warned){o.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+o.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=t,u.type=e,u.count=o.length,s=u,console&&console.warn&&console.warn(s)}return t}function p(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=p.bind(n);return i.listener=r,n.wrapFn=i,i}function y(t,e,r){var events=t._events;if(void 0===events)return[];var n=events[e];return void 0===n?[]:"function"==typeof n?r?[n.listener||n]:[n]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(n):v(n,n.length)}function g(t){var events=this._events;if(void 0!==events){var e=events[t];if("function"==typeof e)return 1;if(void 0!==e)return e.length}return 0}function v(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}function b(t,e,r,n){if("function"==typeof t.on)n.once?t.once(e,r):t.on(e,r);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function i(o){n.once&&t.removeEventListener(e,i),r(o)}))}}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return c},set:function(t){if("number"!=typeof t||t<0||u(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");c=t}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||u(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},a.prototype.getMaxListeners=function(){return f(this)},a.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,events=this._events;if(void 0!==events)n=n&&void 0===events.error;else if(!n)return!1;if(n){var i;if(e.length>0&&(i=e[0]),i instanceof Error)throw i;var o=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw o.context=i,o}var u=events[t];if(void 0===u)return!1;if("function"==typeof u)s(u,this,e);else{var a=u.length,c=v(u,a);for(r=0;r<a;++r)s(c[r],this,e)}return!0},a.prototype.addListener=function(t,e){return h(this,t,e,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(t,e){return h(this,t,e,!0)},a.prototype.once=function(t,e){return l(e),this.on(t,d(this,t,e)),this},a.prototype.prependOnceListener=function(t,e){return l(e),this.prependListener(t,d(this,t,e)),this},a.prototype.removeListener=function(t,e){var r,events,n,i,o;if(l(e),void 0===(events=this._events))return this;if(void 0===(r=events[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete events[t],events.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(n=-1,i=r.length-1;i>=0;i--)if(r[i]===e||r[i].listener===e){o=r[i].listener,n=i;break}if(n<0)return this;0===n?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,n),1===r.length&&(events[t]=r[0]),void 0!==events.removeListener&&this.emit("removeListener",t,o||e)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(t){var e,events,r;if(void 0===(events=this._events))return this;if(void 0===events.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==events[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete events[t]),this;if(0===arguments.length){var n,i=Object.keys(events);for(r=0;r<i.length;++r)"removeListener"!==(n=i[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=events[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},a.prototype.listeners=function(t){return y(this,t,!0)},a.prototype.rawListeners=function(t){return y(this,t,!1)},a.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},a.prototype.listenerCount=g,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},"../../node_modules/ieee754/index.js":(t,e)=>{
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,r,n,i){var o,s,u=8*i-n-1,a=(1<<u)-1,c=a>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=u;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===a)return s?NaN:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,u,a,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(u=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-s))<1&&(s--,a*=2),(e+=s+f>=1?h/a:h*Math.pow(2,1-f))*a>=2&&(s++,a/=2),s+f>=l?(u=0,s=l):s+f>=1?(u=(e*a-1)*Math.pow(2,i),s+=f):(u=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&u,p+=d,u/=256,i-=8);for(s=s<<i|u,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},"../../node_modules/process/browser.js":t=>{var e,r,n=t.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(t){if(e===setTimeout)return setTimeout(t,0);if((e===i||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(r){try{return e.call(null,t,0)}catch(r){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:i}catch(t){e=i}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(t){r=o}}();var u,a=[],c=!1,l=-1;function f(){c&&u&&(c=!1,u.length?a=u.concat(a):l=-1,a.length&&h())}function h(){if(!c){var t=s(f);c=!0;for(var e=a.length;e;){for(u=a,a=[];++l<e;)u&&u[l].run();l=-1,e=a.length}u=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{return r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function d(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];a.push(new p(t,e)),1!==a.length||c||s(h)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=d,n.addListener=d,n.once=d,n.off=d,n.removeListener=d,n.removeAllListeners=d,n.emit=d,n.prependListener=d,n.prependOnceListener=d,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},"../transport/lib/sessions/background-sharedworker.js":function(t,e,r){"use strict";var n=r("../../node_modules/es6-promise/dist/es6-promise.js").Promise,i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=n))((function(n,o){function s(t){try{a(i.next(t))}catch(t){o(t)}}function u(t){try{a(i.throw(t))}catch(t){o(t)}}function a(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(s,u)}a((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const o=new(r("../transport/lib/sessions/background.js").SessionsBackground),s=[];o.on("descriptors",(t=>{s.forEach((e=>{e.postMessage({type:"descriptors",payload:t})}))})),self.onconnect=function(t){const e=t.ports[0];s.push(e),e.addEventListener("message",(t=>{((t,e)=>{i(void 0,void 0,void 0,(function*(){const r=yield o.handleMessage(t);e.postMessage(r)}))})(t.data,e)})),e.start()}}},e={};function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}();r("../transport/lib/sessions/background-sharedworker.js")})();